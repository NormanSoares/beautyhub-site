<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Siena Wide Vented Brush | 67 Beauty Hub</title>
    <link rel="stylesheet" href="../../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- PayPal SDK -->
    <!-- Review System -->
    <script src="../../js/review-system.js"></script>
    <script src="https://www.paypal.com/sdk/js?client-id=Ab2ftZVJCplquKwOY1cWgvWMivADwMhbUs-OhehwO4hVh_VW9lS87qLkRUVD39yEeoh7YGXzBeuq1Dlh&currency=USD&intent=capture"></script>
    <!-- AliExpress Integration -->
    <script src="../../js/aliexpress-integration.js"></script>
    <style>
        body {
            background: #f0e6d2;
        }
        
        .checkout-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            margin-top: 50px;
        }
        
        .checkout-layout {
            display: flex;
            flex-direction: column;
            gap: 40px;
        }
        
        .unified-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: start;
        }
        
        .checkout-bottom {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
            align-items: start;
        }
        
        .form-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
        }
        
        .summary-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }
        
        .product-gallery {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .main-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .thumbnail-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
        
        .thumbnail {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .thumbnail:hover,
        .thumbnail.active {
            border-color: #d4af37;
            transform: scale(1.05);
        }
        
        .product-info h1 {
            font-size: 2.2rem;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .product-info .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }
        
        .price-section {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
        }
        
        .price-main {
            font-size: 2.5rem;
            font-weight: 700;
            color: #d4af37;
            margin-bottom: 5px;
        }
        
        .price-original {
            font-size: 1.2rem;
            color: #95a5a6;
            text-decoration: line-through;
            margin-bottom: 10px;
        }
        
        .discount-badge {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 15px;
        }
        
        .features-list {
            list-style: none;
            padding: 0;
            margin-bottom: 25px;
        }
        
        .features-list li {
            padding: 8px 0;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .features-list li i {
            color: #d4af37;
            width: 20px;
        }
        
        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .quantity-controls {
            display: flex;
            align-items: center;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .quantity-btn {
            background: #f8f9fa;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 1.2rem;
            color: #2c3e50;
            transition: all 0.3s ease;
        }
        
        .quantity-btn:hover {
            background: #e9ecef;
        }
        
        .quantity-input {
            border: none;
            padding: 10px 15px;
            text-align: center;
            width: 60px;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .add-to-cart-btn {
            background: linear-gradient(135deg, #d4af37, #b8941f);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 15px;
        }
        
        .add-to-cart-btn:hover {
            background: linear-gradient(135deg, #b8941f, #9a7d1a);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }
        
        .buy-now-btn {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .buy-now-btn:hover {
            background: linear-gradient(135deg, #229954, #1e8449);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }
        
        .section-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 600;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #2c3e50;
            font-weight: 500;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .payment-methods {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .payment-method {
            flex: 1;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .payment-method:hover,
        .payment-method.selected {
            border-color: #d4af37;
            background: rgba(212, 175, 55, 0.1);
        }
        
        .payment-method i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #d4af37;
        }
        
        .order-summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .order-item:last-child {
            border-bottom: none;
        }
        
        .order-total {
            background: #d4af37;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .shipping-info {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #27ae60;
        }
        
        .shipping-info h4 {
            color: #27ae60;
            margin-bottom: 10px;
        }
        
        .shipping-info p {
            color: #2c3e50;
            margin: 5px 0;
        }
        
        .security-badges {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .security-badge {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            color: #27ae60;
            font-size: 0.9rem;
        }
        
        .security-badge i {
            font-size: 1.5rem;
        }
        
        @media (max-width: 768px) {
            .unified-section {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .checkout-bottom {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .thumbnail-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .product-info h1 {
                font-size: 1.8rem;
            }
            
            .price-main {
                font-size: 2rem;
            }
        }
        
        /* Flag Dropdown Styles */
        .flag-dropdown-container {
            position: relative;
            display: inline-block;
            margin-left: 20px;
        }
        
        .flag-dropdown {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            background: white;
            border: 2px solid #d4af37;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.1);
        }
        
        .flag-dropdown:hover {
            border-color: #b8941f;
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.2);
        }
        
        .selected-flag {
            font-size: 1.5rem;
            user-select: none;
        }
        
        .dropdown-arrow {
            color: #d4af37;
            font-size: 0.9rem;
            transition: transform 0.3s ease;
        }
        
        .flag-dropdown.open .dropdown-arrow {
            transform: rotate(180deg);
        }
        
        .flag-dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #d4af37;
            border-top: none;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.2);
            z-index: 1000;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .flag-dropdown-menu.open {
            max-height: 400px;
            overflow-y: auto;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* Internet Explorer 10+ */
        }
        
        .flag-dropdown-menu.open::-webkit-scrollbar {
            display: none; /* WebKit browsers (Chrome, Safari, Edge) */
        }
        
        .flag-option {
            padding: 12px 20px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .flag-option:hover {
            background-color: #fff9e6;
        }
        
        .flag-option:last-child {
            border-radius: 0 0 6px 6px;
        }
        
        @media (max-width: 768px) {
            .flag-dropdown-container {
                margin-top: 20px;
                margin-left: 0;
            }
            
            .flag-dropdown {
                padding: 10px 15px;
            }
            
            .selected-flag {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="logo.png" alt="67 Beauty Hub" height="40">
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">Início</a>
                </li>
                <li class="nav-item">
                    <a href="index.html#beauty-products" class="nav-link">Beleza</a>
                </li>
                <li class="nav-item">
                    <a href="index.html#comfort-products" class="nav-link">Conforto</a>
                </li>
            </ul>
            
            <!-- Flag Dropdown Selector -->
            <div class="flag-dropdown-container">
                <div class="flag-dropdown" onclick="toggleFlagDropdown()">
                    <div class="selected-flag" id="selectedFlag">🇺🇸</div>
                    <i class="fas fa-chevron-down dropdown-arrow"></i>
                </div>
                <div class="flag-dropdown-menu" id="flagDropdownMenu">
                    <!-- Países selecionados -->
                    <div class="flag-option" data-currency="USD" data-flag="🇺🇸" data-country="Estados Unidos">🇺🇸 Estados Unidos</div>
                    <div class="flag-option" data-currency="BRL" data-flag="🇧🇷" data-country="Brasil">🇧🇷 Brasil</div>
                    <div class="flag-option" data-currency="EUR" data-flag="🇵🇹" data-country="Portugal">🇵🇹 Portugal</div>
                </div>
            </div>
        </div>
    </nav>

    <div class="checkout-container">
        <div class="checkout-layout">
            <!-- Product Section -->
            <div class="unified-section">
                <!-- Product Gallery -->
                <div class="product-gallery">
                    <img id="mainImage" src="Produtos de beleza/Siena Wide Vented Brush/Apresentação.jpeg" alt="Siena Wide Vented Brush" class="main-image">
                    <div class="thumbnail-grid">
                        <img src="Produtos de beleza/Siena Wide Vented Brush/Apresentação.jpeg" alt="Siena Wide Vented Brush" class="thumbnail active" onclick="changeImage(this)">
                        <img src="Produtos de beleza/Siena Wide Vented Brush/Screenshot 2025-09-20 013316.png" alt="Siena Wide Vented Brush" class="thumbnail" onclick="changeImage(this)">
                        <img src="Produtos de beleza/Siena Wide Vented Brush/Screenshot 2025-09-20 013452.png" alt="Siena Wide Vented Brush" class="thumbnail" onclick="changeImage(this)">
                        <img src="Produtos de beleza/Siena Wide Vented Brush/Screenshot 2025-09-20 013521.png" alt="Siena Wide Vented Brush" class="thumbnail" onclick="changeImage(this)">
                    </div>
                </div>

                <!-- Product Info -->
                <div class="product-info">
                    <h1>Siena Wide Vented Brush</h1>
                    <p class="subtitle">Pincel profissional de alta qualidade para maquiagem</p>
                    
                    <div class="price-section">
                        <div class="price-main">$12.99</div>
                        <div class="price-original">$24.99</div>
                        <div class="discount-badge">48% OFF</div>
                        <p style="color: #7f8c8d; margin: 0;">Frete grátis para todo o Brasil</p>
                    </div>

                    <ul class="features-list">
                        <li><i class="fas fa-check"></i> Cerdas sintéticas de alta qualidade</li>
                        <li><i class="fas fa-check"></i> Design ergonômico e confortável</li>
                        <li><i class="fas fa-check"></i> Ideal para aplicação de base e corretivo</li>
                        <li><i class="fas fa-check"></i> Fácil limpeza e manutenção</li>
                        <li><i class="fas fa-check"></i> Resistente e durável</li>
                        <li><i class="fas fa-check"></i> Resultado profissional</li>
                    </ul>

                    <div class="quantity-selector">
                        <label>Quantidade:</label>
                        <div class="quantity-controls">
                            <button class="quantity-btn" onclick="decreaseQuantity()">-</button>
                            <input type="number" class="quantity-input" id="quantity" value="1" min="1" max="10">
                            <button class="quantity-btn" onclick="increaseQuantity()">+</button>
                        </div>
                    </div>

                    <button class="add-to-cart-btn" onclick="addToCart()">
                        <i class="fas fa-shopping-cart"></i> Adicionar ao Carrinho
                    </button>
                    <button class="buy-now-btn" onclick="buyNow()">
                        <i class="fas fa-bolt"></i> Comprar Agora
                    </button>
                </div>
            </div>

            <!-- Checkout Form -->
            <div class="checkout-bottom">
                <div class="form-section">
                    <h2 class="section-title">Informações de Entrega</h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">Nome *</label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Sobrenome *</label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email">E-mail *</label>
                        <input type="email" id="email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">Telefone *</label>
                        <input type="tel" id="phone" name="phone" required>
                    </div>

                    <div class="form-group">
                        <label for="address">Endereço *</label>
                        <input type="text" id="address" name="address" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="city">Cidade *</label>
                            <input type="text" id="city" name="city" required>
                        </div>
                        <div class="form-group">
                            <label for="country">País *</label>
                                    <input type="text" id="country" name="country" required placeholder="Selecione ou digite o nome do seu país" list="country-list">
                                    <datalist id="country-list">
                                        <option value="🇧🇷 Brasil">
                                        <option value="🇺🇸 Estados Unidos">
                                        <option value="🇨🇦 Canadá">
                                        <option value="🇲🇽 México">
                                        <option value="🇦🇷 Argentina">
                                        <option value="🇨🇱 Chile">
                                        <option value="🇨🇴 Colômbia">
                                        <option value="🇵🇪 Peru">
                                        <option value="🇺🇾 Uruguai">
                                        <option value="🇵🇹 Portugal">
                                        <option value="🇪🇸 Espanha">
                                        <option value="🇫🇷 França">
                                        <option value="🇩🇪 Alemanha">
                                        <option value="🇮🇹 Itália">
                                        <option value="🇬🇧 Reino Unido">
                                        <option value="🇦🇺 Austrália">
                                        <option value="🇯🇵 Japão">
                                        <option value="🇨🇳 China">
                                        <option value="🇮🇳 Índia">
                                    </datalist>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="state">Estado *</label>
                            <select id="state" name="state" required>
                                <option value="">Selecione</option>
                                <option value="AC">Acre</option>
                                <option value="AL">Alagoas</option>
                                <option value="AP">Amapá</option>
                                <option value="AM">Amazonas</option>
                                <option value="BA">Bahia</option>
                                <option value="CE">Ceará</option>
                                <option value="DF">Distrito Federal</option>
                                <option value="ES">Espírito Santo</option>
                                <option value="GO">Goiás</option>
                                <option value="MA">Maranhão</option>
                                <option value="MT">Mato Grosso</option>
                                <option value="MS">Mato Grosso do Sul</option>
                                <option value="MG">Minas Gerais</option>
                                <option value="PA">Pará</option>
                                <option value="PB">Paraíba</option>
                                <option value="PR">Paraná</option>
                                <option value="PE">Pernambuco</option>
                                <option value="PI">Piauí</option>
                                <option value="RJ">Rio de Janeiro</option>
                                <option value="RN">Rio Grande do Norte</option>
                                <option value="RS">Rio Grande do Sul</option>
                                <option value="RO">Rondônia</option>
                                <option value="RR">Roraima</option>
                                <option value="SC">Santa Catarina</option>
                                <option value="SP">São Paulo</option>
                                <option value="SE">Sergipe</option>
                                <option value="TO">Tocantins</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="zipCode">CEP *</label>
                        <input type="text" id="zipCode" name="zipCode" required>
                    </div>

                    <h3 class="section-title">Método de Pagamento</h3>
                    
                    <div class="payment-methods">
                        <div class="payment-method" onclick="selectPayment('paypal')">
                            <i class="fab fa-paypal"></i>
                            <div>PayPal</div>
                        </div>
                        <div class="payment-method" onclick="selectPayment('card')">
                            <i class="fas fa-credit-card"></i>
                            <div>Cartão</div>
                        </div>
                    </div>

                    <div id="paypal-payment-button"></div>
                </div>

                <!-- Order Summary -->
                <div class="summary-section">
                    <h3 class="section-title">Resumo do Pedido</h3>
                    
                    <div class="order-summary">
                        <div class="order-item">
                            <span>Siena Wide Vented Brush</span>
                            <span id="itemQuantity">1x</span>
                        </div>
                        <div class="order-item">
                            <span>Subtotal</span>
                            <span id="subtotal">$12.99</span>
                        </div>
                        <div class="order-item">
                            <span>Frete</span>
                            <span>Grátis</span>
                        </div>
                        <div class="order-total">
                            Total: <span id="total">$12.99</span>
                        </div>
                        
                        <!-- Currency Selector for Summary -->
                        <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px; text-align: center;">
                            <div>
                                <label style="display: block; color: #555; font-size: 14px; margin-bottom: 5px;">
                                    <i class="fas fa-exchange-alt"></i> Moeda do Resumo
                                </label>
                                <select id="summaryCurrencySelector" style="padding: 8px 12px; border: 2px solid #d4af37; border-radius: 6px; background: white; color: #333; font-size: 14px; width: 100%; max-width: 250px;">
                                    <option value="USD">🇺🇸 Dólar Americano (USD)</option>
                                    <option value="BRL">🇧🇷 Real Brasileiro (BRL)</option>
                                    <option value="EUR">🇪🇺 Euro (EUR)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="shipping-info">
                        <h4><i class="fas fa-truck"></i> Informações de Entrega</h4>
                        <p><strong>Prazo:</strong> 15-25 dias úteis</p>
                        <p><strong>Frete:</strong> Grátis para todo o Brasil</p>
                        <p><strong>Rastreamento:</strong> Disponível após envio</p>
                    </div>

                    <div class="security-badges">
                        <div class="security-badge">
                            <i class="fas fa-shield-alt"></i>
                            <span>Compra Segura</span>
                        </div>
                        <div class="security-badge">
                            <i class="fas fa-lock"></i>
                            <span>SSL 256bit</span>
                        </div>
                        <div class="security-badge">
                            <i class="fas fa-undo"></i>
                            <span>Garantia</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedPayment = null;
        let quantity = 1;
        const basePrice = 12.99;

        // Image gallery functionality
        function changeImage(thumbnail) {
            const mainImage = document.getElementById('mainImage');
            mainImage.src = thumbnail.src;
            
            // Update active thumbnail
            document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
            thumbnail.classList.add('active');
        }

        // Quantity controls
        function increaseQuantity() {
            quantity = Math.min(quantity + 1, 10);
            updateQuantity();
        }

        function decreaseQuantity() {
            quantity = Math.max(quantity - 1, 1);
            updateQuantity();
        }

        function updateQuantity() {
            document.getElementById('quantity').value = quantity;
            document.getElementById('itemQuantity').textContent = quantity + 'x';
            
            const subtotal = (basePrice * quantity).toFixed(2);
            document.getElementById('subtotal').textContent = '$' + subtotal;
            document.getElementById('total').textContent = '$' + subtotal;
        }

        // Payment method selection
        function selectPayment(method) {
            selectedPayment = method;
            document.querySelectorAll('.payment-method').forEach(p => p.classList.remove('selected'));
            event.target.closest('.payment-method').classList.add('selected');
            
            if (method === 'paypal') {
                document.getElementById('paypal-payment-button').style.display = 'block';
                renderPayPalButton();
            } else {
                document.getElementById('paypal-payment-button').style.display = 'none';
            }
        }

        // PayPal integration
        function renderPayPalButton() {
            paypal.Buttons({
                createOrder: function(data, actions) {
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: (basePrice * quantity).toFixed(2),
                                currency_code: 'USD'
                            },
                            description: 'Siena Wide Vented Brush - ' + quantity + ' unidade(s)'
                        }]
                    });
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        alert('Pagamento aprovado! ID da transação: ' + details.id);
                        processOrder(details.id);
                    });
                },
                onError: function(err) {
                    console.error('Erro no PayPal:', err);
                    alert('Erro no processamento do pagamento. Tente novamente.');
                }
            }).render('#paypal-payment-button');
        }

        // Cart and order functions
        function addToCart() {
            const product = {
                id: 'siena-brush',
                name: 'Siena Wide Vented Brush',
                price: basePrice,
                quantity: quantity,
                image: 'Produtos de beleza/Siena Wide Vented Brush/Apresentação.jpeg'
            };
            
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const existingItem = cart.find(item => item.id === product.id);
            
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push(product);
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            alert('Produto adicionado ao carrinho!');
        }

        function buyNow() {
            if (!validateForm()) {
                return;
            }
            
            if (!selectedPayment) {
                alert('Por favor, selecione um método de pagamento.');
                return;
            }
            
            if (selectedPayment === 'paypal') {
                document.getElementById('paypal-payment-button').scrollIntoView({ behavior: 'smooth' });
                return;
            }
            
            // For card payment, show a mock success
            processOrder('CARD_' + Date.now());
        }

        function validateForm() {
            const requiredFields = ['firstName', 'lastName', 'email', 'phone', 'address', 'city', 'state', 'zipCode'];
            
            for (let field of requiredFields) {
                const input = document.getElementById(field);
                if (!input.value.trim()) {
                    alert('Por favor, preencha todos os campos obrigatórios.');
                    input.focus();
                    return false;
                }
            }
            
            return true;
        }

        function processOrder(transactionId) {
            const orderData = {
                id: 'ORDER_' + Date.now(),
                transactionId: transactionId,
                product: {
                    name: 'Siena Wide Vented Brush',
                    price: basePrice,
                    quantity: quantity
                },
                customer: {
                    firstName: document.getElementById('firstName').value,
                    lastName: document.getElementById('lastName').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    address: document.getElementById('address').value,
                    city: document.getElementById('city').value,
                    state: document.getElementById('state').value,
                    zipCode: document.getElementById('zipCode').value
                },
                paymentMethod: selectedPayment,
                total: (basePrice * quantity).toFixed(2),
                status: 'pending',
                date: new Date().toISOString()
            };
            
            // Save order to localStorage
            let orders = JSON.parse(localStorage.getItem('orders') || '[]');
            orders.push(orderData);
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // Redirect to success page
            window.location.href = 'order-success.html?orderId=' + orderData.id;
        }

        // Initialize quantity display
        updateQuantity();
    </script>

    <!-- Reviews Section (moved to end) -->
    <div class="reviews-section" style="margin-top: 40px;">
        <div class="reviews-header">
            <h3><i class="fas fa-star"></i> O que nossos clientes estão dizendo</h3>
            <p>Mais de 1.400 clientes satisfeitas com nossos produtos</p>
            
            <!-- Botão para adicionar review -->
            <div style="margin-top: 20px;">
                <button id="addReviewBtn" style="background: #d4af37; color: white; border: none; padding: 12px 24px; border-radius: 25px; font-size: 16px; cursor: pointer; transition: all 0.3s ease;">
                    <i class="fas fa-plus"></i> Adicionar sua Review
                </button>
            </div>
        </div>
        
        <div class="reviews-container">
            <div class="review-item clickable-review" 
                 data-review-id="customer1"
                 data-author="Cliente Satisfeita"
                 data-date="15 dias atrás"
                 data-stars="5">
                <div class="review-image">
                    <div class="review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"Produto excelente! Superou minhas expectativas. Qualidade incrível e entrega rápida. Recomendo para todos!"</p>
                    <div class="review-author">
                        <strong>Cliente Satisfeita</strong>
                        <span class="review-date">Compra verificada - 15 dias atrás</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-author="Maria Silva"
                 data-date="1 semana atrás"
                 data-stars="5">
                <div class="review-image">
                    <div class="review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"Muito satisfeita com a compra! O produto chegou exatamente como descrito. Atendimento perfeito e qualidade garantida."</p>
                    <div class="review-author">
                        <strong>Maria Silva</strong>
                        <span class="review-date">Compra verificada - 1 semana atrás</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-author="Ana Costa"
                 data-date="3 semanas atrás"
                 data-stars="5">
                <div class="review-image">
                    <div class="review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"Produto de alta qualidade! Entrega super rápida e bem embalado. Já estou pensando em comprar novamente."</p>
                    <div class="review-author">
                        <strong>Ana Costa</strong>
                        <span class="review-date">Compra verificada - 3 semanas atrás</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="reviews-stats">
            <div class="stat-item">
                <div class="stat-number">4.8</div>
                <div class="stat-label">Avaliação Média</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">1,427</div>
                <div class="stat-label">Avaliações</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">98%</div>
                <div class="stat-label">Recomendariam</div>
            </div>
        </div>

        <!-- Seção para Adicionar Review (apenas para usuários logados) -->
        <div class="add-review-section" id="addReviewSection" style="display: none;">
            <!-- Conteúdo será inserido dinamicamente pelo JavaScript -->
        </div>
    </div>

    <!-- Review System Section -->
    <div id="reviewSection">
        <script>
            // Adicionar seção de reviews ao DOM
            document.addEventListener('DOMContentLoaded', function() {
                if (typeof reviewSystem !== 'undefined') {
                    const reviewSection = reviewSystem.createReviewSection('siena-brush', 'Siena Wide Vented Brush');
                    document.body.insertAdjacentHTML('beforeend', reviewSection);
                    reviewSystem.loadExistingReviews();
                }
            });
        </script>
    </div>

    <script>
        // Currency System for Checkout
        let currentCurrency = 'USD';
        let exchangeRates = {
            'USD': { symbol: '$', rate: 1, locale: 'en-US', currency: 'USD' },
            'BRL': { symbol: 'R$', rate: 5.27, locale: 'pt-BR', currency: 'BRL' },
            'EUR': { symbol: '€', rate: 0.92, locale: 'de-DE', currency: 'EUR' },
            'GBP': { symbol: '£', rate: 0.79, locale: 'en-GB', currency: 'GBP' },
            'CAD': { symbol: 'C$', rate: 1.35, locale: 'en-CA', currency: 'CAD' },
            'AUD': { symbol: 'A$', rate: 1.52, locale: 'en-AU', currency: 'AUD' }
        };

        // Toggle flag dropdown
        function toggleFlagDropdown() {
            const dropdown = document.querySelector('.flag-dropdown');
            const menu = document.getElementById('flagDropdownMenu');
            
            dropdown.classList.toggle('open');
            menu.classList.toggle('open');
        }
        
        // Select flag option
        function selectFlagOption(currency, flag) {
            const selectedFlag = document.getElementById('selectedFlag');
            selectedFlag.textContent = flag;
            
            // Close dropdown
            const dropdown = document.querySelector('.flag-dropdown');
            const menu = document.getElementById('flagDropdownMenu');
            dropdown.classList.remove('open');
            menu.classList.remove('open');
            
            // Change currency
            changeMainCurrency(currency);
        }
        
        // Change main currency
        function changeMainCurrency(currencyCode) {
            currentCurrency = currencyCode;
            updateCurrencyDisplay();
            localStorage.setItem('selectedCurrency', currencyCode);
            console.log(`Main currency changed to: ${currencyCode}`);
        }

        // Format price for display
        function formatPrice(price) {
            const currencyInfo = exchangeRates[currentCurrency];
            return new Intl.NumberFormat(currencyInfo.locale, {
                style: 'currency',
                currency: currentCurrency
            }).format(price);
        }

        // Update currency display in checkout
        function updateCurrencyDisplay() {
            // Update offer prices - convert from BRL base price
            document.querySelectorAll('.offer-option .price').forEach(priceElement => {
                const priceText = priceElement.textContent;
                const priceMatch = priceText.match(/R\$ ([0-9,]+)/) || priceText.match(/\$([0-9,]+)/) || priceText.match(/€([0-9,]+)/);
                if (priceMatch) {
                    const originalPrice = parseFloat(priceMatch[1].replace(',', '.'));
                    const currencyInfo = exchangeRates[currentCurrency];
                    const convertedPrice = originalPrice / 5.27 * currencyInfo.rate;
                    priceElement.textContent = formatPrice(convertedPrice);
                }
            });
        }

        // Initialize currency system
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-detect currency from browser
            const browserLang = navigator.language || navigator.languages[0];
            if (browserLang.includes('pt')) {
                currentCurrency = 'BRL';
            } else if (browserLang.includes('de') || browserLang.includes('fr') || browserLang.includes('es')) {
                currentCurrency = 'EUR';
            } else {
                currentCurrency = 'USD';
            }
            
            updateCurrencyDisplay();
            
            // Event listener para o seletor de moeda do resumo
            const summaryCurrencySelector = document.getElementById('summaryCurrencySelector');
            if (summaryCurrencySelector) {
                summaryCurrencySelector.addEventListener('change', function() {
                    const selectedCurrency = this.value;
                    console.log('Summary currency changed to:', selectedCurrency);
                    // Aqui você pode adicionar lógica de conversão se necessário
                });
            }
            
            // Add event listeners for flag selection
            document.querySelectorAll('.flag-option').forEach(flag => {
                flag.addEventListener('click', function() {
                    const currency = this.dataset.currency;
                    const flagEmoji = this.dataset.flag;
                    selectFlagOption(currency, flagEmoji);
                });
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                const dropdown = document.querySelector('.flag-dropdown');
                const menu = document.getElementById('flagDropdownMenu');
                if (dropdown && menu && !dropdown.contains(e.target)) {
                    dropdown.classList.remove('open');
                    menu.classList.remove('open');
                }
            });
        });
    </script>

    <!-- Modal de Login -->
    <div id="loginModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: white; padding: 30px; border-radius: 15px; max-width: 400px; width: 90%; text-align: center;">
            <h3 style="color: #d4af37; margin-bottom: 20px;"><i class="fas fa-user"></i> Faça Login</h3>
            <form id="loginForm">
                <div style="margin-bottom: 15px;">
                    <input type="email" id="loginEmail" placeholder="Seu email" required style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                </div>
                <div style="margin-bottom: 20px;">
                    <input type="password" id="loginPassword" placeholder="Sua senha" required style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                </div>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button type="submit" style="background: #d4af37; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Login</button>
                    <button type="button" id="closeLoginModal" style="background: #666; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Review -->
    <div id="reviewModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; width: 90%; max-height: 90vh; overflow-y: auto;">
            <h3 style="color: #d4af37; margin-bottom: 20px;"><i class="fas fa-star"></i> Adicionar Review</h3>
            <form id="reviewForm">
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Seu Nome:</label>
                    <input type="text" id="reviewerName" required style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Avaliação:</label>
                    <div id="starRating" style="display: flex; gap: 5px; justify-content: center; margin: 10px 0;">
                        <i class="fas fa-star" data-rating="1" style="font-size: 24px; color: #ddd; cursor: pointer; transition: color 0.3s;"></i>
                        <i class="fas fa-star" data-rating="2" style="font-size: 24px; color: #ddd; cursor: pointer; transition: color 0.3s;"></i>
                        <i class="fas fa-star" data-rating="3" style="font-size: 24px; color: #ddd; cursor: pointer; transition: color 0.3s;"></i>
                        <i class="fas fa-star" data-rating="4" style="font-size: 24px; color: #ddd; cursor: pointer; transition: color 0.3s;"></i>
                        <i class="fas fa-star" data-rating="5" style="font-size: 24px; color: #ddd; cursor: pointer; transition: color 0.3s;"></i>
                    </div>
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Sua Review:</label>
                    <textarea id="reviewText" required placeholder="Conte-nos sua experiência com o produto..." style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; min-height: 100px; resize: vertical;"></textarea>
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Foto (opcional):</label>
                    <input type="file" id="reviewImage" accept="image/*" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                    <div id="imagePreview" style="margin-top: 10px; text-align: center;"></div>
                </div>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button type="submit" style="background: #d4af37; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Enviar Review</button>
                    <button type="button" id="closeReviewModal" style="background: #666; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Sistema de Reviews JavaScript -->
    <script>
        // Sistema de Reviews
        let currentUser = null;
        let userReviews = JSON.parse(localStorage.getItem('userReviews')) || [];
        let selectedRating = 0;

        // Verificar se usuário está logado
        function checkLogin() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                return true;
            }
            return false;
        }

        // Mostrar modal de login
        function showLoginModal() {
            document.getElementById('loginModal').style.display = 'flex';
        }

        // Fechar modal de login
        function closeLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
        }

        // Mostrar modal de review
        function showReviewModal() {
            if (!checkLogin()) {
                showLoginModal();
                return;
            }
            document.getElementById('reviewModal').style.display = 'flex';
        }

        // Fechar modal de review
        function closeReviewModal() {
            document.getElementById('reviewModal').style.display = 'none';
            document.getElementById('reviewForm').reset();
            selectedRating = 0;
            updateStarDisplay();
            document.getElementById('imagePreview').innerHTML = '';
        }

        // Atualizar display das estrelas
        function updateStarDisplay() {
            const stars = document.querySelectorAll('#starRating i');
            stars.forEach((star, index) => {
                if (index < selectedRating) {
                    star.style.color = '#d4af37';
                } else {
                    star.style.color = '#ddd';
                }
            });
        }

        // Event listeners para sistema de reviews
        document.addEventListener('DOMContentLoaded', function() {
            // Botão adicionar review
            const addReviewBtn = document.getElementById('addReviewBtn');
            if (addReviewBtn) {
                addReviewBtn.addEventListener('click', showReviewModal);
            }

            // Fechar modais
            document.getElementById('closeLoginModal').addEventListener('click', closeLoginModal);
            document.getElementById('closeReviewModal').addEventListener('click', closeReviewModal);

            // Login form
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                // Simular login (em produção, validar com backend)
                if (email && password) {
                    currentUser = { email: email, name: email.split('@')[0] };
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    closeLoginModal();
                    showReviewModal();
                } else {
                    alert('Por favor, preencha todos os campos');
                }
            });

            // Sistema de estrelas
            const stars = document.querySelectorAll('#starRating i');
            stars.forEach((star, index) => {
                star.addEventListener('click', function() {
                    selectedRating = index + 1;
                    updateStarDisplay();
                });
                star.addEventListener('mouseenter', function() {
                    for (let i = 0; i <= index; i++) {
                        stars[i].style.color = '#d4af37';
                    }
                });
                star.addEventListener('mouseleave', function() {
                    updateStarDisplay();
                });
            });

            // Preview de imagem
            document.getElementById('reviewImage').addEventListener('change', function(e) {
                const file = e.target.files[0];
                const preview = document.getElementById('imagePreview');
                
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        preview.innerHTML = `
                            <img src="${e.target.result}" style="max-width: 200px; max-height: 200px; border-radius: 8px; border: 2px solid #ddd;">
                        `;
                    };
                    reader.readAsDataURL(file);
                } else {
                    preview.innerHTML = '';
                }
            });

            // Formulário de review
            document.getElementById('reviewForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (selectedRating === 0) {
                    alert('Por favor, selecione uma avaliação');
                    return;
                }

                const reviewData = {
                    id: Date.now().toString(),
                    name: document.getElementById('reviewerName').value,
                    rating: selectedRating,
                    text: document.getElementById('reviewText').value,
                    image: null,
                    date: new Date().toLocaleDateString('pt-BR'),
                    verified: true
                };

                // Processar imagem se houver
                const imageFile = document.getElementById('reviewImage').files[0];
                if (imageFile) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        reviewData.image = e.target.result;
                        saveReview(reviewData);
                    };
                    reader.readAsDataURL(imageFile);
                } else {
                    saveReview(reviewData);
                }
            });

            // Carregar reviews existentes
            loadUserReviews();
        });

        // Salvar review
        function saveReview(reviewData) {
            userReviews.push(reviewData);
            localStorage.setItem('userReviews', JSON.stringify(userReviews));
            
            // Adicionar review ao DOM
            addReviewToDOM(reviewData);
            
            closeReviewModal();
            alert('Review adicionada com sucesso!');
        }

        // Adicionar review ao DOM
        function addReviewToDOM(reviewData) {
            const reviewsContainer = document.querySelector('.reviews-container');
            const reviewElement = document.createElement('div');
            reviewElement.className = 'review-item clickable-review';
            reviewElement.setAttribute('data-review-id', reviewData.id);
            reviewElement.setAttribute('data-author', reviewData.name);
            reviewElement.setAttribute('data-date', reviewData.date);
            reviewElement.setAttribute('data-stars', reviewData.rating);
            
            let imageHtml = '';
            if (reviewData.image) {
                imageHtml = `<img src="${reviewData.image}" alt="Review Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">`;
            } else {
                imageHtml = `<div class="review-avatar"><i class="fas fa-user"></i></div>`;
            }

            let starsHtml = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= reviewData.rating) {
                    starsHtml += '<i class="fas fa-star"></i>';
                } else {
                    starsHtml += '<i class="far fa-star"></i>';
                }
            }

            reviewElement.innerHTML = `
                <div class="review-image">
                    ${imageHtml}
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        ${starsHtml}
                    </div>
                    <p class="review-text">"${reviewData.text}"</p>
                    <div class="review-author">
                        <strong>${reviewData.name}</strong>
                        <span class="review-date">Compra verificada - ${reviewData.date}</span>
                    </div>
                </div>
            `;

            // Adicionar event listener para o modal
            reviewElement.addEventListener('click', function() {
                openReviewModal(reviewData.name, reviewData.date, reviewData.rating, reviewData.text);
            });

            reviewsContainer.insertBefore(reviewElement, reviewsContainer.firstChild);
        }

        // Carregar reviews do usuário
        function loadUserReviews() {
            userReviews.forEach(review => {
                addReviewToDOM(review);
            });
        }

        // Função para mostrar modal de review completa
        function openReviewModal(author, date, stars, fullText) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.5); z-index: 1000; 
                display: flex; justify-content: center; align-items: center;
            `;
            
            const starCount = parseFloat(stars);
            let starsHTML = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= starCount) {
                    starsHTML += '<i class="fas fa-star" style="color: #d4af37;"></i>';
                } else {
                    starsHTML += '<i class="far fa-star" style="color: #ddd;"></i>';
                }
            }
            
            modal.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; width: 90%; text-align: center;">
                    <h3 style="color: #d4af37; margin-bottom: 20px;">Review Completa</h3>
                    <div style="margin-bottom: 15px;">
                        <strong>${author}</strong>
                        <div style="margin: 10px 0;">${starsHTML}</div>
                        <span style="color: #666; font-size: 14px;">Compra verificada - ${date}</span>
                    </div>
                    <p style="text-align: left; line-height: 1.6; margin-bottom: 20px;">"${fullText}"</p>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: #d4af37; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Fechar</button>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
    </script>

</body>
</html>
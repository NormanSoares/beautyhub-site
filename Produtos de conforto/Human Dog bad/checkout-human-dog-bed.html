<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Human Dog Bed | 67 Beauty Hub</title>
    <link rel="stylesheet" href="../../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- PayPal SDK -->
    <!-- Review System -->
    <script src="../../js/review-system.js"></script>
    <script src="https://www.paypal.com/sdk/js?client-id=Ab2ftZVJCplquKwOY1cWgvWMivADwMhbUs-OhehwO4hVh_VW9lS87qLkRUVD39yEeoh7YGXzBeuq1Dlh&currency=USD&intent=capture"></script>
    <!-- AliExpress Integration -->
    <script src="../../js/aliexpress-integration.js"></script>
    <style>
        body {
            background: #f0e6d2;
        }
        
        .checkout-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            margin-top: 50px;
        }
        
        .checkout-layout {
            display: flex;
            flex-direction: column;
            gap: 40px;
        }
        
        .unified-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: start;
        }
        
        .checkout-bottom {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
            align-items: start;
        }
        
        .form-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
        }
        
        .summary-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }
        
        .product-gallery {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .main-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .thumbnail-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        
        .thumbnail {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .thumbnail:hover,
        .thumbnail.active {
            border-color: #d4af37;
            transform: scale(1.05);
        }
        
        .product-info h1 {
            font-size: 2.2rem;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .product-info .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }
        
        .price-section {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
        }
        
        .price-main {
            font-size: 2.5rem;
            font-weight: 700;
            color: #d4af37;
            margin-bottom: 5px;
        }
        
        .price-original {
            font-size: 1.2rem;
            color: #95a5a6;
            text-decoration: line-through;
            margin-bottom: 10px;
        }
        
        .discount-badge {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 15px;
        }
        
        .features-list {
            list-style: none;
            padding: 0;
            margin-bottom: 25px;
        }
        
        .features-list li {
            padding: 8px 0;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .features-list li i {
            color: #d4af37;
            width: 20px;
        }
        
        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .quantity-controls {
            display: flex;
            align-items: center;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .quantity-btn {
            background: #f8f9fa;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 1.2rem;
            color: #2c3e50;
            transition: all 0.3s ease;
        }
        
        .quantity-btn:hover {
            background: #e9ecef;
        }
        
        .quantity-input {
            border: none;
            padding: 10px 15px;
            text-align: center;
            width: 60px;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .add-to-cart-btn {
            background: linear-gradient(135deg, #d4af37, #b8941f);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 15px;
        }
        
        .add-to-cart-btn:hover {
            background: linear-gradient(135deg, #b8941f, #9a7d1a);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }
        
        .buy-now-btn {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .buy-now-btn:hover {
            background: linear-gradient(135deg, #229954, #1e8449);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }
        
        .section-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 600;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #2c3e50;
            font-weight: 500;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .payment-methods {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .payment-method {
            flex: 1;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .payment-method:hover,
        .payment-method.selected {
            border-color: #d4af37;
            background: rgba(212, 175, 55, 0.1);
        }
        
        .payment-method i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #d4af37;
        }
        
        .order-summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .order-item:last-child {
            border-bottom: none;
        }
        
        .order-total {
            background: #d4af37;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .shipping-info {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #27ae60;
        }
        
        .shipping-info h4 {
            color: #27ae60;
            margin-bottom: 10px;
        }
        
        .shipping-info p {
            color: #2c3e50;
            margin: 5px 0;
        }
        
        .security-badges {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .security-badge {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            color: #27ae60;
            font-size: 0.9rem;
        }
        
        .security-badge i {
            font-size: 1.5rem;
        }
        
        @media (max-width: 768px) {
            .unified-section {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .checkout-bottom {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .thumbnail-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .product-info h1 {
                font-size: 1.8rem;
            }
            
            .price-main {
                font-size: 2rem;
            }
        }
        
        @media (max-width: 768px) {
            .main-image {
                height: 300px;
            }
        }
        
        @media (max-width: 480px) {
            .main-image {
                height: 250px;
            }
        }
        
        /* Flag Dropdown Styles */
        .flag-dropdown-container {
            position: relative;
            display: inline-block;
            margin-left: 20px;
        }
        
        .flag-dropdown {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            background: white;
            border: 2px solid #d4af37;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.1);
        }
        
        .flag-dropdown:hover {
            border-color: #b8941f;
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.2);
        }
        
        .selected-flag {
            font-size: 1.5rem;
            user-select: none;
        }
        
        .dropdown-arrow {
            color: #d4af37;
            font-size: 0.9rem;
            transition: transform 0.3s ease;
        }
        
        .flag-dropdown.open .dropdown-arrow {
            transform: rotate(180deg);
        }
        
        .flag-dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #d4af37;
            border-top: none;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.2);
            z-index: 1000;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .flag-dropdown-menu.open {
            max-height: 400px;
            overflow-y: auto;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* Internet Explorer 10+ */
        }
        
        .flag-dropdown-menu.open::-webkit-scrollbar {
            display: none; /* WebKit browsers (Chrome, Safari, Edge) */
        }
        
        .flag-option {
            padding: 12px 20px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .flag-option:hover {
            background-color: #fff9e6;
            transform: translateX(5px);
        }
        
        .flag-option:active {
            background-color: #f0e6d2;
            transform: translateX(3px);
        }
        
        .flag-option.selected {
            background-color: #d4af37;
            color: white;
            font-weight: 600;
        }
        
        .flag-option:last-child {
            border-radius: 0 0 6px 6px;
        }
        
        @media (max-width: 768px) {
            .flag-dropdown-container {
                margin-top: 20px;
                margin-left: 0;
            }
            
            .flag-dropdown {
                padding: 10px 15px;
            }
            
            .selected-flag {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="logo.png" alt="67 Beauty Hub" height="40">
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">Início</a>
                </li>
                <li class="nav-item">
                    <a href="index.html#beauty-products" class="nav-link">Beleza</a>
                </li>
                <li class="nav-item">
                    <a href="index.html#comfort-products" class="nav-link">Conforto</a>
                </li>
            </ul>
            
            <!-- Flag Dropdown Selector -->
            <div class="flag-dropdown-container">
                <div class="flag-dropdown" onclick="toggleFlagDropdown()">
                    <div class="selected-flag" id="selectedFlag">🇺🇸</div>
                    <i class="fas fa-chevron-down dropdown-arrow"></i>
                </div>
                <div class="flag-dropdown-menu" id="flagDropdownMenu">
                    <div class="flag-option" data-currency="USD" data-flag="🇺🇸" data-country="Estados Unidos">🇺🇸 Estados Unidos</div>
                    <div class="flag-option" data-currency="BRL" data-flag="🇧🇷" data-country="Brasil">🇧🇷 Brasil</div>
                    <div class="flag-option" data-currency="EUR" data-flag="🇪🇺" data-country="Europa">🇪🇺 Europa</div>
                    <div class="flag-option" data-currency="GBP" data-flag="🇬🇧" data-country="Reino Unido">🇬🇧 Reino Unido</div>
                    <div class="flag-option" data-currency="CAD" data-flag="🇨🇦" data-country="Canadá">🇨🇦 Canadá</div>
                    <div class="flag-option" data-currency="AUD" data-flag="🇦🇺" data-country="Austrália">🇦🇺 Austrália</div>
                </div>
            </div>
        </div>
    </nav>

    <div class="checkout-container">
        <div class="checkout-layout">
            <!-- Product Section -->
            <div class="unified-section">
                <!-- Product Gallery -->
                <div class="product-gallery">
                    <img id="mainImage" src="Produtos de conforto/Human Dog bad/Apresentação.png" alt="Human Dog Bed" class="main-image">
                    <div class="thumbnail-grid">
                        <img src="Produtos de conforto/Human Dog bad/Apresentação.png" alt="Human Dog Bed" class="thumbnail active" onclick="changeImage(this)">
                        <img src="Produtos de conforto/Human Dog bad/Screenshot 2025-09-20 113320.png" alt="Human Dog Bed" class="thumbnail" onclick="changeImage(this)">
                        <img src="Produtos de conforto/Human Dog bad/Screenshot 2025-09-20 113401.png" alt="Human Dog Bed" class="thumbnail" onclick="changeImage(this)">
                    </div>
                </div>

                <!-- Product Info -->
                <div class="product-info">
                    <h1>Human Dog Bed</h1>
                    <p class="subtitle">Cama super confortável para humanos e pets</p>
                    
                    <div class="price-section">
                        <div class="price-main">$79.99</div>
                        <div class="price-original">$129.99</div>
                        <div class="discount-badge">38% OFF</div>
                        <p style="color: #7f8c8d; margin: 0;">Frete grátis para todo o Brasil</p>
                    </div>

                    <ul class="features-list">
                        <li><i class="fas fa-check"></i> Design ergonômico e confortável</li>
                        <li><i class="fas fa-check"></i> Material premium e resistente</li>
                        <li><i class="fas fa-check"></i> Ideal para relaxamento e descanso</li>
                        <li><i class="fas fa-check"></i> Fácil de limpar e manter</li>
                        <li><i class="fas fa-check"></i> Suporte para coluna e pescoço</li>
                        <li><i class="fas fa-check"></i> Compatível com humanos e pets</li>
                        <li><i class="fas fa-check"></i> Design moderno e elegante</li>
                    </ul>

                    <div class="quantity-selector">
                        <label>Quantidade:</label>
                        <div class="quantity-controls">
                            <button class="quantity-btn" onclick="decreaseQuantity()">-</button>
                            <input type="number" class="quantity-input" id="quantity" value="1" min="1" max="2">
                            <button class="quantity-btn" onclick="increaseQuantity()">+</button>
                        </div>
                    </div>

                    <button class="buy-now-btn" onclick="buyNow()">
                        <i class="fas fa-bolt"></i> Comprar Agora
                    </button>
                </div>
            </div>

            <!-- Checkout Form -->
            <div class="checkout-bottom">
                <div class="form-section">
                    <h2 class="section-title">Informações de Entrega</h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">Nome *</label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Sobrenome *</label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email">E-mail *</label>
                        <input type="email" id="email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">Telefone *</label>
                        <input type="tel" id="phone" name="phone" required>
                    </div>

                    <div class="form-group">
                        <label for="address">Endereço *</label>
                        <input type="text" id="address" name="address" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="city">Cidade *</label>
                            <input type="text" id="city" name="city" required>
                        </div>
                                <div class="form-group">
                                    <label for="country">País *</label>
                                    <input type="text" id="country" name="country" required placeholder="Selecione ou digite o nome do seu país" list="country-list">
                                    <datalist id="country-list">
                                        <option value="🇧🇷 Brasil">
                                        <option value="🇺🇸 Estados Unidos">
                                        <option value="🇨🇦 Canadá">
                                        <option value="🇲🇽 México">
                                        <option value="🇦🇷 Argentina">
                                        <option value="🇨🇱 Chile">
                                        <option value="🇨🇴 Colômbia">
                                        <option value="🇵🇪 Peru">
                                        <option value="🇺🇾 Uruguai">
                                        <option value="🇵🇹 Portugal">
                                        <option value="🇪🇸 Espanha">
                                        <option value="🇫🇷 França">
                                        <option value="🇩🇪 Alemanha">
                                        <option value="🇮🇹 Itália">
                                        <option value="🇬🇧 Reino Unido">
                                        <option value="🇦🇺 Austrália">
                                        <option value="🇯🇵 Japão">
                                        <option value="🇨🇳 China">
                                        <option value="🇮🇳 Índia">
                                    </datalist>
                                </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="state">Estado *</label>
                            <select id="state" name="state" required>
                                <option value="">Selecione</option>
                                <option value="AC">Acre</option>
                                <option value="AL">Alagoas</option>
                                <option value="AP">Amapá</option>
                                <option value="AM">Amazonas</option>
                                <option value="BA">Bahia</option>
                                <option value="CE">Ceará</option>
                                <option value="DF">Distrito Federal</option>
                                <option value="ES">Espírito Santo</option>
                                <option value="GO">Goiás</option>
                                <option value="MA">Maranhão</option>
                                <option value="MT">Mato Grosso</option>
                                <option value="MS">Mato Grosso do Sul</option>
                                <option value="MG">Minas Gerais</option>
                                <option value="PA">Pará</option>
                                <option value="PB">Paraíba</option>
                                <option value="PR">Paraná</option>
                                <option value="PE">Pernambuco</option>
                                <option value="PI">Piauí</option>
                                <option value="RJ">Rio de Janeiro</option>
                                <option value="RN">Rio Grande do Norte</option>
                                <option value="RS">Rio Grande do Sul</option>
                                <option value="RO">Rondônia</option>
                                <option value="RR">Roraima</option>
                                <option value="SC">Santa Catarina</option>
                                <option value="SP">São Paulo</option>
                                <option value="SE">Sergipe</option>
                                <option value="TO">Tocantins</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="zipCode">CEP *</label>
                        <input type="text" id="zipCode" name="zipCode" required>
                    </div>

                    <h3 class="section-title">Método de Pagamento</h3>
                    
                    <div class="payment-methods">
                        <div class="payment-method" onclick="selectPayment('paypal')">
                            <i class="fab fa-paypal"></i>
                            <div>PayPal</div>
                        </div>
                        <div class="payment-method" onclick="selectPayment('card')">
                            <i class="fas fa-credit-card"></i>
                            <div>Cartão</div>
                        </div>
                    </div>

                    <div id="paypal-payment-button"></div>
                </div>

                <!-- Order Summary -->
                <div class="summary-section">
                    <h3 class="section-title">Resumo do Pedido</h3>
                    
                    <div class="order-summary">
                        <div class="order-item">
                            <span>Human Dog Bed</span>
                            <span id="itemQuantity">1x</span>
                        </div>
                        <div class="order-item">
                            <span>Subtotal</span>
                            <span id="subtotal">$79.99</span>
                        </div>
                        <div class="order-item">
                            <span>Frete</span>
                            <span>Grátis</span>
                        </div>
                        <div class="order-total">
                            Total: <span id="total">$79.99</span>
                        </div>
                    </div>

                    <div class="shipping-info">
                        <h4><i class="fas fa-truck"></i> Informações de Entrega</h4>
                        <p><strong>Prazo:</strong> 15-25 dias úteis</p>
                        <p><strong>Frete:</strong> Grátis para todo o Brasil</p>
                        <p><strong>Rastreamento:</strong> Disponível após envio</p>
                        <p><strong>Garantia:</strong> 30 dias de garantia</p>
                    </div>

                    <div class="security-badges">
                        <div class="security-badge">
                            <i class="fas fa-shield-alt"></i>
                            <span>Compra Segura</span>
                        </div>
                        <div class="security-badge">
                            <i class="fas fa-lock"></i>
                            <span>SSL 256bit</span>
                        </div>
                        <div class="security-badge">
                            <i class="fas fa-undo"></i>
                            <span>Garantia</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedPayment = null;
        let quantity = 1;
        const basePrice = 79.99;

        // Image gallery functionality
        function changeImage(thumbnail) {
            const mainImage = document.getElementById('mainImage');
            mainImage.src = thumbnail.src;
            
            // Update active thumbnail
            document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
            thumbnail.classList.add('active');
        }

        // Quantity controls
        function increaseQuantity() {
            quantity = Math.min(quantity + 1, 2);
            updateQuantity();
        }

        function decreaseQuantity() {
            quantity = Math.max(quantity - 1, 1);
            updateQuantity();
        }

        function updateQuantity() {
            document.getElementById('quantity').value = quantity;
            document.getElementById('itemQuantity').textContent = quantity + 'x';
            
            const subtotal = (basePrice * quantity).toFixed(2);
            document.getElementById('subtotal').textContent = '$' + subtotal;
            document.getElementById('total').textContent = '$' + subtotal;
        }

        // Payment method selection
        function selectPayment(method) {
            selectedPayment = method;
            document.querySelectorAll('.payment-method').forEach(p => p.classList.remove('selected'));
            event.target.closest('.payment-method').classList.add('selected');
            
            if (method === 'paypal') {
                document.getElementById('paypal-payment-button').style.display = 'block';
                renderPayPalButton();
            } else {
                document.getElementById('paypal-payment-button').style.display = 'none';
            }
        }

        // PayPal integration
        function renderPayPalButton() {
            paypal.Buttons({
                createOrder: function(data, actions) {
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: (basePrice * quantity).toFixed(2),
                                currency_code: 'USD'
                            },
                            description: 'Human Dog Bed - ' + quantity + ' unidade(s)'
                        }]
                    });
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        alert('Pagamento aprovado! ID da transação: ' + details.id);
                        processOrder(details.id);
                    });
                },
                onError: function(err) {
                    console.error('Erro no PayPal:', err);
                    alert('Erro no processamento do pagamento. Tente novamente.');
                }
            }).render('#paypal-payment-button');
        }

        // Order functions

        function buyNow() {
            if (!validateForm()) {
                return;
            }
            
            if (!selectedPayment) {
                alert('Por favor, selecione um método de pagamento.');
                return;
            }
            
            if (selectedPayment === 'paypal') {
                document.getElementById('paypal-payment-button').scrollIntoView({ behavior: 'smooth' });
                return;
            }
            
            // For card payment, show a mock success
            processOrder('CARD_' + Date.now());
        }

        function validateForm() {
            const requiredFields = ['firstName', 'lastName', 'email', 'phone', 'address', 'city', 'state', 'zipCode'];
            
            for (let field of requiredFields) {
                const input = document.getElementById(field);
                if (!input.value.trim()) {
                    alert('Por favor, preencha todos os campos obrigatórios.');
                    input.focus();
                    return false;
                }
            }
            
            return true;
        }

        function processOrder(transactionId) {
            const orderData = {
                id: 'ORDER_' + Date.now(),
                transactionId: transactionId,
                product: {
                    name: 'Human Dog Bed',
                    price: basePrice,
                    quantity: quantity
                },
                customer: {
                    firstName: document.getElementById('firstName').value,
                    lastName: document.getElementById('lastName').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    address: document.getElementById('address').value,
                    city: document.getElementById('city').value,
                    state: document.getElementById('state').value,
                    zipCode: document.getElementById('zipCode').value
                },
                paymentMethod: selectedPayment,
                total: (basePrice * quantity).toFixed(2),
                status: 'pending',
                date: new Date().toISOString()
            };
            
            // Save order to localStorage
            let orders = JSON.parse(localStorage.getItem('orders') || '[]');
            orders.push(orderData);
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // Redirect to success page
            window.location.href = 'order-success.html?orderId=' + orderData.id;
        }

        // Initialize quantity display
        updateQuantity();
        
        // Sistema de seleção de países
        function toggleFlagDropdown() {
            const dropdown = document.getElementById('flagDropdownMenu');
            const dropdownButton = document.querySelector('.flag-dropdown');
            
            if (dropdown && dropdownButton) {
                dropdown.classList.toggle('open');
                dropdownButton.classList.toggle('open');
            }
        }

        // Fechar dropdown ao clicar fora
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('flagDropdownMenu');
            const dropdownButton = document.querySelector('.flag-dropdown');
            const dropdownContainer = document.querySelector('.flag-dropdown-container');
            
            if (dropdown && dropdownButton && dropdownContainer) {
                if (!dropdownContainer.contains(event.target)) {
                    dropdown.classList.remove('open');
                    dropdownButton.classList.remove('open');
                }
            }
        });

        // Função para converter preços baseado na moeda
        function convertPrices(currency) {
            const basePrice = 79.99; // Preço base em USD
            let convertedPrice;
            let currencySymbol;
            
            switch(currency) {
                case 'BRL':
                    convertedPrice = (basePrice * 5.2).toFixed(2); // Taxa aproximada USD para BRL
                    currencySymbol = 'R$';
                    break;
                case 'EUR':
                    convertedPrice = (basePrice * 0.92).toFixed(2); // Taxa aproximada USD para EUR
                    currencySymbol = '€';
                    break;
                default: // USD
                    convertedPrice = basePrice.toFixed(2);
                    currencySymbol = '$';
                    break;
            }
            
            // Atualizar preços nos elementos da página
            const priceElements = document.querySelectorAll('.price, .total-price');
            priceElements.forEach(element => {
                if (element.textContent.includes('$')) {
                    element.textContent = element.textContent.replace(/\$[\d,]+\.?\d*/, `${currencySymbol}${convertedPrice}`);
                }
            });
        }

        // Função para atualizar campos Estado e CEP baseado no país
        function updateZipCodeField() {
            const countryInput = document.getElementById('country');
            const stateLabel = document.getElementById('stateLabel');
            const zipCodeLabel = document.getElementById('zipCodeLabel');
            const stateInput = document.getElementById('state');
            const zipCodeInput = document.getElementById('zipCode');
            
            if (!countryInput || !stateLabel || !zipCodeLabel) return;
            
            const country = countryInput.value.toLowerCase();
            
            // Resetar campos
            if (stateInput) stateInput.value = '';
            if (zipCodeInput) zipCodeInput.value = '';
            
            if (country.includes('brasil') || country.includes('🇧🇷')) {
                stateLabel.textContent = 'Estado *';
                if (stateInput) stateInput.placeholder = 'Digite seu estado';
                zipCodeLabel.textContent = 'CEP *';
                if (zipCodeInput) zipCodeInput.placeholder = 'Digite seu CEP';
            } else if (country.includes('estados unidos') || country.includes('🇺🇸') || 
                      country.includes('canadá') || country.includes('🇨🇦')) {
                stateLabel.textContent = 'Estado *';
                if (stateInput) stateInput.placeholder = 'Digite seu estado';
                zipCodeLabel.textContent = 'ZIP Code *';
                if (zipCodeInput) zipCodeInput.placeholder = 'Digite seu ZIP Code';
            } else if (country.includes('portugal') || country.includes('🇵🇹')) {
                stateLabel.textContent = 'Distrito *';
                if (stateInput) stateInput.placeholder = 'Digite seu distrito';
                zipCodeLabel.textContent = 'Código Postal *';
                if (zipCodeInput) zipCodeInput.placeholder = 'Digite seu código postal';
            } else {
                stateLabel.textContent = 'Estado/Província *';
                if (stateInput) stateInput.placeholder = 'Digite seu estado/província';
                zipCodeLabel.textContent = 'CEP/ZIP Code *';
                if (zipCodeInput) zipCodeInput.placeholder = 'Digite seu CEP/ZIP Code';
            }
        }

        // Event listener para CEP (formatação brasileira)
        document.addEventListener('DOMContentLoaded', function() {
            const zipCodeInput = document.getElementById('zipCode');
            if (zipCodeInput) {
                zipCodeInput.addEventListener('input', function(e) {
                    const countryInput = document.getElementById('country');
                    const country = countryInput ? countryInput.value.toLowerCase() : '';
                    
                    let value = e.target.value.replace(/\D/g, '');
                    
                    // Formatação brasileira
                    if (country.includes('brasil') || country.includes('🇧🇷')) {
                        value = value.replace(/(\d{5})(\d)/, '$1-$2');
                    }
                    // Formatação americana/canadense
                    else if (country.includes('estados unidos') || country.includes('🇺🇸') || 
                             country.includes('canadá') || country.includes('🇨🇦')) {
                        value = value.replace(/(\d{5})(\d{4})/, '$1-$2');
                    }
                    
                    e.target.value = value;
                });
            }

            // Event listeners para o campo país
            const countryInput = document.getElementById('country');
            if (countryInput) {
                countryInput.addEventListener('input', updateZipCodeField);
                countryInput.addEventListener('change', updateZipCodeField);
            }

            // Sistema de dropdown de bandeiras
            const flagOptions = document.querySelectorAll('.flag-option');
            const selectedFlag = document.getElementById('selectedFlag');
            
            // Definir Estados Unidos como padrão selecionado
            const defaultOption = document.querySelector('.flag-option[data-country="Estados Unidos"]');
            if (defaultOption) {
                defaultOption.classList.add('selected');
            }
            
            flagOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const flag = this.getAttribute('data-flag');
                    const country = this.getAttribute('data-country');
                    const currency = this.getAttribute('data-currency');
                    
                    // Remover seleção anterior
                    flagOptions.forEach(opt => opt.classList.remove('selected'));
                    
                    // Adicionar seleção atual
                    this.classList.add('selected');
                    
                    // Atualizar bandeira selecionada
                    if (selectedFlag) {
                        selectedFlag.textContent = flag;
                    }
                    
                    // Atualizar campo país no formulário
                    if (countryInput) {
                        countryInput.value = country;
                        // Disparar evento para atualizar CEP
                        countryInput.dispatchEvent(new Event('input'));
                    }
                    
                    // Converter preços baseado na moeda selecionada
                    convertPrices(currency);
                    
                    // Fechar dropdown
                    const dropdown = document.getElementById('flagDropdownMenu');
                    const dropdownButton = document.querySelector('.flag-dropdown');
                    if (dropdown && dropdownButton) {
                        dropdown.classList.remove('open');
                        dropdownButton.classList.remove('open');
                    }
                    
                    console.log('País selecionado:', country, 'Moeda:', currency);
                });
            });
        });
    </script>

    <!-- Reviews Section (moved to end) -->
    <div class="reviews-section" style="margin-top: 40px;">
        <div class="reviews-header">
            <h3><i class="fas fa-star"></i> O que nossos clientes estão dizendo</h3>
            <p>Mais de 1.400 clientes satisfeitas com nossos produtos</p>
        </div>
        
        <div class="reviews-container">
            <div class="review-item clickable-review" 
                 data-review-id="customer1"
                 data-author="Cliente Satisfeita"
                 data-date="15 dias atrás"
                 data-stars="5">
                <div class="review-image">
                    <div class="review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"Produto excelente! Superou minhas expectativas. Qualidade incrível e entrega rápida. Recomendo para todos!"</p>
                    <div class="review-author">
                        <strong>Cliente Satisfeita</strong>
                        <span class="review-date">Compra verificada - 15 dias atrás</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-author="Maria Silva"
                 data-date="1 semana atrás"
                 data-stars="5">
                <div class="review-image">
                    <div class="review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"Muito satisfeita com a compra! O produto chegou exatamente como descrito. Atendimento perfeito e qualidade garantida."</p>
                    <div class="review-author">
                        <strong>Maria Silva</strong>
                        <span class="review-date">Compra verificada - 1 semana atrás</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-author="Ana Costa"
                 data-date="3 semanas atrás"
                 data-stars="5">
                <div class="review-image">
                    <div class="review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"Produto de alta qualidade! Entrega super rápida e bem embalado. Já estou pensando em comprar novamente."</p>
                    <div class="review-author">
                        <strong>Ana Costa</strong>
                        <span class="review-date">Compra verificada - 3 semanas atrás</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="reviews-stats">
            <div class="stat-item">
                <div class="stat-number">4.8</div>
                <div class="stat-label">Avaliação Média</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">1,427</div>
                <div class="stat-label">Avaliações</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">98%</div>
                <div class="stat-label">Recomendariam</div>
            </div>
        </div>

        <!-- Seção para Adicionar Review (apenas para usuários logados) -->
        <div class="add-review-section" id="addReviewSection" style="display: none;">
            <!-- Conteúdo será inserido dinamicamente pelo JavaScript -->
        </div>
    </div>

    <!-- Review System Section -->
    <div id="reviewSection">
        <script>
            // Adicionar seção de reviews ao DOM
            document.addEventListener('DOMContentLoaded', function() {
                if (typeof reviewSystem !== 'undefined') {
                    const reviewSection = reviewSystem.createReviewSection('human-dog-bed', 'Human Dog Bed');
                    document.body.insertAdjacentHTML('beforeend', reviewSection);
                    reviewSystem.loadExistingReviews();
                }
            });
        </script>
    </div>
</body>
</html>

                        <li><i class="fas fa-check"></i> Material premium e resistente</li>

                        <li><i class="fas fa-check"></i> Ideal para relaxamento e descanso</li>

                        <li><i class="fas fa-check"></i> Fácil de limpar e manter</li>

                        <li><i class="fas fa-check"></i> Suporte para coluna e pescoço</li>

                        <li><i class="fas fa-check"></i> Compatível com humanos e pets</li>

                        <li><i class="fas fa-check"></i> Design moderno e elegante</li>

                    </ul>



                    <div class="quantity-selector">

                        <label>Quantidade:</label>

                        <div class="quantity-controls">

                            <button class="quantity-btn" onclick="decreaseQuantity()">-</button>

                            <input type="number" class="quantity-input" id="quantity" value="1" min="1" max="2">

                            <button class="quantity-btn" onclick="increaseQuantity()">+</button>

                        </div>

                    </div>




                    <button class="buy-now-btn" onclick="buyNow()">

                        <i class="fas fa-bolt"></i> Comprar Agora

                    </button>

                </div>

            </div>



            <!-- Checkout Form -->

            <div class="checkout-bottom">

                <div class="form-section">

                    <h2 class="section-title">Informações de Entrega</h2>

                    

                    <div class="form-row">

                        <div class="form-group">

                            <label for="firstName">Nome *</label>

                            <input type="text" id="firstName" name="firstName" required>

                        </div>

                        <div class="form-group">

                            <label for="lastName">Sobrenome *</label>

                            <input type="text" id="lastName" name="lastName" required>

                        </div>

                    </div>



                    <div class="form-group">

                        <label for="email">E-mail *</label>

                        <input type="email" id="email" name="email" required>

                    </div>



                    <div class="form-group">

                        <label for="phone">Telefone *</label>

                        <input type="tel" id="phone" name="phone" required>

                    </div>



                    <div class="form-group">

                        <label for="address">Endereço *</label>

                        <input type="text" id="address" name="address" required>

                    </div>



                    <div class="form-row">

                        <div class="form-group">

                            <label for="city">Cidade *</label>

                            <input type="text" id="city" name="city" required>

                        </div>

                        <div class="form-group">

                            <label for="state">Estado *</label>

                            <select id="state" name="state" required>

                                <option value="">Selecione</option>

                                <option value="AC">Acre</option>

                                <option value="AL">Alagoas</option>

                                <option value="AP">Amapá</option>

                                <option value="AM">Amazonas</option>

                                <option value="BA">Bahia</option>

                                <option value="CE">Ceará</option>

                                <option value="DF">Distrito Federal</option>

                                <option value="ES">Espírito Santo</option>

                                <option value="GO">Goiás</option>

                                <option value="MA">Maranhão</option>

                                <option value="MT">Mato Grosso</option>

                                <option value="MS">Mato Grosso do Sul</option>

                                <option value="MG">Minas Gerais</option>

                                <option value="PA">Pará</option>

                                <option value="PB">Paraíba</option>

                                <option value="PR">Paraná</option>

                                <option value="PE">Pernambuco</option>

                                <option value="PI">Piauí</option>

                                <option value="RJ">Rio de Janeiro</option>

                                <option value="RN">Rio Grande do Norte</option>

                                <option value="RS">Rio Grande do Sul</option>

                                <option value="RO">Rondônia</option>

                                <option value="RR">Roraima</option>

                                <option value="SC">Santa Catarina</option>

                                <option value="SP">São Paulo</option>

                                <option value="SE">Sergipe</option>

                                <option value="TO">Tocantins</option>

                            </select>

                        </div>

                    </div>



                    <div class="form-group">

                        <label for="zipCode">CEP *</label>

                        <input type="text" id="zipCode" name="zipCode" required>

                    </div>



                    <h3 class="section-title">Método de Pagamento</h3>

                    

                    <div class="payment-methods">

                        <div class="payment-method" onclick="selectPayment('paypal')">

                            <i class="fab fa-paypal"></i>

                            <div>PayPal</div>

                        </div>

                        <div class="payment-method" onclick="selectPayment('card')">

                            <i class="fas fa-credit-card"></i>

                            <div>Cartão</div>

                        </div>

                    </div>



                    <div id="paypal-payment-button"></div>

                </div>



                <!-- Order Summary -->

                <div class="summary-section">

                    <h3 class="section-title">Resumo do Pedido</h3>

                    

                    <div class="order-summary">

                        <div class="order-item">

                            <span>Human Dog Bed</span>

                            <span id="itemQuantity">1x</span>

                        </div>

                        <div class="order-item">

                            <span>Subtotal</span>

                            <span id="subtotal">$79.99</span>

                        </div>

                        <div class="order-item">

                            <span>Frete</span>

                            <span>Grátis</span>

                        </div>

                        <div class="order-total">

                            Total: <span id="total">$79.99</span>

                        </div>

                    </div>



                    <div class="shipping-info">

                        <h4><i class="fas fa-truck"></i> Informações de Entrega</h4>

                        <p><strong>Prazo:</strong> 15-25 dias úteis</p>

                        <p><strong>Frete:</strong> Grátis para todo o Brasil</p>

                        <p><strong>Rastreamento:</strong> Disponível após envio</p>

                        <p><strong>Garantia:</strong> 30 dias de garantia</p>

                    </div>



                    <div class="security-badges">

                        <div class="security-badge">

                            <i class="fas fa-shield-alt"></i>

                            <span>Compra Segura</span>

                        </div>

                        <div class="security-badge">

                            <i class="fas fa-lock"></i>

                            <span>SSL 256bit</span>

                        </div>

                        <div class="security-badge">

                            <i class="fas fa-undo"></i>

                            <span>Garantia</span>

                        </div>

                    </div>

                </div>

            </div>

        </div>

    </div>



    <script>

        let selectedPayment = null;

        let quantity = 1;

        const basePrice = 79.99;



        // Image gallery functionality

        function changeImage(thumbnail) {

            const mainImage = document.getElementById('mainImage');

            mainImage.src = thumbnail.src;

            

            // Update active thumbnail

            document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));

            thumbnail.classList.add('active');

        }



        // Quantity controls

        function increaseQuantity() {

            quantity = Math.min(quantity + 1, 2);

            updateQuantity();

        }



        function decreaseQuantity() {

            quantity = Math.max(quantity - 1, 1);

            updateQuantity();

        }



        function updateQuantity() {

            document.getElementById('quantity').value = quantity;

            document.getElementById('itemQuantity').textContent = quantity + 'x';

            

            const subtotal = (basePrice * quantity).toFixed(2);

            document.getElementById('subtotal').textContent = '$' + subtotal;

            document.getElementById('total').textContent = '$' + subtotal;

        }



        // Payment method selection

        function selectPayment(method) {

            selectedPayment = method;

            document.querySelectorAll('.payment-method').forEach(p => p.classList.remove('selected'));

            event.target.closest('.payment-method').classList.add('selected');

            

            if (method === 'paypal') {

                document.getElementById('paypal-payment-button').style.display = 'block';

                renderPayPalButton();

            } else {

                document.getElementById('paypal-payment-button').style.display = 'none';

            }

        }



        // PayPal integration

        function renderPayPalButton() {

            paypal.Buttons({

                createOrder: function(data, actions) {

                    return actions.order.create({

                        purchase_units: [{

                            amount: {

                                value: (basePrice * quantity).toFixed(2),

                                currency_code: 'USD'

                            },

                            description: 'Human Dog Bed - ' + quantity + ' unidade(s)'

                        }]

                    });

                },

                onApprove: function(data, actions) {

                    return actions.order.capture().then(function(details) {

                        alert('Pagamento aprovado! ID da transação: ' + details.id);

                        processOrder(details.id);

                    });

                },

                onError: function(err) {

                    console.error('Erro no PayPal:', err);

                    alert('Erro no processamento do pagamento. Tente novamente.');

                }

            }).render('#paypal-payment-button');

        }



        // Cart and order functions

        function addToCart() {

            const product = {

                id: 'human-dog-bed',

                name: 'Human Dog Bed',

                price: basePrice,

                quantity: quantity,

                image: 'Produtos de conforto/Human Dog bad/Apresentação.png'

            };

            

            let cart = JSON.parse(localStorage.getItem('cart') || '[]');

            const existingItem = cart.find(item => item.id === product.id);

            

            if (existingItem) {

                existingItem.quantity += quantity;

            } else {

                cart.push(product);

            }

            

            localStorage.setItem('cart', JSON.stringify(cart));

            alert('Produto adicionado ao carrinho!');

        }



        function buyNow() {

            if (!validateForm()) {

                return;

            }

            

            if (!selectedPayment) {

                alert('Por favor, selecione um método de pagamento.');

                return;

            }

            

            if (selectedPayment === 'paypal') {

                document.getElementById('paypal-payment-button').scrollIntoView({ behavior: 'smooth' });

                return;

            }

            

            // For card payment, show a mock success

            processOrder('CARD_' + Date.now());

        }



        function validateForm() {

            const requiredFields = ['firstName', 'lastName', 'email', 'phone', 'address', 'city', 'state', 'zipCode'];

            

            for (let field of requiredFields) {

                const input = document.getElementById(field);

                if (!input.value.trim()) {

                    alert('Por favor, preencha todos os campos obrigatórios.');

                    input.focus();

                    return false;

                }

            }

            

            return true;

        }



        function processOrder(transactionId) {

            const orderData = {

                id: 'ORDER_' + Date.now(),

                transactionId: transactionId,

                product: {

                    name: 'Human Dog Bed',

                    price: basePrice,

                    quantity: quantity

                },

                customer: {

                    firstName: document.getElementById('firstName').value,

                    lastName: document.getElementById('lastName').value,

                    email: document.getElementById('email').value,

                    phone: document.getElementById('phone').value,

                    address: document.getElementById('address').value,

                    city: document.getElementById('city').value,

                    state: document.getElementById('state').value,

                    zipCode: document.getElementById('zipCode').value

                },

                paymentMethod: selectedPayment,

                total: (basePrice * quantity).toFixed(2),

                status: 'pending',

                date: new Date().toISOString()

            };

            

            // Save order to localStorage

            let orders = JSON.parse(localStorage.getItem('orders') || '[]');

            orders.push(orderData);

            localStorage.setItem('orders', JSON.stringify(orders));

            

            // Redirect to success page

            window.location.href = 'order-success.html?orderId=' + orderData.id;

        }



        // Initialize quantity display

        updateQuantity();

    </script>



    <!-- Reviews Section (moved to end) -->

    <div class="reviews-section" style="margin-top: 40px;">

        <div class="reviews-header">

            <h3><i class="fas fa-star"></i> O que nossos clientes estão dizendo</h3>

            <p>Mais de 1.400 clientes satisfeitas com nossos produtos</p>

        </div>

        

        <div class="reviews-container">

            <div class="review-item clickable-review" 

                 data-review-id="customer1"

                 data-author="Cliente Satisfeita"

                 data-date="15 dias atrás"

                 data-stars="5">

                <div class="review-image">

                    <div class="review-avatar">

                        <i class="fas fa-user"></i>

                    </div>

                </div>

                <div class="review-content">

                    <div class="review-stars">

                        <i class="fas fa-star"></i>

                        <i class="fas fa-star"></i>

                        <i class="fas fa-star"></i>

                        <i class="fas fa-star"></i>

                        <i class="fas fa-star"></i>

                    </div>

                    <p class="review-text">"Produto excelente! Superou minhas expectativas. Qualidade incrível e entrega rápida. Recomendo para todos!"</p>

                    <div class="review-author">

                        <strong>Cliente Satisfeita</strong>

                        <span class="review-date">Compra verificada - 15 dias atrás</span>

                    </div>

                </div>

            </div>



            <div class="review-item clickable-review" 

                 data-author="Maria Silva"

                 data-date="1 semana atrás"

                 data-stars="5">

                <div class="review-image">

                    <div class="review-avatar">

                        <i class="fas fa-user"></i>

                    </div>

                </div>

                <div class="review-content">

                    <div class="review-stars">

                        <i class="fas fa-star"></i>

                        <i class="fas fa-star"></i>

                        <i class="fas fa-star"></i>

                        <i class="fas fa-star"></i>

                        <i class="fas fa-star"></i>

                    </div>

                    <p class="review-text">"Muito satisfeita com a compra! O produto chegou exatamente como descrito. Atendimento perfeito e qualidade garantida."</p>

                    <div class="review-author">

                        <strong>Maria Silva</strong>

                        <span class="review-date">Compra verificada - 1 semana atrás</span>

                    </div>

                </div>

            </div>



            <div class="review-item clickable-review" 

                 data-author="Ana Costa"

                 data-date="3 semanas atrás"

                 data-stars="5">

                <div class="review-image">

                    <div class="review-avatar">

                        <i class="fas fa-user"></i>

                    </div>

                </div>

                <div class="review-content">

                    <div class="review-stars">

                        <i class="fas fa-star"></i>

                        <i class="fas fa-star"></i>

                        <i class="fas fa-star"></i>

                        <i class="fas fa-star"></i>

                        <i class="fas fa-star"></i>

                    </div>

                    <p class="review-text">"Produto de alta qualidade! Entrega super rápida e bem embalado. Já estou pensando em comprar novamente."</p>

                    <div class="review-author">

                        <strong>Ana Costa</strong>

                        <span class="review-date">Compra verificada - 3 semanas atrás</span>

                    </div>

                </div>

            </div>

        </div>



        <!-- Statistics -->

        <div class="reviews-stats">

            <div class="stat-item">

                <div class="stat-number">4.8</div>

                <div class="stat-label">Avaliação Média</div>

            </div>

            <div class="stat-item">

                <div class="stat-number">1,427</div>

                <div class="stat-label">Avaliações</div>

            </div>

            <div class="stat-item">

                <div class="stat-number">98%</div>

                <div class="stat-label">Recomendariam</div>

            </div>

        </div>



        <!-- Seção para Adicionar Review (apenas para usuários logados) -->

        <div class="add-review-section" id="addReviewSection" style="display: none;">

            <!-- Conteúdo será inserido dinamicamente pelo JavaScript -->

        </div>

    </div>



    <!-- Review System Section -->

    <div id="reviewSection">

        <script>

            // Adicionar seção de reviews ao DOM

            document.addEventListener('DOMContentLoaded', function() {

                if (typeof reviewSystem !== 'undefined') {

                    const reviewSection = reviewSystem.createReviewSection('human-dog-bed', 'Human Dog Bed');

                    document.body.insertAdjacentHTML('beforeend', reviewSection);

                    reviewSystem.loadExistingReviews();

                }

            });

        </script>

        // Currency Detection and Conversion System
        class CurrencyConverter {
            constructor() {
                this.baseCurrency = 'USD';
                this.exchangeRates = {
                    'USD': 1.00,
                    'BRL': 5.20,  // Brazilian Real
                    'EUR': 0.85   // Euro
                };
                
                this.currencySymbols = {
                    'USD': '$',
                    'BRL': 'R$',
                    'EUR': '€'
                };
                
                // Product names translations
                this.productNames = {
                    'human-dog-bed': {
                        'USD': 'Human Dog Bed',
                        'BRL': 'Cama Humana Gigante',
                        'EUR': 'Human Dog Bed'
                    }
                };
                
                // Product descriptions translations
                this.productDescriptions = {
                    'human-dog-bed': {
                        'USD': 'Giant and cozy bed, designed for adults to relax with comfort. Soft and spacious.',
                        'BRL': 'Cama gigante e aconchegante, projetada para adultos relaxarem com conforto. Macia e espaçosa.',
                        'EUR': 'Giant and cozy bed, designed for adults to relax with comfort. Soft and spacious.'
                    }
                };
                
                // Page content translations
                this.pageContent = {
                    'product_title': {
                        'USD': 'Human Dog Bed',
                        'BRL': 'Cama Humana Gigante',
                        'EUR': 'Human Dog Bed'
                    },
                    'product_description': {
                        'USD': 'Giant and cozy bed, designed for adults to relax with comfort. Soft and spacious.',
                        'BRL': 'Cama gigante e aconchegante, projetada para adultos relaxarem com conforto. Macia e espaçosa.',
                        'EUR': 'Giant and cozy bed, designed for adults to relax with comfort. Soft and spacious.'
                    },
                    'checkout_title': {
                        'USD': 'Checkout - Human Dog Bed',
                        'BRL': 'Finalizar Compra - Cama Humana Gigante',
                        'EUR': 'Checkout - Human Dog Bed'
                    }
                };
                
                this.userCountry = null;
                this.userCurrency = 'USD';
                this.isInitialized = false;
                this.init();
            }
            
            async init() {
                try {
                    await this.detectUserLocation();
                    this.updateAllPrices();
                    this.updatePageContent();
                    this.isInitialized = true;
                    console.log(`Currency converter initialized successfully. Currency: ${this.userCurrency}`);
                } catch (error) {
                    console.error('Error initializing currency converter:', error);
                    this.userCurrency = 'USD';
                    this.updateAllPrices();
                    this.updatePageContent();
                }
            }
            
            async detectUserLocation() {
                try {
                    let countryCode = null;
                    
                    // Check if running from file:// protocol
                    if (window.location.protocol === 'file:') {
                        console.log('Running from file:// protocol, using fallback detection');
                        // Try to detect from browser language
                        const browserLang = navigator.language || navigator.userLanguage;
                        if (browserLang.startsWith('pt')) {
                            countryCode = 'BR';
                            console.log('Detected Portuguese language, assuming Brazil');
                        } else if (browserLang.startsWith('es')) {
                            countryCode = 'ES';
                            console.log('Detected Spanish language, assuming Spain');
                        } else {
                            countryCode = 'US';
                            console.log('Using default US location');
                        }
                    } else {
                        // Try ipapi.co first
                        try {
                            const response = await fetch('https://ipapi.co/json/', {
                                timeout: 5000,
                                mode: 'cors'
                            });
                            if (response.ok) {
                                const data = await response.json();
                                countryCode = data.country_code;
                                console.log('Location detected via ipapi.co:', countryCode);
                            }
                        } catch (e) {
                            console.log('ipapi.co failed, trying alternative...');
                        }
                        
                        // Fallback to ipinfo.io if ipapi.co fails
                        if (!countryCode) {
                            try {
                                const response = await fetch('https://ipinfo.io/json', {
                                    timeout: 5000,
                                    mode: 'cors'
                                });
                                if (response.ok) {
                                    const data = await response.json();
                                    countryCode = data.country;
                                    console.log('Location detected via ipinfo.io:', countryCode);
                                }
                            } catch (e) {
                                console.log('ipinfo.io also failed');
                            }
                        }
                    }
                    
                    this.userCountry = countryCode;
                    
                    // Map countries to supported currencies based on user origin
                    const countryToCurrency = {
                        // Real Brasileiro (BRL) - Brasil
                        'BR': 'BRL',
                        
                        // Dólar Americano (USD) - América do Norte e outros países
                        'US': 'USD', 'CA': 'USD', 'MX': 'USD', 'AR': 'USD', 'CL': 'USD', 'CO': 'USD', 'PE': 'USD', 'UY': 'USD', 'BO': 'USD', 'PY': 'USD', 'VE': 'USD', 'EC': 'USD', 'GY': 'USD', 'SR': 'USD', 'GF': 'USD', 'FK': 'USD', 'BZ': 'USD', 'GT': 'USD', 'HN': 'USD', 'SV': 'USD', 'NI': 'USD', 'CR': 'USD', 'PA': 'USD', 'CU': 'USD', 'JM': 'USD', 'HT': 'USD', 'DO': 'USD', 'PR': 'USD', 'VI': 'USD', 'AG': 'USD', 'BB': 'USD', 'DM': 'USD', 'GD': 'USD', 'KN': 'USD', 'LC': 'USD', 'VC': 'USD', 'TT': 'USD', 'BS': 'USD', 'AU': 'USD', 'NZ': 'USD', 'JP': 'USD', 'KR': 'USD', 'SG': 'USD', 'HK': 'USD', 'TW': 'USD', 'TH': 'USD', 'MY': 'USD', 'ID': 'USD', 'PH': 'USD', 'VN': 'USD', 'IN': 'USD', 'PK': 'USD', 'BD': 'USD', 'LK': 'USD', 'MM': 'USD', 'KH': 'USD', 'LA': 'USD', 'BN': 'USD', 'FJ': 'USD', 'PG': 'USD', 'SB': 'USD', 'VU': 'USD', 'NC': 'USD', 'PF': 'USD', 'WS': 'USD', 'TO': 'USD', 'KI': 'USD', 'TV': 'USD', 'NR': 'USD', 'MH': 'USD', 'FM': 'USD', 'PW': 'USD', 'AS': 'USD', 'GU': 'USD', 'MP': 'USD', 'CK': 'USD', 'NU': 'USD', 'TK': 'USD', 'WF': 'USD', 'NF': 'USD', 'PN': 'USD', 'GS': 'USD', 'SH': 'USD', 'AC': 'USD', 'TA': 'USD', 'IO': 'USD', 'CX': 'USD', 'CC': 'USD', 'HM': 'USD', 'AQ': 'USD', 'BV': 'USD', 'TF': 'USD', 'UM': 'USD',
                        
                        // Euro (EUR) - Países da Zona do Euro
                        'DE': 'EUR', 'FR': 'EUR', 'IT': 'EUR', 'ES': 'EUR', 'NL': 'EUR', 'BE': 'EUR', 'AT': 'EUR', 'PT': 'EUR', 'IE': 'EUR', 'FI': 'EUR', 'GR': 'EUR', 'LU': 'EUR', 'MT': 'EUR', 'CY': 'EUR', 'SK': 'EUR', 'SI': 'EUR', 'EE': 'EUR', 'LV': 'EUR', 'LT': 'EUR', 'AD': 'EUR', 'MC': 'EUR', 'SM': 'EUR', 'VA': 'EUR', 'ME': 'EUR', 'XK': 'EUR'
                    };
                    
                    this.userCurrency = countryToCurrency[this.userCountry] || 'USD';
                    
                    console.log(`Final detection - Country: ${this.userCountry}, Currency: ${this.userCurrency}`);
                    
                } catch (error) {
                    console.error('Error in location detection:', error);
                    this.userCurrency = 'USD';
                    this.userCountry = 'Unknown';
                }
            }
            
            convertPrice(usdPrice) {
                const rate = this.exchangeRates[this.userCurrency];
                const convertedPrice = usdPrice * rate;
                return this.formatPrice(convertedPrice);
            }
            
            translateProductName(productKey) {
                return this.productNames[productKey] ? 
                    this.productNames[productKey][this.userCurrency] || 
                    this.productNames[productKey]['USD'] : 
                    productKey;
            }
            
            translateProductDescription(productKey) {
                return this.productDescriptions[productKey] ? 
                    this.productDescriptions[productKey][this.userCurrency] || 
                    this.productDescriptions[productKey]['USD'] : 
                    '';
            }
            
            translatePageContent(contentKey) {
                return this.pageContent[contentKey] ? 
                    this.pageContent[contentKey][this.userCurrency] || 
                    this.pageContent[contentKey]['USD'] : 
                    contentKey;
            }
            
            formatPrice(price) {
                const symbol = this.currencySymbols[this.userCurrency];
                
                if (this.userCurrency === 'BRL') {
                    return `${symbol} ${price.toFixed(2).replace('.', ',')}`;
                } else {
                    return `${symbol}${price.toFixed(2)}`;
                }
            }
            
            updateAllPrices() {
                try {
                    // Product prices in USD
                    const productPrices = {
                        'human-dog-bed': { current: 57.69, original: 115.38 }
                    };
                    
                    // Wait for DOM to be ready
                    const updatePrices = () => {
                        // Update product title
                        const productTitle = document.querySelector('h1');
                        if (productTitle) {
                            productTitle.textContent = this.translatePageContent('product_title');
                        }
                        
                        // Update page title
                        document.title = this.translatePageContent('checkout_title');
                        
                        // Update product description
                        const productDescription = document.querySelector('.product-description');
                        if (productDescription) {
                            productDescription.textContent = this.translateProductDescription('human-dog-bed');
                        }
                        
                        // Update prices
                        const priceElements = document.querySelectorAll('.price-current, .price-original');
                        priceElements.forEach(element => {
                            if (element.classList.contains('price-current')) {
                                element.textContent = this.convertPrice(productPrices['human-dog-bed'].current);
                            } else if (element.classList.contains('price-original')) {
                                element.textContent = this.convertPrice(productPrices['human-dog-bed'].original);
                            }
                        });
                        
                        console.log(`Updated human dog bed: ${this.translateProductName('human-dog-bed')} - ${this.convertPrice(productPrices['human-dog-bed'].current)}`);
                    };
                    
                    // Try to update immediately
                    updatePrices();
                    
                    // If no elements found, wait a bit and try again
                    setTimeout(updatePrices, 100);
                    
                } catch (error) {
                    console.error('Error updating prices:', error);
                }
            }
            
            updatePageContent() {
                try {
                    // Update page title
                    document.title = this.translatePageContent('checkout_title');
                    
                    // Update product title
                    const productTitle = document.querySelector('h1');
                    if (productTitle) {
                        productTitle.textContent = this.translatePageContent('product_title');
                    }
                    
                    // Update product description
                    const productDescription = document.querySelector('.product-description');
                    if (productDescription) {
                        productDescription.textContent = this.translateProductDescription('human-dog-bed');
                    }
                    
                    console.log('Page content updated successfully');
                    
                } catch (error) {
                    console.error('Error updating page content:', error);
                }
            }
        }
        
        // Initialize currency converter when page loads
        document.addEventListener('DOMContentLoaded', function() {
            const converter = new CurrencyConverter();
            
            // Add test function to window for debugging
            window.testCurrencyConverter = function() {
                console.log('=== Currency Converter Test ===');
                console.log('User Country:', converter.userCountry);
                console.log('User Currency:', converter.userCurrency);
                console.log('Exchange Rates:', converter.exchangeRates);
                console.log('Currency Symbols:', converter.currencySymbols);
                
                // Test price conversion
                const testPrice = 57.69;
                console.log(`Test price conversion for $${testPrice}:`);
                console.log(`USD: ${converter.convertPrice(testPrice)}`);
                
                // Test with different currencies
                const originalCurrency = converter.userCurrency;
                converter.userCurrency = 'BRL';
                console.log(`BRL: ${converter.convertPrice(testPrice)}`);
                converter.userCurrency = 'EUR';
                console.log(`EUR: ${converter.convertPrice(testPrice)}`);
                converter.userCurrency = originalCurrency;
                
                console.log('=== End Test ===');
            };
            
            // Auto-test after 2 seconds
            setTimeout(() => {
                if (converter.isInitialized) {
                    console.log('Currency converter test available. Run window.testCurrencyConverter() to test.');
                }
            }, 2000);
        });

    </div>

</body>

</html>

<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Foundation 2-Pack | 67 Beauty Hub</title>
    <link rel="stylesheet" href="../../styles.css">
    <!-- Scripts do Sistema de Processamento (carregar primeiro) -->
    <script src="../../js/supplier-order-processor.js"></script>
    <script src="../../js/payment-gateway.js"></script>
    <script src="../../js/pix-generator.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- PayPal SDK -->
    <!-- PayPal SDK will be loaded dynamically with correct locale -->
    <!-- AliExpress Integration -->
    <script src="../../js/aliexpress-integration.js"></script>
    <!-- Review System -->
    <script src="../../js/review-system.js"></script>
    <!-- Product Variation Mapping System -->
    <script src="../../js/product-variation-mapping.js"></script>
    <!-- Price Cache System -->
    <script src="../../js/price-cache.js"></script>
    <!-- Active Prices Sync System -->
    <script src="../../js/active-prices-sync.js"></script>
    <!-- Language Controller System -->
    <script src="../../js/language-controller.js"></script>
    <script src="../../js/pix-generator.js"></script>
    <style>
        body {
            background: #f0e6d2;
        }
        
        .checkout-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
            margin-top: 50px;
        }
        
        .checkout-layout {
            display: flex;
            flex-direction: column;
            gap: 40px;
        }
        
        .unified-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            gap: 40px;
            align-items: start;
        }
        
        .checkout-bottom {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
            align-items: start;
        }
        
        .form-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
        }
        
        
        .checkout-header {
            text-align: center;
            margin-bottom: 40px;
            grid-column: 1 / -1;
        }
        
        .checkout-header h1 {
            color: #d4af37;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        /* Flag dropdown styles removed - currency detection is now automatic */
        
        .offer-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 40px;
        }
        
        .product-summary {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .product-image {
            max-width: 70%;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            margin: 0 auto 20px;
            display: block;
        }
        
        .product-details h3 {
            color: #333;
            font-size: 1.8rem;
            margin-bottom: 15px;
        }
        
        .product-details p {
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .offer-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .offer-option {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .offer-option:hover {
            border-color: #d4af37;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.15);
        }
        
        .offer-option.selected {
            border-color: #d4af37;
            background: linear-gradient(135deg, #fff9e6, #fff);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.2);
            transform: translateY(-2px);
        }
        
        .offer-checkbox {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 20px;
            height: 20px;
            accent-color: #d4af37;
            cursor: pointer;
        }
        
        .offer-option.has-checkbox {
            padding-left: 50px;
        }
        
        .offer-option.has-checkbox .option-header {
            margin-left: 10px;
        }
        
        /* Estilo específico para oferta básica sem checkbox */
        .offer-option[data-option="basic"] {
            padding-left: 20px;
        }
        
        .offer-option[data-option="basic"] .option-header {
            margin-left: 0;
        }
        
        .offer-image-container {
            text-align: left;
            margin: 15px 0;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .offer-image {
            max-width: 120px;
            max-height: 120px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            object-fit: contain;
            flex-shrink: 0;
        }
        
        .offer-description-container {
            flex: 1;
        }
        
        
        /* Estilos para as pequenas checkboxes */
        .small-checkboxes-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        
        .small-checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 15px 10px;
            border-radius: 6px;
            transition: background-color 0.2s ease;
            min-width: 120px;
            min-height: 70px;
            flex: 1;
        }
        
        .small-checkbox-item:hover {
            background-color: #e9ecef;
        }
        
        .small-checkbox-label {
            font-size: 11px;
            color: #495057;
            margin: 0;
            line-height: 1.2;
            flex: 1;
            min-width: 0;
            word-wrap: break-word;
            text-align: center;
        }
        
        /* Estilos para as imagens das mini checkboxes */
        .small-checkbox-image {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            overflow: hidden;
            margin-right: 4px;
            flex-shrink: 0;
            border: 2px solid #e9ecef;
            transition: border-color 0.2s ease;
        }
        
        .small-checkbox-item:hover .small-checkbox-image {
            border-color: #d4af37;
        }
        
        .small-checkbox:checked ~ .small-checkbox-image {
            border-color: #d4af37;
            box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
        }
        
        .small-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        .small-checkbox-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px;
            border-radius: 6px;
            transition: all 0.2s ease;
            flex-direction: row;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .small-checkbox-item:hover {
            background-color: #e9ecef;
            border-color: #d4af37;
        }
        
        .small-checkbox-item.selected {
            background-color: #fff9e6;
            border-color: #d4af37;
            box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
        }
        
        .small-checkbox-item.selected .small-checkbox-label {
            color: #d4af37;
            font-weight: 500;
        }
        
        /* Mobile Responsiveness for Color Choices */
        @media (max-width: 768px) {
            .small-checkboxes-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                padding: 15px;
            }
            
            .small-checkbox-item {
                min-width: 120px;
                min-height: 65px;
                padding: 12px 8px;
                gap: 6px;
            }
            
            .small-checkbox-label {
                font-size: 10px;
                line-height: 1.3;
                word-wrap: break-word;
                text-align: center;
            }
            
            .small-checkbox-image {
                width: 30px;
                height: 30px;
            }
        }
        
        @media (max-width: 480px) {
            .small-checkboxes-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 12px;
            }
            
            .small-checkbox-item {
                min-width: 110px;
                min-height: 60px;
                padding: 10px 6px;
                gap: 5px;
            }
            
            .small-checkbox-label {
                font-size: 9px;
                line-height: 1.2;
                word-wrap: break-word;
                text-align: center;
            }
            
            .small-checkbox-image {
                width: 26px;
                height: 26px;
            }
        }
        
        /* Estilos para a galeria de produtos */
        .product-gallery-section {
            margin: 40px 0;
            padding: 40px;
            background: #f8f9fa;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .simple-gallery {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        
        .gallery-main {
            position: relative;
            width: 100%;
            max-width: 1200px;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .gallery-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(212, 175, 55, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .gallery-nav-btn.prev-btn {
            left: 15px;
        }
        
        .gallery-nav-btn.next-btn {
            right: 15px;
        }
        
        .gallery-nav-btn:hover {
            background: rgba(184, 148, 31, 0.95);
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }
        
        .gallery-nav-btn:disabled {
            background: rgba(204, 204, 204, 0.7);
            cursor: not-allowed;
            transform: translateY(-50%);
            box-shadow: none;
        }
        
        .gallery-main-image {
            width: 100%;
            height: 600px;
            object-fit: cover;
            display: block;
            transition: transform 0.5s ease-in-out, opacity 0.3s ease;
        }
        
        .gallery-main-image.slide-left {
            transform: translateX(-100%);
            opacity: 0;
        }
        
        .gallery-main-image.slide-right {
            transform: translateX(100%);
            opacity: 0;
        }
        
        .gallery-main-image.slide-in-left {
            transform: translateX(100%);
            opacity: 0;
            animation: slideInFromRight 0.5s ease-in-out forwards;
        }
        
        .gallery-main-image.slide-in-right {
            transform: translateX(-100%);
            opacity: 0;
            animation: slideInFromLeft 0.5s ease-in-out forwards;
        }
        
        @keyframes slideInFromRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideInFromLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .gallery-caption {
            padding: 20px;
            text-align: center;
            font-weight: 600;
            color: #333;
            background: white;
            border-top: 1px solid #e9ecef;
            font-size: 16px;
        }
        
        .gallery-indicators {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .gallery-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .gallery-indicator.active {
            background: #d4af37;
            transform: scale(1.2);
        }
        
        .gallery-indicator:hover {
            background: #b8941f;
        }
        
        /* Responsivo para galeria */
        @media (max-width: 768px) {
            .gallery-nav-btn {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
            
            .gallery-nav-btn.prev-btn {
                left: 10px;
            }
            
            .gallery-nav-btn.next-btn {
                right: 10px;
            }
            
            .gallery-main {
                max-width: 100%;
            }
            
            .gallery-main-image {
                height: 400px;
            }
        }
        
        .offer-option .option-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .offer-option h4 {
            color: #333;
            font-size: 1.3rem;
            margin: 0;
        }
        
        .offer-option .price {
            font-size: 1.5rem;
            font-weight: 700;
            color: #d4af37;
        }
        
        .offer-option .description {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 10px;
        }
        
        .offer-option .discount {
            background: #d4af37;
            color: white;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            position: absolute;
            top: -8px;
            right: -8px;
        }

        
        .summary-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
            position: sticky;
            top: 20px;
        }
        
        .summary-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.4rem;
            text-align: center;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 10px;
        }
        
        .form-section .form-section {
            margin-bottom: 30px;
        }
        
        .form-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3rem;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-section h3 i {
            color: #d4af37;
            font-size: 1.2rem;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            flex: 1;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
            color: #333;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
            transform: translateY(-1px);
        }
        
        .form-group input:hover,
        .form-group select:hover,
        .form-group textarea:hover {
            border-color: #d4af37;
        }
        
        .checkout-summary {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .summary-row.total {
            border-top: 2px solid #d4af37;
            padding-top: 15px;
            margin-top: 15px;
            font-size: 1.2rem;
            font-weight: 700;
            color: #d4af37;
        }
        
        
        .checkout-btn {
            width: 100%;
            background: linear-gradient(135deg, #d4af37, #b8941f);
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
        }
        
        .checkout-btn:active {
            transform: translateY(0);
        }
        
        .back-link {
            text-align: center;
            margin-top: 20px;
        }
        
        .back-link a {
            color: #d4af37;
            text-decoration: none;
            font-weight: 500;
        }
        
        .back-link a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            .checkout-layout {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .form-row {
                flex-direction: column;
            }
            
            .product-summary {
                flex-direction: column;
                text-align: center;
            }
            
            .offer-options {
                gap: 15px;
            }
            
            .offer-option {
                padding: 15px;
            }
            
            .summary-section {
                position: static;
            }
            
            .checkout-container {
                padding: 20px 10px;
            }
            
            .offer-section, .summary-section {
                padding: 20px;
            }
            
            .offer-image-container {
                flex-direction: column;
                text-align: center;
            }
            
            .offer-image {
                max-width: 150px;
                max-height: 150px;
                margin: 0 auto 10px;
            }
            
            
            .unified-section {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .checkout-bottom {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        /* Before & After Slider Styles */
        .before-after-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 40px;
            margin: 40px 0;
            text-align: center;
        }
        
        .before-after-header {
            margin-bottom: 30px;
        }
        
        .before-after-header h3 {
            color: #d4af37;
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .before-after-header p {
            color: #666;
            font-size: 1.1rem;
        }
        
        .slider-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .slider-wrapper {
            position: relative;
            width: 100%;
            height: 400px;
            cursor: pointer;
        }
        
        .slider-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .slider-before {
            z-index: 2;
        }
        
        .slider-after {
            z-index: 1;
        }
        
        .slider-line {
            position: absolute;
            top: 0;
            left: 50%;
            width: 3px;
            height: 100%;
            background: #d4af37;
            z-index: 3;
            transform: translateX(-50%);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }
        
        .slider-handle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 40px;
            height: 40px;
            background: #d4af37;
            border: 3px solid white;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 4;
            cursor: grab;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }
        
        .slider-handle:active {
            cursor: grabbing;
        }
        
        .slider-labels {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            z-index: 3;
            padding: 0 20px;
        }
        
        .slider-label {
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
        }
        
        .slider-label.before {
            background: rgba(212, 175, 55, 0.9);
        }
        
        .slider-label.after {
            background: rgba(0,0,0,0.9);
        }
        
        @media (max-width: 768px) {
            .slider-wrapper {
                height: 300px;
            }
            
            .before-after-header h3 {
                font-size: 1.5rem;
            }
        }

        /* Reviews Section Styles */
        .reviews-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 40px;
            margin-bottom: 40px;
        }

        .reviews-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .reviews-header h3 {
            color: #d4af37;
            font-size: 2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .reviews-header h3 i {
            color: #d4af37;
            font-size: 1.8rem;
        }

        .reviews-header p {
            color: #666;
            font-size: 1.1rem;
        }

        .reviews-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .review-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .review-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(212, 175, 55, 0.15);
            border-color: #d4af37;
        }

        .clickable-review {
            cursor: pointer;
        }

        .clickable-review:hover {
            background: #f0f0f0;
        }

        .review-image {
            text-align: center;
            margin-bottom: 20px;
        }

        .review-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #d4af37, #b8941f);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid #fff;
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
            margin: 0 auto;
        }

        .review-avatar i {
            font-size: 2.2rem;
            color: white;
        }

        .review-stars {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin-bottom: 15px;
        }

        .review-stars i {
            color: #ffd700;
            font-size: 1.1rem;
        }

        .review-stars i.far {
            color: #ddd;
        }

        .review-text-container {
            margin-bottom: 20px;
        }

        .review-text {
            color: #333;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 10px;
            font-style: italic;
            text-align: center;
        }

        .review-text::before {
            content: '"';
            font-size: 2rem;
            color: #d4af37;
            opacity: 0.5;
        }

        .review-text::after {
            content: '"';
            font-size: 2rem;
            color: #d4af37;
            opacity: 0.5;
        }

        .read-more-btn {
            background: none;
            border: none;
            color: #d4af37;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            text-decoration: underline;
            padding: 0;
            margin: 0;
            display: block;
            margin: 0 auto;
            transition: all 0.3s ease;
        }

        .read-more-btn:hover {
            color: #b8941f;
            transform: scale(1.05);
        }

        /* Review Modal Styles */
        .review-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            position: relative;
            background: white;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            display: flex;
            align-items: center;
            padding: 30px;
            border-bottom: 1px solid #e0e0e0;
            gap: 20px;
        }

        .modal-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #d4af37, #b8941f);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .modal-avatar i {
            font-size: 1.8rem;
            color: white;
        }

        .modal-author-info {
            flex: 1;
        }

        .modal-author-info h3 {
            color: #333;
            font-size: 1.4rem;
            margin: 0 0 8px 0;
        }

        .modal-stars {
            display: flex;
            gap: 3px;
            margin-bottom: 5px;
        }

        .modal-stars i {
            color: #ffd700;
            font-size: 1rem;
        }

        .modal-stars i.far {
            color: #ddd;
        }

        .modal-date {
            color: #666;
            font-size: 0.9rem;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #999;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: #f0f0f0;
            color: #333;
        }

        .modal-body {
            padding: 30px;
        }

        .modal-body p {
            color: #333;
            font-size: 1.1rem;
            line-height: 1.7;
            margin: 0;
            white-space: pre-line;
        }

        .modal-footer {
            padding: 20px 30px;
            border-top: 1px solid #e0e0e0;
            background: #f8f9fa;
            border-radius: 0 0 20px 20px;
        }

        .verified-purchase {
            color: #28a745;
            font-weight: 600;
            font-size: 0.95rem;
        }

        /* Modal Mobile Responsiveness */
        @media (max-width: 768px) {
            .modal-content {
                width: 95%;
                max-height: 90vh;
                margin: 20px;
            }

            .modal-header {
                padding: 20px;
                gap: 15px;
            }

            .modal-avatar {
                width: 50px;
                height: 50px;
            }

            .modal-avatar i {
                font-size: 1.5rem;
            }

            .modal-author-info h3 {
                font-size: 1.2rem;
            }

            .modal-body {
                padding: 20px;
            }

            .modal-body p {
                font-size: 1rem;
            }

            .modal-footer {
                padding: 15px 20px;
            }
        }

        .review-author {
            text-align: center;
            border-top: 1px solid #e0e0e0;
            padding-top: 15px;
        }

        .review-author strong {
            color: #333;
            font-size: 1.1rem;
            display: block;
            margin-bottom: 5px;
        }

        .review-date {
            color: #666;
            font-size: 0.9rem;
        }

        .reviews-stats {
            display: flex;
            justify-content: center;
            gap: 60px;
            padding: 30px;
            background: linear-gradient(135deg, #f8f9fa, #fff);
            border-radius: 12px;
            border: 2px solid #d4af37;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #d4af37;
            margin-bottom: 5px;
        }

        .stat-stars {
            display: flex;
            justify-content: center;
            gap: 2px;
            margin-bottom: 8px;
        }

        .stat-stars i {
            color: #ffd700;
            font-size: 1rem;
        }

        .stat-label {
            color: #666;
            font-size: 0.95rem;
            font-weight: 500;
        }

        /* Reviews Mobile Responsiveness */
        @media (max-width: 768px) {
            .reviews-section {
                padding: 25px 20px;
                margin-bottom: 20px;
            }

            .reviews-header h3 {
                font-size: 1.6rem;
            }

            .reviews-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .review-item {
                padding: 20px;
            }

            .review-avatar {
                width: 60px;
                height: 60px;
            }

            .review-avatar i {
                font-size: 1.8rem;
            }

            .reviews-stats {
                flex-direction: column;
                gap: 30px;
            }

            .stat-number {
                font-size: 2rem;
            }
        }

        @media (max-width: 480px) {
            .reviews-stats {
                gap: 20px;
                padding: 20px;
            }

            .reviews-header h3 {
                flex-direction: column;
                gap: 5px;
            }
        }

        /* Add Review Section Styles */
        .add-review-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 40px;
            margin-bottom: 40px;
            border: 2px solid #d4af37;
        }

        .add-review-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .add-review-header h3 {
            color: #d4af37;
            font-size: 1.8rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .add-review-header p {
            color: #666;
            font-size: 1rem;
        }

        .add-review-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .review-form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .star-rating {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
        }

        .star-rating i {
            font-size: 1.8rem;
            color: #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .star-rating i:hover,
        .star-rating i.active {
            color: #ffd700;
            transform: scale(1.1);
        }

        .submit-review-btn {
            width: 100%;
            background: linear-gradient(135deg, #d4af37, #b8941f);
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .submit-review-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
        }

        .checkmark {
            color: #28a745;
            font-weight: 600;
        }

        /* Login Prompt Styles */
        .login-prompt {
            background: linear-gradient(135deg, #f8f9fa, #fff);
            border: 2px solid #d4af37;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin-bottom: 40px;
        }

        .login-prompt h3 {
            color: #d4af37;
            margin-bottom: 15px;
        }

        .login-prompt p {
            color: #666;
            margin-bottom: 20px;
        }

        .login-btn {
            background: linear-gradient(135deg, #d4af37, #b8941f);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
        }

        /* Mobile Responsiveness for Add Review */
        @media (max-width: 768px) {
            .add-review-section {
                padding: 25px 20px;
                margin-bottom: 20px;
            }

            .review-form-row {
                flex-direction: column;
                gap: 15px;
            }

            .star-rating i {
                font-size: 1.5rem;
            }

            .add-review-header h3 {
                font-size: 1.5rem;
                flex-direction: column;
                gap: 5px;
            }
        }

        /* Final Presentation Section */
        .final-presentation {
            margin-top: 40px;
            position: relative;
            overflow: hidden;
            border-radius: 0;
        }

        .presentation-content {
            position: relative;
            width: 100%;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .presentation-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .presentation-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                135deg, 
                rgba(212, 175, 55, 0.8) 0%, 
                rgba(184, 148, 31, 0.7) 50%, 
                rgba(0, 0, 0, 0.6) 100%
            );
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .presentation-text h2 {
            color: white;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .presentation-text p {
            color: white;
            font-size: 1.2rem;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .presentation-features {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .feature-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.2);
            padding: 12px 20px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .feature-badge:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .feature-badge i {
            color: #d4af37;
            font-size: 1.2rem;
        }

        .feature-badge span {
            color: white;
            font-weight: 600;
            font-size: 0.95rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        /* Mobile Responsiveness for Final Presentation */
        @media (max-width: 768px) {
            .final-presentation {
                margin-top: 20px;
            }

            .presentation-content {
                height: 300px;
            }

            .presentation-overlay {
                padding: 20px 15px;
            }

            .presentation-text h2 {
                font-size: 1.8rem;
                margin-bottom: 12px;
            }

            .presentation-text p {
                font-size: 1rem;
                margin-bottom: 25px;
            }

            .presentation-features {
                flex-direction: column;
                gap: 15px;
                align-items: center;
            }

            .feature-badge {
                padding: 10px 16px;
                gap: 8px;
            }

            .feature-badge span {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .presentation-content {
                height: 250px;
            }

            .presentation-text h2 {
                font-size: 1.5rem;
            }

            .presentation-features {
                gap: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <div class="logo-container">
                    <img src="../../Logo.png" alt="67 Beauty Hub" class="logo-image">
                    <div class="logo-text">
                        <span class="logo-brand">67 BEAUTY HUB</span>
                    </div>
                </div>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="../../index.html" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="../../index.html#products" class="nav-link">Products</a>
                </li>
                <li class="nav-item">
                    <a href="../../index.html#about" class="nav-link">About</a>
                </li>
                <li class="nav-item">
                    <a href="../../index.html#contact" class="nav-link">Contact</a>
                </li>
            </ul>
            
            <!-- Currency automatically detected based on browser language -->
        </div>
    </nav>

    <div class="checkout-container">
        <div class="checkout-header">
            <h1><i class="fas fa-shopping-cart"></i> Checkout</h1>
            <p>Choose your offer and complete your order securely</p>
        </div>

        <!-- Seção de Reviews movida para o final da página -->

        <div class="checkout-layout">
            <!-- Unified Section: Product + Offers -->
            <div class="unified-section">
                <div class="product-info">
                    <div class="product-summary">
                        <img src="Apresentação do Checkout.png" alt="2 Pack PHOERA Foundation" class="product-image" id="mainProductImage">
                        <div class="product-details">
                            <h3 data-translate-key="product_phoera_foundation">2 Pack PHOERA Foundation</h3>
                            <p>High coverage foundation with natural finish and long lasting. Ideal for all skin types. Special combo with complementary products for perfect makeup.</p>
                        </div>
                    </div>
                    
                    <!-- Galeria de Imagens -->
                    <div class="product-gallery-section">
                        <div class="simple-gallery">
                            <div class="gallery-main">
                                <button class="gallery-nav-btn prev-btn" id="prevBtn">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <img src="Galeria/Kit.jpeg" alt="Kit PHOERA" class="gallery-main-image" id="galleryMainImage">
                                <button class="gallery-nav-btn next-btn" id="nextBtn">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                        </div>
                        </div>
                        <div class="gallery-indicators" id="galleryIndicators">
                            <!-- Indicadores serão gerados pelo JavaScript -->
                        </div>
                        </div>
                    
                </div>

                <div class="offers-info">
                    <h3 style="color: #333; margin-bottom: 20px; text-align: center;" data-translate-key="choose_offer"><i class="fas fa-gift"></i> Choose Your Offer</h3>
                    
                    <div class="offer-options">
                        <div class="offer-option selected" data-option="basic">
                            <div class="option-header">
                                <h4 data-translate-key="product_phoera_foundation">2 Pack PHOERA Foundation</h4>
                                <div class="price">$17.39</div>
                            </div>
                            <div class="discount" data-translate-key="discount_badge">50% OFF</div>
                            <div class="description" data-translate-key="offer_basic_description">Is your foundation failing by midday? With 2 units of PHOERA you guarantee high coverage, natural finish and flawless skin for much longer.</div>
                            
                            <!-- 16 Pequenas Checkboxes -->
                            <div class="small-checkboxes-container">
                                <div class="small-checkbox-item" data-image="Escolha/2 unitys of 102 Nud.jpg" data-name="2 unities of 102 Nude">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/2 unitys of 102 Nud.jpg" alt="102 Nude" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_102_nude">2 unities of 102 Nude</div>
                                </div>
                                <div class="small-checkbox-item" data-image="Escolha/2 unitys of 103 warm peach.jpg" data-name="2 unities of 103 Warm Peach">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/2 unitys of 103 warm peach.jpg" alt="103 Warm Peach" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_103_warm_peach">2 unities of 103 Warm Peach</div>
                                </div>
                                <div class="small-checkbox-item" data-image="Escolha/2 unitys of 104 Buff beige.jpg" data-name="2 unities of 104 Buff Beige">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/2 unitys of 104 Buff beige.jpg" alt="104 Buff Beige" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_104_buff_beige">2 unities of 104 Buff Beige</div>
                                </div>
                                <div class="small-checkbox-item" data-image="Escolha/2 unitys of 105 Sand.jpg" data-name="2 unities of 105 Sand">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/2 unitys of 105 Sand.jpg" alt="105 Sand" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_105_sand">2 unities of 105 Sand</div>
                                </div>
                                <div class="small-checkbox-item" data-image="Escolha/2 Unitys of 108 Tan.jpg" data-name="2 unities of 108 Tan">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/2 Unitys of 108 Tan.jpg" alt="108 Tan" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_108_tan">2 unities of 108 Tan</div>
                                </div>
                                <div class="small-checkbox-item" data-image="Escolha/2 Unitys of 109 Mocha.jpg" data-name="2 unities of 109 Mocha">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/2 Unitys of 109 Mocha.jpg" alt="109 Mocha" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_109_mocha">2 unities of 109 Mocha</div>
                                </div>
                                <div class="small-checkbox-item" data-image="Escolha/2 unitys of warm peach.jpg" data-name="2 unities of Warm Peach">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/2 unitys of warm peach.jpg" alt="Warm Peach" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_warm_peach">2 unities of Warm Peach</div>
                                </div>
                                <div class="small-checkbox-item" data-image="Escolha/2 unitys of Warm Sun.jpg" data-name="2 unities of Warm Sun">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/2 unitys of Warm Sun.jpg" alt="Warm Sun" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_warm_sun">2 unities of Warm Sun</div>
                                </div>
                                <div class="small-checkbox-item" data-image="Escolha/101 porcelain and 101 porcelain.jpg" data-name="101 Porcelain and 101 Porcelain">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/101 porcelain and 101 porcelain.jpg" alt="101 Porcelain and 101 Porcelain" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_101_101">101 Porcelain and 101 Porcelain</div>
                                </div>
                                <div class="small-checkbox-item" data-image="Escolha/101 porcelain and 102 Nud.jpg" data-name="101 Porcelain and 102 Nude">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/101 porcelain and 102 Nud.jpg" alt="101 Porcelain and 102 Nude" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_101_102">101 Porcelain and 102 Nude</div>
                                </div>
                                <div class="small-checkbox-item" data-image="Escolha/102 Nude and 104 Buff beige.jpg" data-name="102 Nude and 104 Buff Beige">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/102 Nude and 104 Buff beige.jpg" alt="102 Nude and 104 Buff Beige" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_102_104">102 Nude and 104 Buff Beige</div>
                                </div>
                                <div class="small-checkbox-item" data-image="Escolha/102 Nude e 103 warm peach.jpg" data-name="102 Nude and 103 Warm Peach">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/102 Nude e 103 warm peach.jpg" alt="102 Nude and 103 Warm Peach" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_102_103">102 Nude and 103 Warm Peach</div>
                                </div>
                                <div class="small-checkbox-item" data-image="Escolha/103 warm peach e 104 Buff beige.jpg" data-name="103 Warm Peach and 104 Buff Beige">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/103 warm peach e 104 Buff beige.jpg" alt="103 Warm Peach and 104 Buff Beige" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_103_104">103 Warm Peach and 104 Buff Beige</div>
                                </div>
                                <div class="small-checkbox-item" data-image="Escolha/104 Buff beige 105 Sand.jpg" data-name="104 Buff Beige and 105 Sand">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/104 Buff beige 105 Sand.jpg" alt="104 Buff Beige and 105 Sand" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_104_105">104 Buff Beige and 105 Sand</div>
                                </div>
                                <div class="small-checkbox-item" data-image="Escolha/105 Sand and 106 Warm Sun.jpg" data-name="105 Sand and 106 Warm Sun">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/105 Sand and 106 Warm Sun.jpg" alt="105 Sand and 106 Warm Sun" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_105_106">105 Sand and 106 Warm Sun</div>
                                </div>
                                <div class="small-checkbox-item" data-image="Escolha/108 Tan and 109 Mocha.jpg" data-name="108 Tan and 109 Mocha">
                                    <div class="small-checkbox-image">
                                        <img src="Escolha/108 Tan and 109 Mocha.jpg" alt="108 Tan and 109 Mocha" class="small-image">
                                    </div>
                                    <div class="small-checkbox-label" data-translate-key="choice_108_109">108 Tan and 109 Mocha</div>
                                </div>
                            </div>
                        </div>

                        <div class="offer-option has-checkbox" data-option="premium">
                            <input type="checkbox" class="offer-checkbox" id="offer-premium" data-option="premium">
                            <div class="option-header">
                                <h4>Premium Offer</h4>
                                <div class="price">$2.50</div>
                            </div>
                            <div class="offer-image-container">
                                <img src="8pcs Makeup Brush.png" alt="Combo Premium" class="offer-image">
                                <div class="offer-description-container">
                                    <div class="description" data-translate-key="offer_premium_description">No more suffering from brushes that shed bristles or leave your makeup patchy. The 8-Piece Makeup Brush Kit brings soft and precise brushes for applying foundation, powder, eyeshadow and blush with a professional finish every day.</div>
                                </div>
                            </div>
                        </div>

                        <div class="offer-option has-checkbox" data-option="complete">
                            <input type="checkbox" class="offer-checkbox" id="offer-complete" data-option="complete">
                            <div class="option-header">
                                <h4>Complete Offer</h4>
                                <div class="price">$11.64</div>
                            </div>
                            <div class="offer-image-container">
                                <img src="2 Pack PHOERA Primer.png" alt="Combo Completo" class="offer-image">
                                <div class="offer-description-container">
                                    <div class="description" data-translate-key="offer_complete_description">Tired of makeup that cracks, runs or doesn't last all day? The 2-Pack PHOERA Primer Kit prepares your skin, closes pores and ensures a smooth, even base for flawless, long-lasting makeup.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="checkout-bottom">
                <div class="form-section">
                    <h3><i class="fas fa-user"></i> <span data-translate-key="customer_info">Customer Information</span></h3>
                    
                    <!-- Campos movidos para dentro do formulário checkoutForm -->
                    <!--
                    <div class="form-row">
                            <div class="form-group">
                            <label for="firstName" data-translate-key="first_name">First Name *</label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName" data-translate-key="last_name">Last Name *</label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                        </div>
                    -->

                    <!--
                    <div class="form-group">
                        <label for="email" data-translate-key="email_label">Email *</label>
                        <input type="email" id="email" name="email" required placeholder="seu@email.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="phone" data-translate-key="phone_label">Phone *</label>
                        <input type="tel" id="phone" name="phone" required placeholder="+1 (555) 123-4567">
                    </div>
                    -->

                    <!--
                    <h3><i class="fas fa-truck"></i> <span data-translate-key="shipping_info">Shipping Information</span></h3>
                    
                    <div class="form-group">
                        <label for="address" data-translate-key="address_label">Address *</label>
                        <textarea id="address" name="address" rows="3" required placeholder="Street address, apartment, suite, etc."></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="city" data-translate-key="city_label">City *</label>
                            <input type="text" id="city" name="city" required>
                        </div>
                        <div class="form-group">
                            <label for="state" data-translate-key="state_label">State/Province *</label>
                            <input type="text" id="state" name="state" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="zipCode" data-translate-key="zip_code_label">ZIP/Postal Code *</label>
                            <input type="text" id="zipCode" name="zipCode" required>
                        </div>
                        <div class="form-group">
                            <label for="country" data-translate-key="country_label">Country *</label>
                            <select id="country" name="country" required>
                                <option value="" data-translate-key="select_country">Select Country</option>
                                <option value="US" data-translate-key="country_us">United States</option>
                                <option value="BR" data-translate-key="country_br">Brazil</option>
                                <option value="PT" data-translate-key="country_pt">Portugal</option>
                                <option value="CA" data-translate-key="country_ca">Canada</option>
                                <option value="GB" data-translate-key="country_gb">United Kingdom</option>
                                <option value="DE" data-translate-key="country_de">Germany</option>
                                <option value="FR" data-translate-key="country_fr">France</option>
                                <option value="ES" data-translate-key="country_es">Spain</option>
                                <option value="IT" data-translate-key="country_it">Italy</option>
                                <option value="AU" data-translate-key="country_au">Australia</option>
                            </select>
                        </div>
                    </div>
                    -->

                    <form id="checkoutForm">
                        <!-- Campos de dados do cliente -->
                        <div class="form-row">
                            <div class="form-group">
                                <label for="firstName" data-translate-key="first_name">First Name *</label>
                                <input type="text" id="firstName" name="firstName" required>
                            </div>
                            <div class="form-group">
                                <label for="lastName" data-translate-key="last_name">Last Name *</label>
                                <input type="text" id="lastName" name="lastName" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="email" data-translate-key="email_label">Email *</label>
                            <input type="email" id="email" name="email" required placeholder="seu@email.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="phone" data-translate-key="phone_label">Phone</label>
                            <input type="tel" id="phone" name="phone" placeholder="+1 (555) 123-4567">
                        </div>
                        
                        <div class="form-group">
                            <label for="address" data-translate-key="address_label">Address *</label>
                            <textarea id="address" name="address" rows="3" required placeholder="Street address, apartment, suite, etc."></textarea>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="city" data-translate-key="city_label">City *</label>
                                <input type="text" id="city" name="city" required>
                            </div>
                            <div class="form-group">
                                <label for="state" data-translate-key="state_label">State/Province *</label>
                                <input type="text" id="state" name="state" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="zipCode" data-translate-key="zip_code_label">ZIP/Postal Code *</label>
                                <input type="text" id="zipCode" name="zipCode" required>
                            </div>
                            <div class="form-group">
                                <label for="country" data-translate-key="country_label">Country *</label>
                                <select id="country" name="country" required>
                                    <option value="" data-translate-key="select_country">Select Country</option>
                                    <option value="US" data-translate-key="country_us">United States</option>
                                    <option value="BR" data-translate-key="country_br">Brazil</option>
                                    <option value="PT" data-translate-key="country_pt">Portugal</option>
                                    <option value="CA" data-translate-key="country_ca">Canada</option>
                                    <option value="GB" data-translate-key="country_gb">United Kingdom</option>
                                    <option value="DE" data-translate-key="country_de">Germany</option>
                                    <option value="FR" data-translate-key="country_fr">France</option>
                                    <option value="ES" data-translate-key="country_es">Spain</option>
                                    <option value="IT" data-translate-key="country_it">Italy</option>
                                    <option value="AU" data-translate-key="country_au">Australia</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="observations" data-translate-key="observations_label">Order Notes (optional)</label>
                            <textarea id="observations" name="observations" rows="3" placeholder="Any special instructions for your order?"></textarea>
                        </div>

                        <!-- Método de Pagamento -->
                    <h3><i class="fas fa-credit-card"></i> <span data-translate-key="payment_method">Payment Method</span></h3>
                    
                    <div class="form-group">
                        <label for="paymentMethod" data-translate-key="payment_method_label">Payment Method *</label>
                        <select id="paymentMethod" name="paymentMethod" required>
                            <option value="" data-translate-key="select_option">Select</option>
                            <option value="paypal" data-translate-key="paypal_option">PayPal</option>
                            <option value="pix" id="pix-option" style="display: none;" data-translate-key="pix_option">PIX (Brazil only)</option>
                            <option value="stripe" id="stripe-option" style="display: none;" data-translate-key="stripe_option">Credit Card (Stripe)</option>
                        </select>
                    </div>

                    <div id="paypal-payment-button" style="display: none;"></div>
                    <div id="pix-payment-info" style="display: none;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border: 2px solid #d4af37; text-align: center;">
                            <h4 style="color: #d4af37; margin-bottom: 15px;"><i class="fas fa-qrcode"></i> <span data-translate-key="pix_payment">PIX Payment</span></h4>
                            <p style="color: #666; margin-bottom: 15px;" data-translate-key="pix_payment_info">After confirming your order, you will receive PIX payment instructions by email.</p>
                            <div style="background: white; padding: 15px; border-radius: 8px; border: 1px solid #ddd;">
                                <strong data-translate-key="pix_key">PIX Key:</strong> contato@67beautyhub.com
                            </div>
                        </div>
                    </div>
                    
                    <div id="stripe-payment-info" style="display: none;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border: 2px solid #d4af37; text-align: center;">
                            <h4 style="color: #d4af37; margin-bottom: 15px;"><i class="fas fa-credit-card"></i> <span data-translate-key="stripe_payment">Credit Card Payment</span></h4>
                            <p style="color: #666; margin-bottom: 15px;" data-translate-key="stripe_payment_info">Secure payment processing with Stripe. Your card information is encrypted and secure.</p>
                        </div>
                    </div>

                        <button type="submit" class="checkout-btn">
                            <i class="fas fa-check"></i> Confirm Order
                        </button>
                    </form>

                </div>

                <div class="summary-section">
                    <h3><i class="fas fa-receipt"></i> <span data-translate-key="order_summary">Order Summary</span></h3>
                    <div class="checkout-summary">
                        <div id="selectedOffers">
                            <!-- Ofertas selecionadas serão inseridas aqui dinamicamente -->
                        </div>
                        <div class="summary-row total">
                            <span>Total</span>
                            <span id="totalAmount">$17.39</span>
                        </div>
                        
                        <!-- Currency automatically detected based on browser language -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

    <!-- Before & After Slider Section -->
    <div class="before-after-section">
        <div class="before-after-header">
            <h3><i class="fas fa-magic"></i> <span data-translate-key="slider_title">See the Instant Transformation</span></h3>
            <p data-translate-key="slider_description">Drag the slider to see the amazing before and after results with PHOERA Foundation</p>
        </div>
        
        <div class="slider-container">
            <div class="slider-wrapper" id="beforeAfterSlider">
                <!-- Before Image (right side) -->
                <img src="Before .jpeg" alt="Before" class="slider-image slider-before" id="beforeImage">
                <!-- After Image (left side) -->
                <img src="After.jpeg" alt="After" class="slider-image slider-after" id="afterImage">
                <div class="slider-line" id="sliderLine"></div>
                <div class="slider-handle" id="sliderHandle">
                    <i class="fas fa-arrows-alt-h"></i>
                </div>
                <div class="slider-labels">
                    <div class="slider-label after">AFTER</div>
                    <div class="slider-label before">BEFORE</div>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 20px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
            <p style="color: #333; font-size: 1.1rem; margin: 0;">
                <i class="fas fa-star" style="color: #d4af37;"></i> 
                <strong data-translate-key="slider_results_title">Real results from real customers!</strong> 
                <span data-translate-key="slider_results_description">This is what you can achieve with just one application of PHOERA Foundation.</span>
            </p>
        </div>
    </div>

    <!-- Reviews Section (moved to end) -->
    <div class="reviews-section" style="margin-top: 40px; background-image: url('Apresentação do fundo.png'); background-size: cover; background-position: center; background-repeat: no-repeat; padding: 40px 20px; border-radius: 15px; position: relative;">
        <!-- Overlay para melhorar legibilidade do texto -->
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255, 255, 255, 0.85); border-radius: 15px;"></div>
        
        <div style="position: relative; z-index: 2;">
            <div class="reviews-header">
                <h3><i class="fas fa-star"></i> What Our Customers Are Saying</h3>
                <p>More than 1,400 satisfied customers with our products</p>
                
                <!-- Botão para adicionar review -->
                <div style="margin-top: 20px;">
                    <button id="addReviewBtn" style="background: #d4af37; color: white; border: none; padding: 12px 24px; border-radius: 25px; font-size: 16px; cursor: pointer; transition: all 0.3s ease;">
                        <i class="fas fa-plus"></i> Add Your Review
                    </button>
                </div>
            </div>
        
        <div class="reviews-container">
            <div class="review-item clickable-review" 
                 data-review-id="brookie"
                 data-author="Brookie"
                 data-date="15 days ago"
                 data-stars="5">
                <div class="review-image">
                    <div class="review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"It's my absolute favorite foundation, I've bought multiple times! I fell in love the first time I used it, and haven't bought a different foundation since! It's super lightweight but full coverage, matte finish, and I swear it gives me such an airbrushed look!..."</p>
                    <div class="review-author">
                        <strong>Brookie</strong>
                        <span class="review-date">Verified Purchase - 15 days ago</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-author="Geauxredd"
                 data-date="1 week ago"
                 data-stars="5"
                 data-full-text="I was skeptical about this foundation because of the low price. But then again, for less than $10 I thought why not. It's already cheaper than most drugstore brands. Wasn't sure on the shade match so I just guessed. I ordered 05 Sand. For reference, I'm usually shade 310 in Fit Me Matte & Poreless. I am a normal to dry skin type. Mature, over 40 skin.

When I got it in the mail, it was a little darker than I expected, but I knew with the right concealer & careful blending I could make it work & I was right! I love this foundation!

As someone who owns approximately 30 foundations, I find myself reaching for this one when I want full coverage that lasts. I wear it when I'm creating content & special occasions where I know I'll be photographed. It gives such a flawless base. I find it a little heavy for everyday wear, but I have found I can mix it with other more sheer foundations to add a little coverage or deepen the shade.

It works well with other products such as primers, cream contouring products & powders. I don't have issues with it lifting when applying other products on top. It is more on the matte side, so I use it with a pore filling primer & a liquid illuminator (Becca) underneath & it gives the most beautiful glow! I'm 44 so I try to steer clear of fully matte products but this one is so easy to adapt for my skin.

I love this foundation so much I am ordering it in a lighter shade as well. Even though it is full coverage & very matte, I think it can be sheered out to be more wearable for everyday. As a former working freelance makeup artist, I think this would be a fantastic foundation to add to any professional kit! The price is affordable enough to purchase the entire shade range yet looks incredible! I think it could work for a variety of skin types.

I've included pics of it in indoor, incandescent light as well as outdoor, natural lighting. It's full coverage & beautiful in my opinion! Try it out!">
                <div class="review-image">
                    <div class="review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"I was skeptical about this foundation because of the low price. But then again, for less than $10 I thought why not. It's already cheaper than most drugstore brands..."</p>
                    <div class="review-author">
                        <strong>Geauxredd</strong>
                        <span class="review-date">Verified Purchase - 1 week ago</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-author="Keith L.Hunter"
                 data-date="3 days ago"
                 data-stars="5"
                 data-full-text="Amazing face foundation! For the price esp. I am currently using a much more expensive foundation and needed a lighter shade for the fall/winter time, so I decided to look for something a little cheaper on amazon and came across this. The reviews definitely live up to the hype!!! Highly recommend. Happy with the shades I chose too. I am fair complected. Gives you full coverage without a doubt.">
                <div class="review-image">
                    <div class="review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"Amazing face foundation! For the price esp. I am currently using a much more expensive foundation and needed a lighter shade for the fall/winter time..."</p>
                    <div class="review-author">
                        <strong>Keith L.Hunter</strong>
                        <span class="review-date">Verified Purchase - 3 days ago</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-author="MCG"
                 data-date="2 semanas atrás"
                 data-stars="4"
                 data-full-text="Really pleasantly surprised by this stuff. It provides great coverage that goes on smooth and not cakey and the price point is great. I just spent $55 on Il Makiage After Party and wish I hadn't because this stuffs covers just as well but with a less thick and cakey consistency. This foundation is closer to Woke Up Like This but with better coverage.

Knocked off one star for a few reasons: 1) Nude and Warm Peach are almost the same color and both have very orange undertones. Luckily I'm tan from the summer so this is OK right now but I'll have to buy the porcelain color to mix as my skin lightens into Fall/Winter and hope I can get to the right shade. 2) Wish there was a wider range of colors. Porcelain seems very light and then the next color, Nude, is fairly dark. No in between. 3) This stuff does not dry down matte for me. It gives my skin an oily sheen that I need to touch up with powder throughout the day to keep in check, and I don't have overly oily skin.

Overall, if you can find the right shade and have a good setting powder/spray, this is definitely worth a try!">
                <div class="review-image">
                    <div class="review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                    </div>
                    <p class="review-text">"Really pleasantly surprised by this stuff. It provides great coverage that goes on smooth and not cakey and the price point is great. I just spent $55 on Il Makiage After Party and wish I hadn't..."</p>
                    <div class="review-author">
                        <strong>MCG</strong>
                        <span class="review-date">Verified Purchase - 2 semanas atrás</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-author="Mary"
                 data-date="1 week ago"
                 data-stars="5"
                 data-full-text="I really love this foundation..I got the 101 porcelain and 102 nude and I mix them together..here's the thing.. it is very lightweight but dries fast, but has good coverage..however the application to applying this to your skin is so important when working with this foundation..moisturize and prep you skin first then get a good foundation brush I have double side foundation brush from elf..put the foundation on the back of your hand take your brush and rub some on and then press and swirl into your brush so the foundation is smooth and even on the brush and then LIGHTLY TAP not streak or stroke , but TAP onto you skin all over until your preference, and repeat if desired, it is a buildable foundation! I'm almost 50 years old and less is more for my mature skin! What I love about this foundation is I do NOT have to use ANY powder which is a win in my book for my age! I just spray setting spray after I achieve my look..I am including pictures with indoor lighting and outdoor lighting and close up in the indoor light so you can have a close up view! What you see is what you get! No gimmicks, no other foundations and no filters at all on these pictures. I hope this helps and I hope you have success on this product for your skin if you choose to purchase! I'm REALLY happy with this foundation!!">
                <div class="review-image">
                    <div class="review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"I really love this foundation..I got the 101 porcelain and 102 nude and I mix them together..here's the thing.. it is very lightweight but dries fast, but has good coverage..."</p>
                    <div class="review-author">
                        <strong>Mary</strong>
                        <span class="review-date">Verified Purchase - 1 week ago</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-review-id="beatriz"
                 data-author="Beatriz Oliveira"
                 data-date="4 days ago"
                 data-stars="5">
                <div class="review-image">
                    <div class="review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"Best value for money! The quality is equal to the expensive foundations I used to wear. Highly recommend!"</p>
                    <div class="review-author">
                        <strong>Beatriz Oliveira</strong>
                        <span class="review-date">Verified Purchase - 4 days ago</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="reviews-stats">
            <div class="stat-item">
                <div class="stat-number">4.7</div>
                <div class="stat-stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star-half-alt"></i>
                </div>
                <div class="stat-label">Average Rating</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">1.456</div>
                <div class="stat-label">Satisfied Customers</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">98%</div>
                <div class="stat-label">Would Recommend</div>
            </div>
        </div>

        <!-- Seção para Adicionar Review (apenas para usuários logados) -->
        <div class="add-review-section" id="addReviewSection" style="display: none;">
            <!-- Conteúdo será inserido dinamicamente pelo JavaScript -->
        </div>
        </div>
    </div>

    <script>
        // Dados das ofertas
        const offers = {
            basic: {
                name: '2 Pack PHOERA Foundation',
                prices: {
                    USD: 17.39,
                    BRL: 91.68,
                    EUR: 16.00,
                    AOA: 16000
                },
                discount: 0,
                shipping: {
                    USD: 2.45,
                    BRL: 12.90,
                    EUR: 2.25,
                    AOA: 2250
                }
            },
            premium: {
                name: '8pcs Makeup Brush',
                prices: {
                    USD: 2.50,
                    BRL: 13.16,
                    EUR: 2.30,
                    AOA: 2300
                },
                discount: 0,
                shipping: {
                    USD: 2.45,
                    BRL: 12.90,
                    EUR: 2.25,
                    AOA: 2250
                }
            },
            complete: {
                name: '2 Pack PHOERA Primer',
                prices: {
                    USD: 11.64,
                    BRL: 61.32,
                    EUR: 10.71,
                    AOA: 10700
                },
                discount: 0,
                shipping: {
                    USD: 0,
                    BRL: 0,
                    EUR: 0,
                    AOA: 0
                }
            }
        };

        let selectedOffers = ['basic']; // Array para múltiplas seleções
        let selectedColor = null; // Cor selecionada para a oferta básica

        // Função para inicializar ofertas
        function initializeOffers() {
            console.log('Initializing PHOERA offers...');
            console.log('Current selectedOffers:', selectedOffers);
            console.log('Current currentCurrency:', currentCurrency);
            console.log('Current offers:', offers);
            
            // Ensure variables are properly initialized
            if (!selectedOffers || !Array.isArray(selectedOffers)) {
                selectedOffers = ['basic'];
                console.log('Reset selectedOffers to:', selectedOffers);
            }
            if (!currentCurrency) {
                currentCurrency = 'USD';
                console.log('Reset currentCurrency to:', currentCurrency);
            }
            if (!offers || typeof offers !== 'object') {
                console.warn('Offers object not properly initialized');
            }
            if (typeof selectedColor === 'undefined') {
                selectedColor = null;
            }
            
            // Ensure basic offer is selected by default
            if (!selectedOffers.includes('basic')) {
                selectedOffers.push('basic');
                console.log('Added basic offer to selectedOffers:', selectedOffers);
            }
            
            // Ensure basic offer is visually selected (no checkbox needed)
            const basicOfferElement = document.querySelector('[data-option="basic"]');
            if (basicOfferElement) {
                basicOfferElement.classList.add('selected');
                console.log('✅ Basic offer element selected');
            } else {
                console.warn('⚠️ Basic offer element not found');
            }
            
            // Initialize event listeners for checkboxes
        document.querySelectorAll('.offer-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const option = this.dataset.option;
                const offerElement = this.closest('.offer-option');
                
                if (this.checked) {
                    if (!selectedOffers.includes(option)) {
                        selectedOffers.push(option);
                    }
                    offerElement.classList.add('selected');
                } else {
                    selectedOffers = selectedOffers.filter(offer => offer !== option);
                    offerElement.classList.remove('selected');
                }
                
                // Garantir que pelo menos uma oferta esteja selecionada
                if (selectedOffers.length === 0) {
                    this.checked = true;
                    selectedOffers.push(option);
                    offerElement.classList.add('selected');
                }
                
                updateOrderSummary();
            });
        });

            // Event listeners para cliques nas ofertas (exceto oferta básica)
            document.querySelectorAll('.offer-option:not([data-option="basic"])').forEach(option => {
            option.addEventListener('click', function(e) {
                // Não processar clique se for no checkbox
                if (e.target.type === 'checkbox') return;
                
                const checkbox = this.querySelector('.offer-checkbox');
                if (checkbox) {
                    checkbox.checked = !checkbox.checked;
                    checkbox.dispatchEvent(new Event('change'));
                }
            });
        });
            
            // Initialize image selection system
            initializeImageSelection();
            
            updateOrderSummary();
        }

        // Event listeners moved to initializeOffers() function

        // Função para atualizar resumo do pedido
        function updateOrderSummary() {
            const selectedOffersContainer = document.getElementById('selectedOffers');
            const totalElement = document.getElementById('totalAmount');
            
            if (!selectedOffersContainer || !totalElement) {
                console.warn('Order summary elements not found');
                return;
            }
            
            let total = 0;

            // Limpar ofertas anteriores
            selectedOffersContainer.innerHTML = '';

            // Calcular total para cada oferta selecionada
            selectedOffers.forEach(offerKey => {
                const offer = offers[offerKey];
                const basePrice = offer.prices[summaryCurrency];
                const discountAmount = (basePrice * offer.discount / 100);
                const offerTotal = basePrice - discountAmount;
                
                total += offerTotal;

                // Adicionar linha da oferta no resumo
                const offerRow = document.createElement('div');
                offerRow.className = 'summary-row';
                
                // Get translated offer name dynamically
                let translatedOfferName = offer.name;
                if (offerKey === 'basic' && selectedColor && selectedColor.name) {
                    // Add selected color dynamically for basic offer
                    translatedOfferName += ` (${selectedColor.name})`;
                }
                
                offerRow.innerHTML = `
                    <span>${translatedOfferName}</span>
                    <span>${formatSummaryPrice(offerTotal)}</span>
                `;
                selectedOffersContainer.appendChild(offerRow);
            });

            // Atualizar total
                totalElement.textContent = formatSummaryPrice(total);
        }

        // Format price for display (removed - using the correct one below)

        // Product Image Gallery Functionality

        // Review Modal Functions
        function openReviewModal(author, date, stars, fullText) {
            const modal = document.createElement('div');
            modal.className = 'review-modal';
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); z-index: 10000; display: flex;
                align-items: center; justify-content: center; padding: 20px;
            `;
            
            // Generate stars HTML
            const starCount = parseFloat(stars);
            const fullStars = Math.floor(starCount);
            const hasHalfStar = starCount % 1 !== 0;
            const emptyStars = 5 - Math.ceil(starCount);
            
            let starsHTML = '';
            for (let i = 0; i < fullStars; i++) {
                starsHTML += '<i class="fas fa-star"></i>';
            }
            if (hasHalfStar) {
                starsHTML += '<i class="fas fa-star-half-alt"></i>';
            }
            for (let i = 0; i < emptyStars; i++) {
                starsHTML += '<i class="far fa-star"></i>';
            }
            
            modal.innerHTML = `
                <div style="
                    background: white; border-radius: 15px; padding: 30px;
                    max-width: 600px; width: 100%; max-height: 80vh; overflow-y: auto;
                    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
                    animation: modalSlideIn 0.3s ease-out;
                ">
                    <div style="display: flex; align-items: center; margin-bottom: 20px;">
                        <div style="
                            width: 50px; height: 50px; background: #d4af37;
                            border-radius: 50%; display: flex; align-items: center;
                            justify-content: center; margin-right: 15px;
                        ">
                            <i class="fas fa-user" style="color: white; font-size: 1.2rem;"></i>
                        </div>
                        <div>
                            <h3 style="margin: 0; color: #333;">${author}</h3>
                            <div style="color: #d4af37; margin: 5px 0;">
                                ${starsHTML}
                            </div>
                            <span style="color: #666; font-size: 0.9rem;">Verified Purchase - ${date}</span>
                        </div>
                        <button onclick="this.closest('.review-modal').remove()" style="
                            background: none; border: none; font-size: 1.5rem;
                            color: #999; cursor: pointer; margin-left: auto;
                        ">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div style="
                        background: #f8f9fa; padding: 20px; border-radius: 10px;
                        border-left: 4px solid #d4af37; line-height: 1.6;
                        color: #333;
                    ">
                        <p style="margin: 0; font-style: italic;">"${fullText}"</p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Close modal when clicking overlay
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        function closeReviewModal() {
            const modal = document.querySelector('.review-modal');
            if (modal) {
                modal.remove();
            }
        }

        // Add click listeners to reviews
        document.addEventListener('DOMContentLoaded', function() {
            const clickableReviews = document.querySelectorAll('.clickable-review');
            clickableReviews.forEach(review => {
                review.addEventListener('click', function() {
                    const author = this.dataset.author;
                    const date = this.dataset.date;
                    const stars = this.dataset.stars;
                    const fullText = this.dataset.fullText || this.querySelector('.review-text').textContent.replace(/"/g, '');
                    
                    openReviewModal(author, date, stars, fullText);
                });
            });
        });

        // Inicializar resumo após DOM carregado
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize offers first
            initializeOffers();
            
            // Set default color selection dynamically (only if no color is selected)
            setTimeout(() => {
                if (!selectedColor) {
                    const firstColorItem = document.querySelector('.small-checkbox-item');
                    if (firstColorItem) {
                        firstColorItem.classList.add('selected');
                selectedColor = {
                            name: firstColorItem.dataset.name,
                            image: firstColorItem.dataset.image
                };
                        console.log('Default color set dynamically:', selectedColor);
                        updateOrderSummary();
            }
                }
            }, 200);
            
            // Event listener para o seletor de moeda do resumo
            const summaryCurrencySelector = document.getElementById('summaryCurrencySelector');
            if (summaryCurrencySelector) {
                // Set initial currency based on detected currency
                summaryCurrency = currentCurrency;
                summaryCurrencySelector.value = currentCurrency;
                console.log('Summary currency initialized to:', summaryCurrency);
                
                summaryCurrencySelector.addEventListener('change', function() {
                    summaryCurrency = this.value;
                    console.log('Summary currency changed to:', summaryCurrency);
                    // Atualizar apenas o resumo do pedido
                    updateOrderSummary();
                });
            }
        });
        
        // Também inicializar imediatamente (caso DOM já esteja carregado)
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', updateOrderSummary);
        } else {
            // Pequeno delay para garantir que todos os elementos estejam prontos
            setTimeout(updateOrderSummary, 100);
        }
    </script>
    <script>
        // Currency System for Checkout
        let currentCurrency = 'USD';
        let summaryCurrency = 'USD'; // Moeda do resumo do pedido
        let currentLanguage = 'en'; // Idioma independente da moeda
        let exchangeRates = {
            'USD': { symbol: '$', rate: 1, locale: 'en-US', currency: 'USD' },
            'BRL': { symbol: 'R$', rate: 5.27, locale: 'pt-BR', currency: 'BRL' },
            'EUR': { symbol: '€', rate: 0.92, locale: 'de-DE', currency: 'EUR' },
            'AOA': { symbol: 'Kz', rate: 920, locale: 'pt-AO', currency: 'AOA' }
        };

        // Toggle flag dropdown
        function toggleFlagDropdown() {
            const dropdown = document.querySelector('.flag-dropdown');
            const menu = document.getElementById('flagDropdownMenu');
            
            dropdown.classList.toggle('open');
            menu.classList.toggle('open');
        }
        
        // Select flag option
        function selectFlagOption(currency, flag) {
            const selectedFlag = document.getElementById('selectedFlag');
            selectedFlag.textContent = flag;
            
            // Close dropdown
            const dropdown = document.querySelector('.flag-dropdown');
            const menu = document.getElementById('flagDropdownMenu');
            dropdown.classList.remove('open');
            menu.classList.remove('open');
            
            // Change currency
            changeMainCurrency(currency);
        }
        
        // Change main currency (affects everything including summary)
        function changeMainCurrency(currencyCode) {
            currentCurrency = currencyCode;
            
            // Update all prices including summary
            updateCurrencyDisplay();
            
            // Save selection to localStorage
            localStorage.setItem('selectedCurrency', currencyCode);
            
            console.log(`Main currency changed to: ${currencyCode}`);
        }

        // Reviews translations database
        const reviewsTranslations = {
            'brookie_en': {
                short: "It's my absolute favorite foundation, I've bought multiple times! I fell in love the first time I used it, and haven't bought a different foundation since! It's super lightweight but full coverage, matte finish, and I swear it gives me such an airbrushed look!...",
                full: "It's my absolute favorite foundation, I've bought multiple times! I fell in love the first time I used it, and haven't bought a different foundation since!\n\nIt's super lightweight but full coverage, matte finish, and I swear it gives me such an airbrushed look! My skin looks like I don't even have a lot of makeup on! I'm a bartender, so I'm super busy and sweaty during my shifts, and with setting spray, this foundation stays on my entire shift!\n\nI'm running back and forth, 10,000 steps in 5 hours, kegs spraying me, constantly wiping the sweat off my head, sticky with alcohol and citrus, serving 100's of ppl, and looking like a baddie the whole time. I've worked in the restaurant industry for 8 years, and never found a foundation that lasted an entire shift, until this one!\n\nI 100% recommend! And the price is great for the value! You don't even need a lot of the product. I also like buying a shade lighter to use as concealer and carve out my features, it works better than a normal concealer would!\n\nI do have good skin, non textured and I'm semi oily, semi dry in areas"
            },
            'brookie_pt': {
                short: "É minha base absoluta favorita, já comprei várias vezes! Me apaixonei na primeira vez que usei, e não comprei uma base diferente desde então! É super leve mas com cobertura total, acabamento matte, e juro que dá um look aerografado!...",
                full: "É minha base absoluta favorita, já comprei várias vezes! Me apaixonei na primeira vez que usei, e não comprei uma base diferente desde então!\n\nÉ super leve mas com cobertura total, acabamento matte, e juro que dá um look aerografado! Minha pele parece que nem tem muita maquiagem! Sou bartender, então fico super ocupada e suando durante meus turnos, e com setting spray, essa base dura todo o meu turno!\n\nFico correndo pra lá e pra cá, 10.000 passos em 5 horas, barris me respingando, constantemente limpando o suor da cabeça, grudenta com álcool e cítricos, atendendo centenas de pessoas, e parecendo uma gata o tempo todo. Trabalhei na indústria de restaurantes por 8 anos, e nunca encontrei uma base que durasse um turno inteiro, até esta!\n\nRecomendo 100%! E o preço é ótimo pelo valor! Você nem precisa de muito produto. Também gosto de comprar um tom mais claro para usar como corretivo e definir minhas características, funciona melhor que um corretivo normal!\n\nTenho uma pele boa, sem textura e sou meio oleosa, meio seca em algumas áreas"
            },
            'beatriz_en': {
                short: "Best cost-benefit! The quality is equal to the expensive foundations I used before. Highly recommend!",
                full: "Best cost-benefit! The quality is equal to the expensive foundations I used before. Highly recommend! I was spending a lot of money on famous brand foundations and discovered this one that has the same quality for a much more affordable price. The coverage is uniform, doesn't oxidize during the day and looks beautiful in photos. I've already become a loyal customer!"
            },
            'beatriz_pt': {
                short: "Melhor custo-benefício! A qualidade é igual às bases caras que eu usava antes. Super recomendo!",
                full: "Melhor custo-benefício! A qualidade é igual às bases caras que eu usava antes. Super recomendo! Estava gastando muito dinheiro com bases de marcas famosas e descobri esta que tem a mesma qualidade por um preço muito mais acessível. A cobertura é uniforme, não oxida durante o dia e fica linda nas fotos. Já virei cliente fiel!"
            }
        };

        // Manual currency selection (user override)
        function setCurrency(currency) {
            currentCurrency = currency;
            // NÃO alterar o idioma quando mudar a moeda
            
            // Save user preference (overrides auto-detection)
            localStorage.setItem('preferredCurrency', currency);
            localStorage.setItem('userManuallySelectedCurrency', 'true');
            
            updateCurrencyDisplay();
            // NÃO chamar updateReviewsLanguage() aqui
            
            console.log('💰 User manually changed currency to:', currency, 'language remains:', currentLanguage);
            
            // Show confirmation message
            showCurrencyChangeConfirmation(currency);
        }

        // Manual language selection (independent of currency)
        function setLanguage(language) {
            currentLanguage = language;
            
            // Save user preference
            localStorage.setItem('preferredLanguage', language);
            localStorage.setItem('userManuallySelectedLanguage', 'true');
            
            updateReviewsLanguage();
            
            console.log('🌍 User manually changed language to:', language, 'currency remains:', currentCurrency);
            
            // Show confirmation message
            showLanguageChangeConfirmation(language);
        }

        // Show confirmation when user changes language
        function showLanguageChangeConfirmation(language) {
            const languageNames = {
                'pt': 'Português',
                'en': 'English'
            };
            
            const confirmationMsg = document.createElement('div');
            confirmationMsg.style.cssText = `
                position: fixed; top: 20px; right: 20px; background: #28a745; color: white;
                padding: 15px 20px; border-radius: 8px; z-index: 10001;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15); animation: slideIn 0.3s ease;
                font-weight: 600;
            `;
            confirmationMsg.innerHTML = `
                <i class="fas fa-language"></i> 
                Idioma alterado para ${languageNames[language]}
            `;
            
            document.body.appendChild(confirmationMsg);
            
            setTimeout(() => {
                confirmationMsg.remove();
            }, 3000);
        }

        // Show confirmation when user changes currency
        function showCurrencyChangeConfirmation(currency) {
            const currencyNames = {
                'USD': 'Dólar Americano (USD)',
                'EUR': 'Euro (EUR)', 
                'BRL': 'Real Brasileiro (BRL)'
            };
            
            const confirmationMsg = document.createElement('div');
            confirmationMsg.style.cssText = `
                position: fixed; top: 20px; right: 20px; background: #d4af37; color: white;
                padding: 15px 20px; border-radius: 8px; z-index: 10001;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15); animation: slideIn 0.3s ease;
                font-weight: 600;
            `;
            confirmationMsg.innerHTML = `
                <i class="fas fa-check-circle"></i> 
                Moeda alterada para ${currencyNames[currency]}
            `;
            
            document.body.appendChild(confirmationMsg);
            
            setTimeout(() => {
                confirmationMsg.remove();
            }, 3000);
        }

        // Format price for display
        function formatPrice(price) {
            if (currentCurrency === 'BRL') {
                return `R$ ${price.toFixed(2).replace('.', ',')}`;
            } else if (currentCurrency === 'USD') {
                return `$${price.toFixed(2)}`;
            } else if (currentCurrency === 'EUR') {
                return `€${price.toFixed(2)}`;
            } else if (currentCurrency === 'AOA') {
                return `Kz ${price.toLocaleString()}`;
            }
            return price.toString();
        }

        // Format price for summary (uses summaryCurrency)
        function formatSummaryPrice(price) {
            if (summaryCurrency === 'BRL') {
                return `R$ ${price.toFixed(2).replace('.', ',')}`;
            } else if (summaryCurrency === 'USD') {
                return `$${price.toFixed(2)}`;
            } else if (summaryCurrency === 'EUR') {
                return `€${price.toFixed(2)}`;
            } else if (summaryCurrency === 'AOA') {
                return `Kz ${price.toLocaleString()}`;
            }
            return price.toString();
        }

        // Update currency display in checkout
        function updateCurrencyDisplay() {
            // Atualizar apenas preços das ofertas nas checkboxes usando preços pré-calculados
            document.querySelectorAll('.offer-option').forEach(offerElement => {
                const offerKey = offerElement.dataset.option;
                const offer = offers[offerKey];
                const priceElement = offerElement.querySelector('.price');
                
                if (offer && priceElement) {
                    const price = offer.prices[currentCurrency];
                    if (price) {
                        if (currentCurrency === 'USD') {
                            priceElement.textContent = `$${price.toFixed(2)}`;
                        } else if (currentCurrency === 'BRL') {
                            priceElement.textContent = `R$ ${price.toFixed(2).replace('.', ',')}`;
                        } else if (currentCurrency === 'EUR') {
                            priceElement.textContent = `€${price.toFixed(2)}`;
                        } else if (currentCurrency === 'AOA') {
                            priceElement.textContent = `Kz ${price.toLocaleString()}`;
                        }
                    }
                }
            });

            // NÃO atualizar resumo do pedido - apenas as checkboxes
        }

        // Update reviews language based on currency selection
        function updateReviewsLanguage() {
            console.log('🔄 Updating reviews to language:', currentLanguage);
            
            // Update Brookie's review
            const brookieReview = document.querySelector('[data-review-id="brookie"]');
            if (brookieReview) {
                const translation = reviewsTranslations[`brookie_${currentLanguage}`];
                if (translation) {
                    const reviewTextElement = brookieReview.querySelector('.review-text');
                    if (reviewTextElement) {
                        reviewTextElement.textContent = `"${translation.short}"`;
                        brookieReview.setAttribute('data-full-text', translation.full);
                        console.log('✅ Updated Brookie review to', currentLanguage);
                    }
                } else {
                    console.log('❌ No translation found for brookie_' + currentLanguage);
                }
            }

            // Update Beatriz's review
            const beatrizReview = document.querySelector('[data-review-id="beatriz"]');
            if (beatrizReview) {
                const translation = reviewsTranslations[`beatriz_${currentLanguage}`];
                if (translation) {
                    const reviewTextElement = beatrizReview.querySelector('.review-text');
                    if (reviewTextElement) {
                        reviewTextElement.textContent = `"${translation.short}"`;
                        beatrizReview.setAttribute('data-full-text', translation.full);
                        console.log('✅ Updated Beatriz review to', currentLanguage);
                    }
                } else {
                    console.log('❌ No translation found for beatriz_' + currentLanguage);
                }
            }

            // Update section headers
            updateSectionHeaders();
        }

        function updateSectionHeaders() {
            const headers = {
                'en': {
                    reviewsTitle: 'What our customers are saying',
                    reviewsSubtitle: 'Over 1,400 satisfied customers with our products',
                    avgRating: 'Average rating',
                    satisfiedCustomers: 'Satisfied customers',
                    wouldRecommend: 'Would recommend',
                    verifiedPurchase: 'Verified purchase',
                    daysAgo: 'days ago',
                    weekAgo: 'week ago',
                    weeksAgo: 'weeks ago'
                },
                'pt': {
                    reviewsTitle: 'What our customers are saying',
                    reviewsSubtitle: 'More than 1,400 satisfied customers with our products',
                    avgRating: 'Average Rating',
                    satisfiedCustomers: 'Satisfied Customers',
                    wouldRecommend: 'Would Recommend',
                    verifiedPurchase: 'Verified Purchase',
                    daysAgo: 'days ago',
                    weekAgo: 'week ago',
                    weeksAgo: 'semanas atrás'
                }
            };

            const texts = headers[currentLanguage];
            
            // Update main headers
            const reviewsHeader = document.querySelector('.reviews-header h3');
            if (reviewsHeader) {
                reviewsHeader.innerHTML = `<i class="fas fa-star"></i> ${texts.reviewsTitle}`;
            }

            const reviewsSubtitle = document.querySelector('.reviews-header p');
            if (reviewsSubtitle) {
                reviewsSubtitle.textContent = texts.reviewsSubtitle;
            }

            // Update stats labels
            const statLabels = document.querySelectorAll('.stat-label');
            if (statLabels.length >= 3) {
                statLabels[0].textContent = texts.avgRating;
                statLabels[1].textContent = texts.satisfiedCustomers;
                statLabels[2].textContent = texts.wouldRecommend;
            }
        }

        // Auto-detect user language and set currency accordingly
        function detectUserLanguageAndCurrency() {
            // Get user's browser language
            const userLanguage = navigator.language || navigator.userLanguage;
            const languageCode = userLanguage.toLowerCase();
            
            console.log('Detected browser language:', userLanguage);
            
            // Set language based on browser language (independent of currency)
            if (languageCode.startsWith('pt')) {
                currentLanguage = 'pt';
                console.log('Portuguese detected → language set to PT');
            } else {
                currentLanguage = 'en';
                console.log('Other language detected → language set to EN');
            }
            
            // Map browser languages to currencies (suggested default, not forced)
            let suggestedCurrency = 'USD'; // Default to USD
            
            if (languageCode.startsWith('pt')) {
                // Portuguese speakers → Brazilian Real (suggested)
                suggestedCurrency = 'BRL';
                console.log('Portuguese detected → suggested BRL');
            } else if (languageCode.startsWith('en')) {
                // English speakers → US Dollar (suggested)
                suggestedCurrency = 'USD';
                console.log('English detected → suggested USD');
            } else if (languageCode.startsWith('fr') || languageCode.startsWith('de') || 
                      languageCode.startsWith('it') || languageCode.startsWith('nl') ||
                      languageCode.startsWith('be') || languageCode.startsWith('at') ||
                      languageCode.startsWith('ch')) {
                // European languages → Euro (suggested)
                suggestedCurrency = 'EUR';
                console.log('European language detected → suggested EUR');
            }
            
            return suggestedCurrency;
        }

        // Initialize currency system
        function initializeCurrency() {
            // Check if user has a saved currency preference
            const savedCurrency = localStorage.getItem('selectedCurrency');
            let detectedCurrency;
            
            if (savedCurrency && exchangeRates[savedCurrency]) {
                detectedCurrency = savedCurrency;
                console.log('Using saved currency preference:', savedCurrency);
            } else {
                detectedCurrency = detectUserLanguageAndCurrency();
                console.log('Auto-detected currency:', detectedCurrency);
            }
            
            currentCurrency = detectedCurrency;
            
            // Update selected flag
            const selectedFlag = document.getElementById('selectedFlag');
            const flagOption = document.querySelector(`[data-currency="${detectedCurrency}"]`);
            if (flagOption && selectedFlag) {
                selectedFlag.textContent = flagOption.dataset.flag;
            }
            
            console.log('🌍 Auto-set currency:', currentCurrency, 'from browser:', navigator.language);
            
            updateCurrencyDisplay();
        }

        // ===== SISTEMA DE INTEGRAÇÃO COM FORNECEDORES =====
        
        // Dados dos fornecedores para cada produto
        const suppliers = {
            'phoera-foundation': {
                name: 'PHOERA Cosmetics',
                email: 'orders@phoera.com',
                phone: '+1 (555) 123-4567',
                address: '123 Beauty Lane, Los Angeles, CA 90210',
                contactPerson: 'Maria Rodriguez',
                apiEndpoint: 'https://api.phoera.com/orders',
                products: ['2 Pack PHOERA Foundation + Combo'],
                processingTime: '24-48 horas',
                shippingMethod: 'Express Shipping',
                minOrderValue: 50.00,
                currency: 'USD'
            }
        };

        // Função para enviar pedido para fornecedor
        async function sendOrderToSupplier(orderData, productType) {
            const supplier = suppliers[productType];
            if (!supplier) {
                console.error('Fornecedor não encontrado para:', productType);
                return { success: false, error: 'Fornecedor não encontrado' };
            }

            try {
                // Simular envio para API do fornecedor
                const orderPayload = {
                    supplier: supplier.name,
                    orderId: generateOrderId(),
                    timestamp: new Date().toISOString(),
                    customer: {
                        name: orderData.firstName + ' ' + orderData.lastName,
                        email: orderData.email,
                        phone: orderData.phone,
                        address: {
                            street: orderData.address,
                            city: orderData.city,
                            state: orderData.state,
                            zipCode: orderData.zipCode,
                            country: 'Brasil'
                        }
                    },
                    items: orderData.selectedOffers.map(offerKey => ({
                        product: offers[offerKey].name,
                        price: offers[offerKey].price,
                        quantity: 1
                    })),
                    payment: {
                        method: orderData.paymentMethod,
                        total: orderData.total,
                        currency: currentCurrency
                    },
                    specialInstructions: orderData.observations || ''
                };

                console.log('📦 Enviando pedido para fornecedor:', supplier.name);
                console.log('📋 Dados do pedido:', orderPayload);

                // Simular delay de API
                await new Promise(resolve => setTimeout(resolve, 2000));

                // Simular resposta da API (em produção, seria uma chamada real)
                const response = {
                    success: true,
                    orderId: orderPayload.orderId,
                    supplierOrderId: 'SUP-' + Date.now(),
                    estimatedDelivery: calculateDeliveryDate(supplier.processingTime),
                    trackingNumber: 'TRK' + Math.random().toString(36).substr(2, 9).toUpperCase(),
                    supplier: supplier.name,
                    contactInfo: {
                        email: supplier.email,
                        phone: supplier.phone,
                        contactPerson: supplier.contactPerson
                    }
                };

                // Salvar pedido no localStorage para histórico
                saveOrderToHistory(orderPayload, response);

                return response;

            } catch (error) {
                console.error('❌ Erro ao enviar pedido para fornecedor:', error);
                return { 
                    success: false, 
                    error: 'Erro ao processar pedido com fornecedor',
                    details: error.message 
                };
            }
        }

        // Gerar ID único para pedido
        function generateOrderId() {
            return 'ORD-' + Date.now() + '-' + Math.random().toString(36).substr(2, 4).toUpperCase();
        }

        // Calcular data de entrega estimada
        function calculateDeliveryDate(processingTime) {
            const days = processingTime.includes('24-48') ? 3 : 2;
            const deliveryDate = new Date();
            deliveryDate.setDate(deliveryDate.getDate() + days);
            return deliveryDate.toLocaleDateString('pt-BR');
        }

        // Salvar pedido no histórico
        function saveOrderToHistory(orderData, supplierResponse) {
            const orderHistory = JSON.parse(localStorage.getItem('orderHistory') || '[]');
            const orderRecord = {
                ...orderData,
                supplierResponse,
                orderDate: new Date().toISOString(),
                status: 'Enviado ao fornecedor'
            };
            
            orderHistory.unshift(orderRecord);
            
            // Manter apenas os últimos 50 pedidos
            if (orderHistory.length > 50) {
                orderHistory.splice(50);
            }
            
            localStorage.setItem('orderHistory', JSON.stringify(orderHistory));
            console.log('💾 Pedido salvo no histórico:', orderRecord.orderId);
        }

        // Função para mostrar status do pedido - REMOVIDA (inadequada para checkout)
        // Notificações de pedidos devem ficar apenas no dashboard administrativo

        // Modificar função de submit do formulário para integrar com fornecedores
        document.getElementById('checkoutForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Coletar dados do formulário
            const formData = new FormData(this);
            const orderData = {};
            formData.forEach((value, key) => {
                orderData[key] = value;
            });
            
            // Adicionar dados das ofertas selecionadas
            orderData.selectedOffers = selectedOffers;
            orderData.offerNames = selectedOffers.map(key => offers[key].name);
            
            // Calcular total
            let total = 0;
            selectedOffers.forEach(offerKey => {
                const offer = offers[offerKey];
                const discountAmount = (offer.price * offer.discount / 100);
                const offerTotal = offer.price - discountAmount;
                total += offerTotal;
            });
            
            orderData.total = total;
            orderData.currency = currentCurrency;

            // Mostrar loading
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processando Pedido...';
            submitBtn.disabled = true;

            try {
                // Enviar pedido para fornecedor
                const supplierResponse = await sendOrderToSupplier(orderData, 'phoera-foundation');
                
                if (supplierResponse.success) {
                    // Mostrar sucesso
                    showOrderStatus(supplierResponse);
                    
                    // Log para desenvolvimento
                    console.log('✅ Pedido processado com sucesso:', supplierResponse);
                } else {
                    // Mostrar erro
                    alert('Erro ao processar pedido: ' + supplierResponse.error);
                    console.error('❌ Erro no pedido:', supplierResponse);
                }
                
            } catch (error) {
                alert('Erro de conexão. Tente novamente.');
                console.error('❌ Erro na requisição:', error);
            } finally {
                // Restaurar botão
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        });






        // Initialize all systems when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeCurrency();
            
            // Add event listeners for flag selection
            document.querySelectorAll('.flag-option').forEach(flag => {
                flag.addEventListener('click', function() {
                    const currency = this.dataset.currency;
                    const flagEmoji = this.dataset.flag;
                    selectFlagOption(currency, flagEmoji);
                });
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                const dropdown = document.querySelector('.flag-dropdown');
                const menu = document.getElementById('flagDropdownMenu');
                if (dropdown && menu && !dropdown.contains(e.target)) {
                    dropdown.classList.remove('open');
                    menu.classList.remove('open');
                }
            });
            
            // Flag dropdown removed - currency detection is now automatic
            
            // Log sistema de fornecedores
            console.log('🏭 Sistema de fornecedores inicializado');
            console.log('📋 Fornecedores disponíveis:', Object.keys(suppliers));
            
            // Inicializar galeria de produtos
            initializeProductGallery();
        });
        
        // Sistema de seleção de imagens
        function initializeImageSelection() {
            const imageItems = document.querySelectorAll('.small-checkbox-item');
            const mainProductImage = document.getElementById('mainProductImage');
            
            console.log('🎨 Initializing image selection system...');
            console.log('📦 Found image items:', imageItems.length);
            console.log('🖼️ Main product image:', mainProductImage);
            
            // Função para verificar se a imagem carrega
            function testImageLoad(imagePath, callback) {
                const testImg = new Image();
                testImg.onload = () => callback(true);
                testImg.onerror = () => callback(false);
                testImg.src = imagePath;
            }
            
            imageItems.forEach((item, index) => {
                const imagePath = item.getAttribute('data-image');
                const imageName = item.getAttribute('data-name');
                
                // Testar se a imagem carrega
                testImageLoad(imagePath, (success) => {
                    if (!success) {
                        console.warn('⚠️ Imagem não encontrada:', imagePath);
                        // Adicionar placeholder visual
                        const img = item.querySelector('.small-image');
                        if (img) {
                            img.style.background = '#f0f0f0';
                            img.style.border = '2px dashed #ccc';
                            img.alt = 'Imagem não disponível';
                        }
                    }
                });
                
                item.addEventListener('click', function() {
                    console.log('🖱️ Color item clicked:', imageName);
                    
                    // Remover seleção de todos os itens
                    imageItems.forEach(img => img.classList.remove('selected'));
                    
                    // Adicionar seleção ao item clicado
                    this.classList.add('selected');
                    
                    // Capturar a cor selecionada
                    selectedColor = {
                        name: imageName,
                        image: imagePath
                    };
                    
                    console.log('✅ Cor selecionada:', selectedColor);
                    
                    // Atualizar o resumo do pedido com a nova cor
                    updateOrderSummary();
                    
                    // Atualizar imagem principal
                    if (mainProductImage && imagePath) {
                        // Verificar se a imagem principal carrega
                        testImageLoad(imagePath, (success) => {
                            if (success) {
                                mainProductImage.src = imagePath;
                                mainProductImage.alt = imageName;
                                
                                // Adicionar efeito de transição
                                mainProductImage.style.opacity = '0.7';
                                setTimeout(() => {
                                    mainProductImage.style.opacity = '1';
                                }, 150);
                                
                                console.log('✅ Imagem carregada:', imageName);
                            } else {
                                console.error('❌ Erro ao carregar imagem:', imagePath);
                                // Manter imagem atual se a nova não carregar
                            }
                        });
                    }
                    
                    console.log('🖼️ Imagem selecionada:', imageName);
                    console.log('📁 Caminho:', imagePath);
                });
            });
            
            // Log final da inicialização
            console.log('✅ Image selection system initialized with', imageItems.length, 'items');
        }
        
        // Sistema de galeria de produtos
        function initializeProductGallery() {
            const galleryImages = [
                { src: 'Galeria/Kit.jpeg' },
                { src: 'Galeria/1760391255800.jpeg' },
                { src: 'Galeria/1760391294320.jpeg' },
                { src: 'Galeria/1760391305030.jpeg' },
                { src: 'Galeria/1760391370056.jpeg' },
                { src: 'Galeria/1760391521189.jpeg' },
                { src: 'Galeria/1760391539825.jpeg' },
                { src: 'Galeria/1760391572969.jpeg' },
                { src: 'Galeria/1760391595300.webp' },
                { src: 'Galeria/1760391831146.jpeg' },
                { src: 'Galeria/1760395908351.jpeg' },
                { src: 'Galeria/1760395957729.jpeg' },
                { src: 'Galeria/1760395972251.jpeg' },
                { src: 'Galeria/beijaflormake_1760395985651.jpeg' },
                { src: 'Galeria/fashion.paradise.ke_1760391785814.webp' }
            ];
            
            let currentImageIndex = 0;
            const mainImage = document.getElementById('galleryMainImage');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const indicatorsContainer = document.getElementById('galleryIndicators');
            
            // Limpar indicadores existentes para evitar duplicação
            indicatorsContainer.innerHTML = '';
            
            // Criar indicadores
            galleryImages.forEach((_, index) => {
                const indicator = document.createElement('div');
                indicator.className = 'gallery-indicator';
                if (index === 0) indicator.classList.add('active');
                indicator.addEventListener('click', () => goToImage(index));
                indicatorsContainer.appendChild(indicator);
            });
            
            function updateImage(direction = null) {
                const currentImage = galleryImages[currentImageIndex];
                
                // Aplicar transição de saída
                if (direction === 'next') {
                    mainImage.classList.add('slide-right');
                } else if (direction === 'prev') {
                    mainImage.classList.add('slide-left');
                }
                
                // Aguardar transição de saída e trocar imagem
                setTimeout(() => {
                    mainImage.src = currentImage.src;
                    mainImage.alt = `Imagem ${currentImageIndex + 1}`;
                    
                    // Remover classes de saída e aplicar entrada
                    mainImage.classList.remove('slide-left', 'slide-right');
                    
                    if (direction === 'next') {
                        mainImage.classList.add('slide-in-left');
                    } else if (direction === 'prev') {
                        mainImage.classList.add('slide-in-right');
                    }
                    
                    // Remover classes de entrada após animação
                    setTimeout(() => {
                        mainImage.classList.remove('slide-in-left', 'slide-in-right');
                    }, 500);
                    
                }, 250);
                
                // Atualizar indicadores
                const indicators = document.querySelectorAll('.gallery-indicator');
                indicators.forEach((indicator, index) => {
                    indicator.classList.toggle('active', index === currentImageIndex);
                });
                
                // Atualizar botões
                prevBtn.disabled = currentImageIndex === 0;
                nextBtn.disabled = currentImageIndex === galleryImages.length - 1;
                
                console.log('🖼️ Galeria: Imagem', currentImageIndex + 1, 'de', galleryImages.length, direction ? `(${direction})` : '');
            }
            
            function goToImage(index) {
                currentImageIndex = index;
                updateImage();
            }
            
            function nextImage() {
                if (currentImageIndex < galleryImages.length - 1) {
                    currentImageIndex++;
                    updateImage('next');
                }
            }
            
            function prevImage() {
                if (currentImageIndex > 0) {
                    currentImageIndex--;
                    updateImage('prev');
                }
            }
            
            // Event listeners
            nextBtn.addEventListener('click', nextImage);
            prevBtn.addEventListener('click', prevImage);
            
            // Navegação por teclado
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') {
                    e.preventDefault();
                    prevImage();
                }
                if (e.key === 'ArrowRight') {
                    e.preventDefault();
                    nextImage();
                }
            });
            
            // Manual navigation only - no automatic slideshow
            // Users can navigate using buttons and indicators at their own pace
            
            // Inicializar
            updateImage();
            
            console.log('🖼️ Galeria de produtos inicializada com', galleryImages.length, 'imagens');
        }
    </script>

    <!-- Sistema de Reviews JavaScript -->
    <script>
        // Sistema de Reviews
        let currentUser = null;
        let userReviews = JSON.parse(localStorage.getItem('userReviews')) || [];
        let selectedRating = 0;

        // Verificar se usuário está logado
        function checkLogin() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                return true;
            }
            return false;
        }

        // Mostrar modal de login
        function showLoginModal() {
            document.getElementById('loginModal').style.display = 'flex';
        }

        // Fechar modal de login
        function closeLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
        }

        // Mostrar modal de review
        function showReviewModal() {
            if (!checkLogin()) {
                showLoginModal();
                return;
            }
            document.getElementById('reviewModal').style.display = 'flex';
        }

        // Fechar modal de review
        function closeReviewModal() {
            document.getElementById('reviewModal').style.display = 'none';
            document.getElementById('reviewForm').reset();
            selectedRating = 0;
            updateStarDisplay();
            document.getElementById('imagePreview').innerHTML = '';
        }

        // Atualizar display das estrelas
        function updateStarDisplay() {
            const stars = document.querySelectorAll('#starRating i');
            stars.forEach((star, index) => {
                if (index < selectedRating) {
                    star.style.color = '#d4af37';
                } else {
                    star.style.color = '#ddd';
                }
            });
        }

        // Event listeners para sistema de reviews
        document.addEventListener('DOMContentLoaded', function() {
            // Botão adicionar review
            const addReviewBtn = document.getElementById('addReviewBtn');
            if (addReviewBtn) {
                addReviewBtn.addEventListener('click', showReviewModal);
            }

            // Fechar modais
            document.getElementById('closeLoginModal').addEventListener('click', closeLoginModal);
            document.getElementById('closeReviewModal').addEventListener('click', closeReviewModal);

            // Login form
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                // Simular login (em produção, validar com backend)
                if (email && password) {
                    currentUser = { email: email, name: email.split('@')[0] };
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    closeLoginModal();
                    showReviewModal();
                } else {
                    alert('Please fill in all fields');
                }
            });

            // Sistema de estrelas
            const stars = document.querySelectorAll('#starRating i');
            stars.forEach((star, index) => {
                star.addEventListener('click', function() {
                    selectedRating = index + 1;
                    updateStarDisplay();
                });
                star.addEventListener('mouseenter', function() {
                    for (let i = 0; i <= index; i++) {
                        stars[i].style.color = '#d4af37';
                    }
                });
                star.addEventListener('mouseleave', function() {
                    updateStarDisplay();
                });
            });

            // Preview de imagem
            document.getElementById('reviewImage').addEventListener('change', function(e) {
                const file = e.target.files[0];
                const preview = document.getElementById('imagePreview');
                
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        preview.innerHTML = `
                            <img src="${e.target.result}" style="max-width: 200px; max-height: 200px; border-radius: 8px; border: 2px solid #ddd;">
                        `;
                    };
                    reader.readAsDataURL(file);
                } else {
                    preview.innerHTML = '';
                }
            });

            // Formulário de review
            document.getElementById('reviewForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (selectedRating === 0) {
                    alert('Please select a rating');
                    return;
                }

                const reviewData = {
                    id: Date.now().toString(),
                    name: document.getElementById('reviewerName').value,
                    rating: selectedRating,
                    text: document.getElementById('reviewText').value,
                    image: null,
                    date: new Date().toLocaleDateString('pt-BR'),
                    verified: true
                };

                // Processar imagem se houver
                const imageFile = document.getElementById('reviewImage').files[0];
                if (imageFile) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        reviewData.image = e.target.result;
                        saveReview(reviewData);
                    };
                    reader.readAsDataURL(imageFile);
                } else {
                    saveReview(reviewData);
                }
            });

            // Carregar reviews existentes
            loadUserReviews();
        });

        // Salvar review
        function saveReview(reviewData) {
            userReviews.push(reviewData);
            localStorage.setItem('userReviews', JSON.stringify(userReviews));
            
            // Adicionar review ao DOM
            addReviewToDOM(reviewData);
            
            closeReviewModal();
            alert('Review adicionada com sucesso!');
        }

        // Adicionar review ao DOM
        function addReviewToDOM(reviewData) {
            const reviewsContainer = document.querySelector('.reviews-container');
            const reviewElement = document.createElement('div');
            reviewElement.className = 'review-item clickable-review';
            reviewElement.setAttribute('data-review-id', reviewData.id);
            reviewElement.setAttribute('data-author', reviewData.name);
            reviewElement.setAttribute('data-date', reviewData.date);
            reviewElement.setAttribute('data-stars', reviewData.rating);
            
            let imageHtml = '';
            if (reviewData.image) {
                imageHtml = `<img src="${reviewData.image}" alt="Review Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">`;
            } else {
                imageHtml = `<div class="review-avatar"><i class="fas fa-user"></i></div>`;
            }

            let starsHtml = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= reviewData.rating) {
                    starsHtml += '<i class="fas fa-star"></i>';
                } else {
                    starsHtml += '<i class="far fa-star"></i>';
                }
            }

            reviewElement.innerHTML = `
                <div class="review-image">
                    ${imageHtml}
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        ${starsHtml}
                    </div>
                    <p class="review-text">"${reviewData.text}"</p>
                    <div class="review-author">
                        <strong>${reviewData.name}</strong>
                        <span class="review-date">Verified Purchase - ${reviewData.date}</span>
                    </div>
                </div>
            `;

            // Adicionar event listener para o modal
            reviewElement.addEventListener('click', function() {
                openReviewModal(reviewData.name, reviewData.date, reviewData.rating, reviewData.text);
            });

            reviewsContainer.insertBefore(reviewElement, reviewsContainer.firstChild);
        }

        // Carregar reviews do usuário
        function loadUserReviews() {
            userReviews.forEach(review => {
                addReviewToDOM(review);
            });
        }
    </script>

    <!-- Modal de Login -->
    <div id="loginModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; align-items: center; justify-content: center;">
        <div style="background: white; padding: 30px; border-radius: 15px; max-width: 400px; width: 90%; text-align: center;">
            <h3 style="color: #d4af37; margin-bottom: 20px;">Fazer Login</h3>
            <form id="loginForm">
                <div style="margin-bottom: 15px;">
                    <input type="email" id="loginEmail" placeholder="Email" required style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                </div>
                <div style="margin-bottom: 20px;">
                    <input type="password" id="loginPassword" placeholder="Senha" required style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                </div>
                <button type="submit" style="background: #d4af37; color: white; border: none; padding: 12px 30px; border-radius: 8px; font-size: 16px; cursor: pointer; margin-right: 10px;">Entrar</button>
                <button type="button" id="closeLoginModal" style="background: #ccc; color: white; border: none; padding: 12px 30px; border-radius: 8px; font-size: 16px; cursor: pointer;">Cancel</button>
            </form>
        </div>
    </div>

    <!-- Modal de Review -->
    <div id="reviewModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; align-items: center; justify-content: center;">
        <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;">
            <h3 style="color: #d4af37; margin-bottom: 20px;">Write Review</h3>
            <form id="reviewForm">
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 600;">Rating:</label>
                    <div id="starRating" style="display: flex; gap: 5px; justify-content: center;">
                        <i class="fas fa-star" data-rating="1" style="font-size: 24px; color: #ddd; cursor: pointer; transition: color 0.3s;"></i>
                        <i class="fas fa-star" data-rating="2" style="font-size: 24px; color: #ddd; cursor: pointer; transition: color 0.3s;"></i>
                        <i class="fas fa-star" data-rating="3" style="font-size: 24px; color: #ddd; cursor: pointer; transition: color 0.3s;"></i>
                        <i class="fas fa-star" data-rating="4" style="font-size: 24px; color: #ddd; cursor: pointer; transition: color 0.3s;"></i>
                        <i class="fas fa-star" data-rating="5" style="font-size: 24px; color: #ddd; cursor: pointer; transition: color 0.3s;"></i>
                    </div>
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 600;">Title:</label>
                    <input type="text" id="reviewTitle" required style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;" placeholder="Your review title">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 600;">Comentário:</label>
                    <textarea id="reviewComment" required style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px; min-height: 100px; resize: vertical;" placeholder="Compartilhe sua experiência com o produto"></textarea>
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 600;">Foto (opcional):</label>
                    <input type="file" id="reviewImage" accept="image/*" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                    <div id="imagePreview" style="margin-top: 10px;"></div>
                </div>
                <div style="text-align: center;">
                    <button type="submit" style="background: #d4af37; color: white; border: none; padding: 12px 30px; border-radius: 8px; font-size: 16px; cursor: pointer; margin-right: 10px;">Submit Review</button>
                    <button type="button" id="closeReviewModal" style="background: #ccc; color: white; border: none; padding: 12px 30px; border-radius: 8px; font-size: 16px; cursor: pointer;">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Payment method control
        function setupPaymentMethodControl() {
            const paymentMethodSelect = document.getElementById('paymentMethod');
            const paypalButton = document.getElementById('paypal-payment-button');
            const pixInfo = document.getElementById('pix-payment-info');
            
            if (paymentMethodSelect) {
                paymentMethodSelect.addEventListener('change', function() {
                    const selectedMethod = this.value;
                    
                    // Hide all payment options first
                    if (paypalButton) paypalButton.style.display = 'none';
                    if (pixInfo) pixInfo.style.display = 'none';
                    
                    // Show selected payment method
                    switch(selectedMethod) {
                        case 'paypal':
                            if (paypalButton) paypalButton.style.display = 'block';
                            break;
                        case 'pix':
                            if (pixInfo) {
                                pixInfo.style.display = 'block';
                                // Initialize PIX if not already done
                                if (pixCheckout && !pixCheckout.currentOrder) {
                                    initializePIXForOrder();
                                }
                            }
                            break;
                    }
                });
            }
        }
        
        // Global variables for PayPal currency and locale
        let currentPayPalCurrency = 'USD';
        let currentPayPalLocale = 'en_US';
        
        // PIX System
        let pixCheckout = null;
        
        // Initialize PIX System
        function initializePIXSystem() {
            if (typeof PIXCheckout !== 'undefined') {
                pixCheckout = new PIXCheckout();
                console.log('PIX System initialized');
            } else {
                console.error('PIXCheckout class not found');
            }
        }
        
        // Setup PIX only for Brazilian customers
        function setupPIXForBrazilOnly() {
            const pixOption = document.getElementById('pix-option');
            const selectedCountry = localStorage.getItem('selectedCountry');
            const isTestMode = localStorage.getItem('pixTestMode') === 'true';
            
            // Debug logs
            console.log('🔍 PIX Debug Info:');
            console.log('Selected Country:', selectedCountry);
            console.log('Is Test Mode:', isTestMode);
            console.log('PIX Option Element:', pixOption);
            
            // Show PIX for Brazil (BR) OR for explicit test mode (any country)
            if (selectedCountry === 'BR' || isTestMode) {
                if (pixOption) {
                    pixOption.style.display = 'block';
                    if (isTestMode) {
                        console.log('🧪 PIX Test Mode enabled');
                        pixOption.textContent = 'PIX (Test Mode)';
                    } else {
                        console.log('🇧🇷 Brazilian customer detected - PIX enabled');
                        pixOption.textContent = 'PIX';
                    }
                } else {
                    console.error('❌ PIX Option element not found!');
                }
            } else {
                if (pixOption) {
                    pixOption.style.display = 'none';
                    console.log('🌍 Non-Brazilian customer - PIX disabled');
                } else {
                    console.error('❌ PIX Option element not found!');
                }
            }
        }
        
        // Test function for Angolan to enable PIX testing
        function enablePIXTestMode() {
            localStorage.setItem('pixTestMode', 'true');
            setupPIXForBrazilOnly();
            console.log('🧪 PIX Test Mode enabled for Angolan testing');
            alert('PIX Test Mode enabled! You can now test PIX functionality.');
        }
        
        // Disable test mode
        function disablePIXTestMode() {
            localStorage.removeItem('pixTestMode');
            setupPIXForBrazilOnly();
            console.log('🧪 PIX Test Mode disabled');
            alert('PIX Test Mode disabled. PIX will only show for Brazilian customers.');
        }
        
        // Check current PIX status
        function checkPIXStatus() {
            console.log('🔍 PIX Status Check:');
            console.log('localStorage pixTestMode:', localStorage.getItem('pixTestMode'));
            console.log('User Language:', navigator.language);
            console.log('PIX Option Element:', document.getElementById('pix-option'));
            console.log('PIX Option Display:', document.getElementById('pix-option')?.style.display);
            console.log('PIX Option Text:', document.getElementById('pix-option')?.textContent);
        }
        
        // Initialize PIX for current order
        function initializePIXForOrder() {
            if (!pixCheckout) {
                console.error('PIX System not initialized');
                return;
            }
            
            // Get current order data
            const orderData = getCurrentOrderData();
            if (!orderData) {
                console.error('No order data available for PIX');
                return;
            }
            
            // Initialize PIX with order data
            pixCheckout.initializePIX(orderData);
        }
        
        // Get current order data for PIX (using summary total like PayPal)
        function getCurrentOrderData() {
            // Validate required variables
            if (!selectedOffers || !Array.isArray(selectedOffers) || selectedOffers.length === 0) {
                console.error('No offers selected');
                return null;
            }
            
            // Get total from order summary (same as PayPal logic)
            const totalElement = document.getElementById('totalAmount');
            let totalAmount = 0;
            
            if (totalElement) {
                const totalText = totalElement.textContent;
                totalAmount = parseFloat(totalText.replace(/[^\d.,]/g, '').replace(',', '.'));
                console.log('💰 PIX using summary total:', totalAmount, currentCurrency);
                console.log('📊 Summary element text:', totalText);
            } else {
                console.warn('⚠️ Total element not found, using fallback calculation');
                // Fallback to calculation
                selectedOffers.forEach(offerType => {
                    if (offers[offerType]) {
                        const offer = offers[offerType];
                        const price = offer.prices && offer.prices[currentCurrency] 
                            ? offer.prices[currentCurrency] 
                            : offer.price || 0;
                        totalAmount += price;
                    }
                });
            }
            
            if (totalAmount <= 0) {
                console.error('❌ Invalid total amount:', totalAmount);
                return null;
            }
            
            // Get product names
            const products = selectedOffers.map(offerType => {
                if (offers[offerType]) {
                    let productName = offers[offerType].name;
                    
                    // Se for a oferta básica e há cor selecionada, usar apenas o nome da cor
                    if (offerType === 'basic' && selectedColor) {
                        productName = selectedColor.name;
                    }
                    
                    return productName;
                }
                return 'Produto';
            });
            
            console.log('✅ PIX Order Data:', {
                total: totalAmount,
                currency: currentCurrency,
                products: products
            });
            
            return {
                id: 'ORDER_' + Date.now(),
                products: products,
                total: totalAmount,
                currency: currentCurrency,
                description: products.join(' + ')
            };
        }
        
        // Handle PIX payment
        function handlePIXPayment(email, observations) {
            if (!pixCheckout) {
                alert('PIX system not available. Please try again.');
                return;
            }
            
            // Get order data
            const orderData = getCurrentOrderData();
            if (!orderData) {
                alert('Unable to process order. Please try again.');
                return;
            }
            
            // Add customer information
            orderData.customer = {
                email: email,
                observations: observations
            };
            
            // Initialize PIX payment
            pixCheckout.initializePIX(orderData);
            
            // Show success message
            alert('PIX payment instructions have been generated! Please complete the payment using the QR Code or Copy & Paste method.');
        }

        // Load PayPal SDK with correct locale and currency based on user's language
        function loadPayPalWithCorrectLocale() {
            // Detect user's language and currency
            const userLanguage = navigator.language || navigator.userLanguage;
            console.log('Browser language detected:', userLanguage);
            let paypalLocale = 'en_US'; // Default to English
            let paypalCurrency = 'USD'; // Default to USD
            
            // Map browser language to PayPal locale and currency
            if (userLanguage.startsWith('pt')) {
                if (userLanguage.includes('BR') || userLanguage.includes('br')) {
                    paypalLocale = 'pt_BR'; // Portuguese Brazil
                    paypalCurrency = 'BRL'; // Brazilian Real
                } else if (userLanguage.includes('PT') || userLanguage.includes('pt')) {
                    paypalLocale = 'pt_PT'; // Portuguese Portugal
                    paypalCurrency = 'EUR'; // Euro
                } else {
                    // Generic Portuguese (Angola, etc.) - use USD
                    paypalLocale = 'pt_PT'; // Portuguese interface
                    paypalCurrency = 'USD'; // US Dollar for international Portuguese speakers
                }
            } else if (userLanguage.startsWith('en')) {
                paypalLocale = 'en_US'; // English US
                paypalCurrency = 'USD'; // US Dollar
            } else if (userLanguage.startsWith('es')) {
                paypalLocale = 'es_ES'; // Spanish
                paypalCurrency = 'EUR'; // Euro for Spain
            } else if (userLanguage.startsWith('fr')) {
                paypalLocale = 'fr_FR'; // French
                paypalCurrency = 'EUR'; // Euro for France
            } else if (userLanguage.startsWith('de')) {
                paypalLocale = 'de_DE'; // German
                paypalCurrency = 'EUR'; // Euro for Germany
            }
            
            // Store globally for use in order creation
            currentPayPalCurrency = paypalCurrency;
            currentPayPalLocale = paypalLocale;
            
            console.log('Detected language:', userLanguage, 'Using PayPal locale:', paypalLocale, 'Currency:', paypalCurrency);
            
            // Load PayPal SDK with correct locale and currency
            const script = document.createElement('script');
            script.src = `https://www.paypal.com/sdk/js?client-id=Ab2ftZVJCplquKwOY1cWgvWMivADwMhbUs-OhehwO4hVh_VW9lS87qLkRUVD39yEeoh7YGXzBeuq1Dlh&currency=${paypalCurrency}&intent=capture&locale=${paypalLocale}&enable-funding=venmo,card&disable-funding=credit`;
            script.async = true;
            script.defer = true;
            script.onload = function() {
                console.log('PayPal SDK loaded with locale:', paypalLocale, 'and currency:', paypalCurrency);
                setTimeout(initializePayPal, 500); // Small delay to ensure SDK is ready
            };
            script.onerror = function() {
                console.error('Failed to load PayPal SDK');
                // Try with a simpler URL
                console.log('Retrying with simpler PayPal SDK URL...');
                const retryScript = document.createElement('script');
                retryScript.src = 'https://www.paypal.com/sdk/js?client-id=Ab2ftZVJCplquKwOY1cWgvWMivADwMhbUs-OhehwO4hVh_VW9lS87qLkRUVD39yEeoh7YGXzBeuq1Dlh&currency=USD&intent=capture';
                retryScript.async = true;
                retryScript.defer = true;
                retryScript.onload = function() {
                    console.log('PayPal SDK loaded with fallback URL');
                    setTimeout(initializePayPal, 500);
                };
                retryScript.onerror = function() {
                    console.error('PayPal SDK failed to load even with fallback URL');
                };
                document.head.appendChild(retryScript);
            };
            document.head.appendChild(script);
        }

        // Initialize payment method control, PayPal, PIX and other systems
        document.addEventListener('DOMContentLoaded', function() {
            setupPaymentMethodControl();
            loadPayPalWithCorrectLocale();
            initializePIXSystem();
            setupPIXForBrazilOnly();
            initializeBeforeAfterSlider();
            
            // Add test functions to global scope for console testing
            window.enablePIXTestMode = enablePIXTestMode;
            window.disablePIXTestMode = disablePIXTestMode;
            window.checkPIXStatus = checkPIXStatus;
            window.testPIX = function() {
                console.log('🧪 PIX Test Functions Available:');
                console.log('enablePIXTestMode() - Enable PIX for Angolan testing');
                console.log('disablePIXTestMode() - Disable PIX test mode');
                console.log('checkPIXStatus() - Check current PIX status');
                console.log('Current test mode:', localStorage.getItem('pixTestMode'));
            };
            
            // Show test info in console
            console.log('🧪 PIX Test Mode Available!');
            console.log('Type: testPIX() for available functions');
        });

        // Before & After Slider functionality
        function initializeBeforeAfterSlider() {
            const slider = document.getElementById('beforeAfterSlider');
            const handle = document.getElementById('sliderHandle');
            const line = document.getElementById('sliderLine');
            const beforeImage = document.getElementById('beforeImage');
            const afterImage = document.getElementById('afterImage');
            
            if (!slider || !handle || !line || !beforeImage || !afterImage) {
                console.log('Before & After Slider elements not found');
                return;
            }
            
            let isDragging = false;
            let startX = 0;
            let currentX = 0;
            
            // Set initial position (50%)
            const initialPosition = 50;
            updateSliderPosition(initialPosition);
            
            // Mouse events
            handle.addEventListener('mousedown', startDrag);
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDrag);
            
            // Touch events for mobile
            handle.addEventListener('touchstart', startDrag);
            document.addEventListener('touchmove', drag);
            document.addEventListener('touchend', stopDrag);
            
            // Click on slider to move handle
            slider.addEventListener('click', function(e) {
                if (!isDragging) {
                    const rect = slider.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const percentage = (x / rect.width) * 100;
                    updateSliderPosition(Math.max(0, Math.min(100, percentage)));
                }
            });
            
            function startDrag(e) {
                isDragging = true;
                startX = e.clientX || e.touches[0].clientX;
                handle.style.cursor = 'grabbing';
                e.preventDefault();
            }
            
            function drag(e) {
                if (!isDragging) return;
                
                currentX = e.clientX || e.touches[0].clientX;
                const rect = slider.getBoundingClientRect();
                const x = currentX - rect.left;
                const percentage = (x / rect.width) * 100;
                
                updateSliderPosition(Math.max(0, Math.min(100, percentage)));
                e.preventDefault();
            }
            
            function stopDrag() {
                isDragging = false;
                handle.style.cursor = 'grab';
            }
            
            function updateSliderPosition(percentage) {
                // Update handle position
                handle.style.left = percentage + '%';
                line.style.left = percentage + '%';
                
                // Update before image clip (right side)
                beforeImage.style.clipPath = `inset(0 ${100 - percentage}% 0 0)`;
                
                // Update after image clip (left side)
                afterImage.style.clipPath = `inset(0 0 0 ${percentage}%)`;
            }
            
            console.log('Before & After Slider initialized successfully');
        }

        // PayPal integration
        function initializePayPal() {
            console.log('PayPal SDK loaded, initializing buttons...');
            console.log('Current PayPal Locale:', currentPayPalLocale);
            console.log('Current PayPal Currency:', currentPayPalCurrency);
            
            // Check if PayPal SDK is available
            if (typeof paypal === 'undefined') {
                console.error('PayPal SDK is not available');
                return;
            }

            // Clear any existing buttons
            const paypalContainer = document.getElementById('paypal-payment-button');
            if (paypalContainer) {
                paypalContainer.innerHTML = '';
            }

        paypal.Buttons({
            locale: currentPayPalLocale,
            style: {
                locale: currentPayPalLocale,
                color: 'gold',
                shape: 'rect',
                label: 'paypal'
            },
            createOrder: function(data, actions) {
                    return new Promise((resolve, reject) => {
                        try {
                            // Validate required variables
                            if (!selectedOffers || !Array.isArray(selectedOffers) || selectedOffers.length === 0) {
                                throw new Error('No offers selected');
                            }
                            
                            if (!currentCurrency) {
                                currentCurrency = 'USD'; // Fallback
                            }
                            
                            // Get total from order summary (converted to USD for PayPal)
                            const totalElement = document.getElementById('totalAmount');
                            let totalAmount = 0;
                            
                            if (totalElement) {
                                const totalText = totalElement.textContent;
                                const totalValue = parseFloat(totalText.replace(/[^\d.,]/g, '').replace(',', '.'));
                                
                                // Convert to USD if needed
                                if (summaryCurrency === 'BRL') {
                                    totalAmount = totalValue / 5.2; // Convert BRL to USD
                                } else if (summaryCurrency === 'EUR') {
                                    totalAmount = totalValue / 0.92; // Convert EUR to USD
                                } else {
                                    totalAmount = totalValue; // Already USD
                                }
                            } else {
                                // Fallback to calculation
                                totalAmount = selectedOffers.reduce((total, offerType) => {
                                    if (!offers[offerType]) {
                                        console.warn('Offer not found:', offerType);
                                        return total;
                                    }
                                    
                                    const price = offers[offerType].prices && offers[offerType].prices[currentCurrency] 
                                        ? offers[offerType].prices[currentCurrency] 
                                        : offers[offerType].price || 0;
                                    
                                    return total + price;
                                }, 0);
                            }
                            
                            const productNames = selectedOffers.map(offerType => {
                                let productName = offers[offerType] ? offers[offerType].name : 'Produto';
                                
                                // Se for a oferta básica e há cor selecionada, usar apenas o nome da cor
                                if (offerType === 'basic' && selectedColor) {
                                    productName = selectedColor.name;
                                }
                                
                                return productName;
                            }).join(' + ');
                            
                            console.log('PayPal order creation:', {
                                selectedOffers: selectedOffers,
                                totalAmount: totalAmount,
                                currency: currentCurrency,
                                productNames: productNames
                            });
                            
                            if (totalAmount <= 0) {
                                throw new Error('Invalid total amount: ' + totalAmount);
                            }
                            
                            // Create order with timeout
                            const orderPromise = actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: totalAmount.toFixed(2),
                                        currency_code: currentPayPalCurrency
                                    },
                                    description: productNames || 'PHOERA Foundation Products'
                                }]
                            });
                            
                            // Add timeout to prevent hanging
                            const timeoutPromise = new Promise((_, timeoutReject) => {
                                setTimeout(() => {
                                    timeoutReject(new Error('PayPal order creation timeout'));
                                }, 8000);
                            });
                            
                            Promise.race([orderPromise, timeoutPromise])
                                .then(resolve)
                                .catch(reject);
                                
                        } catch (error) {
                            console.error('Error creating PayPal order:', error);
                            reject(error);
                        }
                });
            },
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                        console.log('PayPal payment approved:', details);
                    alert('Pagamento aprovado! ID da transação: ' + details.id);
                    processCheckout();
                    }).catch(function(error) {
                        console.error('PayPal payment error:', error);
                        alert('Erro no processamento do pagamento. Tente novamente.');
                    });
                },
                onError: function(err) {
                    console.error('PayPal error:', err);
                    alert('Erro no PayPal. Tente novamente ou escolha outra forma de pagamento.');
                },
                onCancel: function(data) {
                    console.log('PayPal payment cancelled:', data);
                }
            }).render('#paypal-payment-button').then(function() {
                console.log('PayPal buttons rendered successfully');
            }).catch(function(error) {
                console.error('Error rendering PayPal buttons:', error);
                // Retry after a delay
                setTimeout(() => {
                    console.log('Retrying PayPal button initialization...');
                    initializePayPal();
                }, 2000);
            });
        }
    </script>

    <script>
        // Função de processamento de checkout
        function processCheckout() {
            const email = document.getElementById('email').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            const observations = document.getElementById('observations').value;

            if (!email || !paymentMethod) {
                alert('Please fill in your email and select a payment method.');
                return;
            }
            
            // Handle PIX payment differently
            if (paymentMethod === 'pix') {
                handlePIXPayment(email, observations);
                return;
            }
            
            // Validar se uma cor foi escolhida para a oferta básica
            if (selectedOffers.includes('basic') && !selectedColor) {
                alert('Please select a color/shade for the foundation.');
                return;
            }
            
            const orderData = {
                id: 'ORDER_' + Date.now(),
                products: selectedOffers.map(offerType => {
                    const product = {
                        ...offers[offerType],
                        totalPrice: offers[offerType].prices[currentCurrency]
                    };
                    
                    // Se for a oferta básica e há cor selecionada, usar apenas o nome da cor
                    if (offerType === 'basic' && selectedColor) {
                        product.selectedColor = selectedColor;
                        product.name = selectedColor.name;
                    }
                    
                    return product;
                }),
                customer: {
                    email
                },
                paymentMethod,
                observations,
                total: selectedOffers.reduce((total, offerType) => total + offers[offerType].prices[currentCurrency], 0),
                date: new Date().toISOString()
            };
            
            // Map order for supplier (AliExpress)
            let mappedOrder = null;
            if (typeof mapProductOrder === 'function') {
                try {
                    // Prepare order data for mapping
                    const mappingOrderData = {
                        id: orderData.id,
                        customer: orderData.customer,
                        items: orderData.products.map(product => ({
                            productId: 'phoera_foundation',
                            name: product.name,
                            variation: product.selectedColor ? {
                                type: 'color',
                                value: product.selectedColor.name,
                                displayName: product.selectedColor.name
                            } : null,
                            quantity: 1,
                            unitPrice: product.totalPrice,
                            totalPrice: product.totalPrice
                        })),
                        total: orderData.total,
                        date: orderData.date
                    };
                    
                    // Map the order
                    mappedOrder = mapProductOrder(mappingOrderData);
                    console.log('Pedido mapeado para fornecedor:', mappedOrder);
                } catch (error) {
                    console.error('Erro ao mapear pedido:', error);
                }
            }
            
            // Save original order
            let orders = JSON.parse(localStorage.getItem('orders') || '[]');
            orders.push(orderData);
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // Save mapped order to dashboardData for dashboard synchronization
            let dashboardData = JSON.parse(localStorage.getItem('dashboardData') || '{}');
            if (!dashboardData.orders) dashboardData.orders = [];
            
            // Use mapped order if available, otherwise use original
            const orderToSave = mappedOrder || orderData;
            dashboardData.orders.push(orderToSave);
            localStorage.setItem('dashboardData', JSON.stringify(dashboardData));
            
            // Show specific message based on payment method
            let successMessage = `Order placed successfully!\n\nProducts: ${orderData.products.map(p => p.name).join(' + ')}\nTotal: ${formatPrice(orderData.total)}\n\n`;
            
            switch(paymentMethod) {
                case 'paypal':
                    successMessage += 'PayPal payment has been processed. You will receive a confirmation email shortly.';
                    break;
                case 'pix':
                    successMessage += 'You will receive PIX payment instructions by email. After payment, your order will be processed.';
                    break;
                default:
                    successMessage += 'You will receive a confirmation email shortly.';
            }
            
            alert(successMessage);
            
            // Redirect to home page
            window.location.href = '../../index.html';
        }

        // Checkout Translation System (without currency converter)
        class CheckoutTranslator {
            constructor() {
                this.userCountry = null;
                this.userCurrency = 'USD';
                this.isInitialized = false;
                this.init();
            }
            
            async init() {
                try {
                    await this.detectUserLocation();
                    this.updatePageContent();
                    this.isInitialized = true;
                    console.log(`Checkout translator initialized. Currency: ${this.userCurrency}`);
                } catch (error) {
                    console.error('Error initializing checkout translator:', error);
                    this.userCurrency = 'USD';
                    this.updatePageContent();
                }
            }
            
            async detectUserLocation() {
                try {
                    let countryCode = null;
                    
                    // Check if running from file:// protocol
                    if (window.location.protocol === 'file:') {
                        console.log('Running from file:// protocol, using fallback detection');
                        // Try to detect from browser language
                        const browserLang = navigator.language || navigator.userLanguage;
                        if (browserLang.startsWith('pt')) {
                            countryCode = 'BR';
                            console.log('Detected Portuguese language, assuming Brazil');
                        } else if (browserLang.startsWith('es')) {
                            countryCode = 'ES';
                            console.log('Detected Spanish language, assuming Spain');
                        } else {
                            countryCode = 'US';
                            console.log('Using default US location');
                        }
                    } else {
                        // Use ONLY browser language - NO IP detection
                        const browserLang = navigator.language || navigator.userLanguage;
                        console.log('🌍 Browser language detected:', browserLang);
                        
                        // Set language and currency based ONLY on browser language
                        if (browserLang.startsWith('pt-PT') || browserLang.startsWith('pt_PT')) {
                            this.userLanguage = 'pt';
                            this.userCountry = 'PT';
                            this.userCurrency = 'EUR';
                            console.log('🇵🇹 Portuguese (Portugal) detected → EUR');
                        } else if (browserLang.startsWith('pt-BR') || browserLang.startsWith('pt_BR')) {
                            this.userLanguage = 'pt';
                            this.userCountry = 'BR';
                            this.userCurrency = 'BRL';
                            console.log('🇧🇷 Portuguese (Brazil) detected → BRL');
                        } else if (browserLang.startsWith('pt')) {
                            // Generic Portuguese - default to USD (for Angola and other Portuguese-speaking countries)
                            this.userLanguage = 'pt';
                            this.userCountry = 'AO'; // Angola
                            this.userCurrency = 'USD';
                            console.log('🇦🇴 Generic Portuguese detected → USD (Angola/International)');
                        } else {
                            this.userLanguage = 'en';
                            this.userCountry = 'US';
                            this.userCurrency = 'USD';
                            console.log('🇺🇸 English detected → USD');
                        }
                    }
                    
                    this.userCountry = countryCode;
                    
                    const countryToCurrency = {
                        'BR': 'BRL',
                        'US': 'USD', 'CA': 'USD', 'MX': 'USD', 'AR': 'USD', 'CL': 'USD', 'CO': 'USD', 'PE': 'USD', 'UY': 'USD', 'BO': 'USD', 'PY': 'USD', 'VE': 'USD', 'EC': 'USD', 'GY': 'USD', 'SR': 'USD', 'GF': 'USD', 'FK': 'USD', 'BZ': 'USD', 'GT': 'USD', 'HN': 'USD', 'SV': 'USD', 'NI': 'USD', 'CR': 'USD', 'PA': 'USD', 'CU': 'USD', 'JM': 'USD', 'HT': 'USD', 'DO': 'USD', 'PR': 'USD', 'VI': 'USD', 'AG': 'USD', 'BB': 'USD', 'DM': 'USD', 'GD': 'USD', 'KN': 'USD', 'LC': 'USD', 'VC': 'USD', 'TT': 'USD', 'BS': 'USD', 'AU': 'USD', 'NZ': 'USD', 'JP': 'USD', 'KR': 'USD', 'SG': 'USD', 'HK': 'USD', 'TW': 'USD', 'TH': 'USD', 'MY': 'USD', 'ID': 'USD', 'PH': 'USD', 'VN': 'USD', 'IN': 'USD', 'PK': 'USD', 'BD': 'USD', 'LK': 'USD', 'MM': 'USD', 'KH': 'USD', 'LA': 'USD', 'BN': 'USD', 'FJ': 'USD', 'PG': 'USD', 'SB': 'USD', 'VU': 'USD', 'NC': 'USD', 'PF': 'USD', 'WS': 'USD', 'TO': 'USD', 'KI': 'USD', 'TV': 'USD', 'NR': 'USD', 'MH': 'USD', 'FM': 'USD', 'PW': 'USD', 'AS': 'USD', 'GU': 'USD', 'MP': 'USD', 'CK': 'USD', 'NU': 'USD', 'TK': 'USD', 'WF': 'USD', 'NF': 'USD', 'PN': 'USD', 'GS': 'USD', 'SH': 'USD', 'AC': 'USD', 'TA': 'USD', 'IO': 'USD', 'CX': 'USD', 'CC': 'USD', 'HM': 'USD', 'AQ': 'USD', 'BV': 'USD', 'TF': 'USD', 'UM': 'USD',
                        'DE': 'USD', 'FR': 'USD', 'IT': 'USD', 'ES': 'USD', 'NL': 'USD', 'BE': 'USD', 'AT': 'USD', 'PT': 'BRL', 'IE': 'USD', 'FI': 'USD', 'GR': 'USD', 'LU': 'USD', 'MT': 'USD', 'CY': 'USD', 'SK': 'USD', 'SI': 'USD', 'EE': 'USD', 'LV': 'USD', 'LT': 'USD', 'AD': 'USD', 'MC': 'USD', 'SM': 'USD', 'VA': 'USD', 'ME': 'USD', 'XK': 'USD'
                    };
                    
                    this.userCurrency = countryToCurrency[this.userCountry] || 'USD';
                    console.log(`Final detection - Country: ${this.userCountry}, Currency: ${this.userCurrency}`);
                    
                } catch (error) {
                    console.error('Error in location detection:', error);
                    this.userCurrency = 'USD';
                    this.userCountry = 'Unknown';
                }
            }
            
            translateContent(contentKey) {
                // Detect user language
                const browserLang = navigator.language || navigator.userLanguage;
                const userLanguage = browserLang.startsWith('pt') ? 'pt' : 'en';
                // Portuguese speakers (Brazil, Portugal, etc.) get BRL translations
                const languageKey = userLanguage === 'pt' ? 'BRL' : 'USD';
                
                console.log(`🌍 Translating ${contentKey}: userLanguage=${userLanguage}, languageKey=${languageKey}`);
                
                const translations = {
                    'checkout_title': {
                        'USD': 'Checkout',
                        'BRL': 'Finalizar Compra'
                    },
                    'product_info': {
                        'USD': 'Product Information',
                        'BRL': 'Informações do Produto',
                        'EUR': 'Informações do Produto'
                    },
                    'customer_info': {
                        'USD': 'Customer Information',
                        'BRL': 'Informações do Cliente',
                        'EUR': 'Informações do Cliente'
                    },
                    'payment_info': {
                        'USD': 'Payment Information',
                        'BRL': 'Informações de Pagamento',
                        'EUR': 'Informações de Pagamento'
                    },
                    'order_summary': {
                        'USD': 'Order Summary',
                        'BRL': 'Resumo do Pedido',
                        'EUR': 'Resumo do Pedido'
                    },
                    'first_name': {
                        'USD': 'First Name',
                        'BRL': 'Nome',
                        'EUR': 'Nome'
                    },
                    'last_name': {
                        'USD': 'Last Name',
                        'BRL': 'Sobrenome',
                        'EUR': 'Sobrenome'
                    },
                    'email': {
                        'USD': 'Email',
                        'BRL': 'E-mail',
                        'EUR': 'E-mail'
                    },
                    'phone': {
                        'USD': 'Phone',
                        'BRL': 'Telefone',
                        'EUR': 'Telefone'
                    },
                    'address': {
                        'USD': 'Address',
                        'BRL': 'Endereço',
                        'EUR': 'Endereço'
                    },
                    'city': {
                        'USD': 'City',
                        'BRL': 'Cidade',
                        'EUR': 'Cidade'
                    },
                    'state': {
                        'USD': 'State',
                        'BRL': 'Estado',
                        'EUR': 'Estado'
                    },
                    'zip_code': {
                        'USD': 'Zip Code',
                        'BRL': 'CEP',
                        'EUR': 'CEP'
                    },
                    'country': {
                        'USD': 'Country',
                        'BRL': 'País',
                        'EUR': 'País'
                    },
                    'payment_method': {
                        'USD': 'Payment Method',
                        'BRL': 'Método de Pagamento',
                        'EUR': 'Método de Pagamento'
                    },
                    'observations': {
                        'USD': 'Observations',
                        'BRL': 'Observações',
                        'EUR': 'Observações'
                    },
                    'total': {
                        'USD': 'Total',
                        'BRL': 'Total',
                        'EUR': 'Total'
                    },
                    'checkout_button': {
                        'USD': 'Complete Purchase',
                        'BRL': 'Finalizar Compra',
                        'EUR': 'Finalizar Compra'
                    },
                    'required_fields': {
                        'USD': 'Please fill in all required fields.',
                        'BRL': 'Por favor, preencha todos os campos obrigatórios.',
                        'EUR': 'Por favor, preencha todos os campos obrigatórios.'
                    },
                    'order_success': {
                        'USD': 'Order completed successfully!',
                        'BRL': 'Pedido realizado com sucesso!',
                        'EUR': 'Pedido realizado com sucesso!'
                    },
                    // Product name translations
                    'product_phoera_foundation': {
                        'USD': 'Foundation 2-Pack',
                        'BRL': 'Kit 2 Bases PHOERA',
                        'EUR': 'Kit 2 Bases PHOERA'
                    },
                    // Color choice translations
                    'choice_102_nude': {
                        'USD': 'Nude',
                        'BRL': 'Nude',
                        'EUR': 'Nude'
                    },
                    'choice_103_warm_peach': {
                        'USD': 'Warm Peach',
                        'BRL': 'Pêssego Quente',
                        'EUR': 'Pêssego Quente'
                    },
                    'choice_104_buff_beige': {
                        'USD': 'Buff Beige',
                        'BRL': 'Bege Suave',
                        'EUR': 'Bege Suave'
                    },
                    'choice_105_sand': {
                        'USD': 'Sand',
                        'BRL': 'Areia',
                        'EUR': 'Areia'
                    },
                    'choice_108_tan': {
                        'USD': 'Tan',
                        'BRL': 'Bronzeado',
                        'EUR': 'Bronzeado'
                    },
                    'choice_109_mocha': {
                        'USD': 'Mocha',
                        'BRL': 'Mocha',
                        'EUR': 'Mocha'
                    },
                    'choice_warm_peach': {
                        'USD': 'Warm Peach',
                        'BRL': 'Pêssego Quente',
                        'EUR': 'Warm Peach'
                    },
                    'choice_warm_sun': {
                        'USD': 'Warm Sun',
                        'BRL': 'Sol Quente',
                        'EUR': 'Sol Quente'
                    },
                    // Combination choice translations
                    'choice_101_101': {
                        'USD': 'Porcelain + Porcelain',
                        'BRL': 'Porcelana + Porcelana',
                        'EUR': 'Porcelana + Porcelana'
                    },
                    'choice_101_102': {
                        'USD': 'Porcelain + Nude',
                        'BRL': 'Porcelana + Nude',
                        'EUR': 'Porcelana + Nude'
                    },
                    'choice_102_104': {
                        'USD': 'Nude + Buff Beige',
                        'BRL': 'Nude + Bege Suave',
                        'EUR': 'Nude + Bege Suave'
                    },
                    'choice_102_103': {
                        'USD': 'Nude + Warm Peach',
                        'BRL': 'Nude + Pêssego Quente',
                        'EUR': 'Nude + Pêssego Quente'
                    },
                    'choice_103_104': {
                        'USD': 'Warm Peach + Buff Beige',
                        'BRL': 'Pêssego Quente + Bege Suave',
                        'EUR': 'Pêssego Quente + Bege Suave'
                    },
                    'choice_104_105': {
                        'USD': 'Buff Beige + Sand',
                        'BRL': 'Bege Suave + Areia',
                        'EUR': 'Bege Suave + Areia'
                    },
                    'choice_105_106': {
                        'USD': 'Sand + Warm Sun',
                        'BRL': 'Areia + Sol Quente',
                        'EUR': 'Areia + Sol Quente'
                    },
                    'choice_108_109': {
                        'USD': 'Tan + Mocha',
                        'BRL': 'Bronzeado + Mocha',
                        'EUR': 'Bronzeado + Mocha'
                    },
                    // Offer interface translations
                    'choose_offer': {
                        'USD': 'Choose Your Offer',
                        'BRL': 'Choose Your Offer',
                        'EUR': 'Choose Your Offer'
                    },
                    'basic_offer': {
                        'USD': 'Basic Offer',
                        'BRL': 'Oferta Básica',
                        'EUR': 'Oferta Básica'
                    },
                    'premium_offer': {
                        'USD': 'Premium Offer',
                        'BRL': 'Oferta Premium',
                        'EUR': 'Oferta Premium'
                    },
                    'choose_color': {
                        'USD': 'Choose Color',
                        'BRL': 'Choose Color',
                        'EUR': 'Choose Color'
                    },
                    'discount_badge': {
                        'USD': '50% OFF',
                        'BRL': '50% DESCONTO',
                        'EUR': '50% OFF'
                    },
                    // Offer descriptions
                    'offer_basic_description': {
                        'USD': 'Foundation failing in the middle of the day? With 2 PHOERA units you guarantee high coverage, natural finish and flawless skin for much longer.',
                        'BRL': 'Base falhando no meio do dia? Com 2 unidades da PHOERA você garante alta cobertura, acabamento natural e pele impecável por muito mais tempo.',
                        'EUR': 'Foundation failing in the middle of the day? With 2 PHOERA units you guarantee high coverage, natural finish and flawless skin for much longer.'
                    },
                    'offer_premium_description': {
                        'USD': 'Tired of brushes that shed bristles or leave your makeup streaky? The 8pcs Makeup Brush kit brings soft and precise brushes to apply foundation, powder, eyeshadow and blush with professional finish every day.',
                        'BRL': 'Chega de sofrer com pincéis que soltam cerdas ou deixam a make manchada. O Kit 8 Pincéis de Maquiagem traz pincéis macios e precisos para aplicar base, pó, sombra e blush com acabamento profissional todos os dias.',
                        'EUR': 'Tired of brushes that shed bristles or leave your makeup streaky? The 8pcs Makeup Brush kit brings soft and precise brushes to apply foundation, powder, eyeshadow and blush with professional finish every day.'
                    },
                    'offer_complete_description': {
                        'USD': 'Tired of makeup that cracks, runs or doesn\'t last all day? The 2 Pack PHOERA Primer prepares the skin, closes pores and ensures a smooth, even base for flawless, long-lasting makeup.',
                        'BRL': 'Cansada da maquiagem que craquela, escorre ou não dura o dia todo? O Kit 2 Primers PHOERA prepara a pele, fecha os poros e garante uma base lisa e uniforme para uma make impecável e de longa duração.',
                        'EUR': 'Tired of makeup that cracks, runs or doesn\'t last all day? The 2 Pack PHOERA Primer prepares the skin, closes pores and ensures a smooth, even base for flawless, long-lasting makeup.'
                    },
                    'confirmation_email': {
                        'USD': 'You will receive a confirmation email shortly.',
                        'BRL': 'Você receberá um e-mail de confirmação em breve.',
                        'EUR': 'You will receive a confirmation email shortly.'
                    }
                };
                
                return translations[contentKey] ? 
                    translations[contentKey][languageKey] || 
                    translations[contentKey]['USD'] : 
                    contentKey;
            }
            
            updatePageContent() {
                try {
                    // Update page title
                    const pageTitle = document.querySelector('title');
                    if (pageTitle) {
                        pageTitle.textContent = `${this.translateContent('checkout_title')} - 2 Pack PHOERA Foundation | 67 Beauty Hub`;
                    }
                    
                    // Update form labels
                    const firstNameLabel = document.querySelector('label[for="firstName"]');
                    if (firstNameLabel) firstNameLabel.textContent = this.translateContent('first_name');
                    
                    const lastNameLabel = document.querySelector('label[for="lastName"]');
                    if (lastNameLabel) lastNameLabel.textContent = this.translateContent('last_name');
                    
                    const emailLabel = document.querySelector('label[for="email"]');
                    if (emailLabel) emailLabel.textContent = this.translateContent('email');
                    
                    const phoneLabel = document.querySelector('label[for="phone"]');
                    if (phoneLabel) phoneLabel.textContent = this.translateContent('phone');
                    
                    const addressLabel = document.querySelector('label[for="address"]');
                    if (addressLabel) addressLabel.textContent = this.translateContent('address');
                    
                    const cityLabel = document.querySelector('label[for="city"]');
                    if (cityLabel) cityLabel.textContent = this.translateContent('city');
                    
                    const stateLabel = document.querySelector('label[for="state"]');
                    if (stateLabel) stateLabel.textContent = this.translateContent('state');
                    
                    const zipCodeLabel = document.querySelector('label[for="zipCode"]');
                    if (zipCodeLabel) zipCodeLabel.textContent = this.translateContent('zip_code');
                    
                    const countryLabel = document.querySelector('label[for="country"]');
                    if (countryLabel) countryLabel.textContent = this.translateContent('country');
                    
                    const paymentLabel = document.querySelector('label[for="paymentMethod"]');
                    if (paymentLabel) paymentLabel.textContent = this.translateContent('payment_method');
                    
                    const observationsLabel = document.querySelector('label[for="observations"]');
                    if (observationsLabel) observationsLabel.textContent = this.translateContent('observations');
                    
                    // Update placeholders
                    const firstNameInput = document.getElementById('firstName');
                    if (firstNameInput) firstNameInput.placeholder = this.translateContent('first_name');
                    
                    const lastNameInput = document.getElementById('lastName');
                    if (lastNameInput) lastNameInput.placeholder = this.translateContent('last_name');
                    
                    const emailInput = document.getElementById('email');
                    if (emailInput) emailInput.placeholder = this.translateContent('email');
                    
                    
                    const observationsInput = document.getElementById('observations');
                    if (observationsInput) observationsInput.placeholder = this.translateContent('observations');
                    
                    // Update checkout button
                    const checkoutButton = document.querySelector('button[onclick="processCheckout()"]');
                    if (checkoutButton) checkoutButton.textContent = this.translateContent('checkout_button');
                    
                    // Update product title
                    const productTitle = document.querySelector('h3[data-translate-key="product_phoera_foundation"]');
                    if (productTitle) productTitle.textContent = this.translateContent('product_phoera_foundation');
                    
                    // Update offer elements
                    const chooseOfferTitle = document.querySelector('h3[data-translate-key="choose_offer"]');
                    if (chooseOfferTitle) {
                        chooseOfferTitle.innerHTML = `<i class="fas fa-gift"></i> ${this.translateContent('choose_offer')}`;
                    }
                    
                    const offerProductTitle = document.querySelector('h4[data-translate-key="product_phoera_foundation"]');
                    if (offerProductTitle) offerProductTitle.textContent = this.translateContent('product_phoera_foundation');
                    
                    const discountBadge = document.querySelector('.discount[data-translate-key="discount_badge"]');
                    if (discountBadge) discountBadge.textContent = this.translateContent('discount_badge');
                    
                    const offerDescription = document.querySelector('.description[data-translate-key="offer_basic_description"]');
                    if (offerDescription) offerDescription.textContent = this.translateContent('offer_basic_description');
                    
                    const premiumDescription = document.querySelector('.description[data-translate-key="offer_premium_description"]');
                    if (premiumDescription) premiumDescription.textContent = this.translateContent('offer_premium_description');
                    
                    const completeDescription = document.querySelector('.description[data-translate-key="offer_complete_description"]');
                    if (completeDescription) completeDescription.textContent = this.translateContent('offer_complete_description');
                    
                    // Update order summary title
                    const orderSummaryTitle = document.querySelector('span[data-translate-key="order_summary"]');
                    if (orderSummaryTitle) orderSummaryTitle.textContent = this.translateContent('order_summary');
                    
                    // Update color choice labels
                    const colorChoices = document.querySelectorAll('.small-checkbox-label[data-translate-key]');
                    colorChoices.forEach(choice => {
                        const translateKey = choice.getAttribute('data-translate-key');
                        if (translateKey) {
                            choice.textContent = this.translateContent(translateKey);
                        }
                    });
                    
                    console.log('Checkout page content updated successfully');
                    
                } catch (error) {
                    console.error('Error updating checkout page content:', error);
                }
            }
        }
        
        // Sistema CheckoutTranslator removido - usando sistema global unificado
        
        // Payment method control
        function setupPaymentMethodControl() {
            const paymentMethodSelect = document.getElementById('paymentMethod');
            const paypalButton = document.getElementById('paypal-payment-button');
            const pixInfo = document.getElementById('pix-payment-info');
            
            if (paymentMethodSelect) {
                paymentMethodSelect.addEventListener('change', function() {
                    const selectedMethod = this.value;
                    
                    // Hide all payment options first
                    if (paypalButton) paypalButton.style.display = 'none';
                    if (pixInfo) pixInfo.style.display = 'none';
                    
                    // Show selected payment method
                    switch(selectedMethod) {
                        case 'paypal':
                            if (paypalButton) paypalButton.style.display = 'block';
                            break;
                        case 'pix':
                            if (pixInfo) pixInfo.style.display = 'block';
                            initializePIXForOrder();
                            break;
                    }
                });
            }
        }
        
        // Process checkout function
        function processCheckout() {
            const email = document.getElementById('email').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            const observations = document.getElementById('observations').value;

            if (!email || !paymentMethod) {
                alert('Please fill in email and select a payment method.');
                return;
            }
            
            // Handle PIX payment
            if (paymentMethod === 'pix') {
                handlePIXPayment(email, observations);
                return;
            }
            
            // Handle other payment methods
            alert('Payment method not implemented yet.');
        }
        

        // Initialize PIX system when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setupPaymentMethodControl();
            initializePIXSystem();
            setupPIXForBrazilOnly();
        });
    </script>
    
    <!-- Footer Copyright -->
    <footer style="text-align: center; padding: 20px; background: #f8f9fa; border-top: 1px solid #e9ecef; margin-top: 40px;">
        <p style="color: #666; font-size: 14px; margin: 0;">
            © 2025 67 Beauty Hub - All rights reserved
        </p>
    </footer>


</body>
</html>

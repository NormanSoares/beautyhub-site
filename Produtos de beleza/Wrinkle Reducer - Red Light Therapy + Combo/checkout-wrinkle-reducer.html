<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Wrinkle Reducer - Red Light Therapy | 67 Beauty Hub</title>
    <link rel="stylesheet" href="../../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=Ab2ftZVJCplquKwOY1cWgvWMivADwMhbUs-OhehwO4hVh_VW9lS87qLkRUVD39yEeoh7YGXzBeuq1Dlh&currency=USD&intent=capture"></script>
    <!-- AliExpress Integration -->
    <script src="../../js/aliexpress-integration.js"></script>
    <!-- Review System -->
    <script src="../../js/review-system.js"></script>
    <style>
        body {
            background: #f0e6d2;
        }
        
        .checkout-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            margin-top: 50px;
            min-height: 100vh;
        }
        
        .checkout-layout {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .unified-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            align-items: start;
            min-height: auto;
        }
        
        .checkout-bottom {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            align-items: start;
        }
        
        .form-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        
        .checkout-header {
            text-align: center;
            margin-bottom: 40px;
            grid-column: 1 / -1;
        }
        
        .checkout-header h1 {
            color: #d4af37;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        /* Flag Dropdown Styles */
        .flag-dropdown-container {
            position: relative;
            display: inline-block;
            margin-left: 20px;
        }
        
        .flag-dropdown {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            background: white;
            border: 2px solid #d4af37;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.1);
        }
        
        .flag-dropdown:hover {
            border-color: #b8941f;
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.2);
        }
        
        .selected-flag {
            font-size: 1.5rem;
            user-select: none;
        }
        
        .dropdown-arrow {
            color: #d4af37;
            font-size: 0.9rem;
            transition: transform 0.3s ease;
        }
        
        .flag-dropdown.open .dropdown-arrow {
            transform: rotate(180deg);
        }
        
        .flag-dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #d4af37;
            border-top: none;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.2);
            z-index: 1000;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .flag-dropdown-menu.open {
            max-height: 400px;
            overflow-y: auto;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* Internet Explorer 10+ */
        }
        
        .flag-dropdown-menu.open::-webkit-scrollbar {
            display: none; /* WebKit browsers (Chrome, Safari, Edge) */
        }
        
        .flag-option {
            padding: 12px 20px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .flag-option:hover {
            background-color: #fff9e6;
        }
        
        .flag-option:last-child {
            border-radius: 0 0 6px 6px;
        }
        
        @media (max-width: 768px) {
            .flag-dropdown-container {
                margin-top: 20px;
            }
            
            .flag-dropdown {
                padding: 10px 15px;
            }
            
            .selected-flag {
                font-size: 1.3rem;
            }
        }
        
        .offer-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .product-summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .product-image {
            max-width: 100%;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            margin: 0 auto 20px;
            display: block;
            max-height: 400px;
            object-fit: contain;
        }
        
        .product-details h3 {
            color: #333;
            font-size: 1.8rem;
            margin-bottom: 15px;
        }
        
        .product-details p {
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .offer-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
            margin-top: 20px;
        }
        
        .offer-option {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 15px;
        }
        
        .offer-option:hover {
            border-color: #d4af37;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.15);
        }
        
        .offer-option.selected {
            border-color: #d4af37;
            background: linear-gradient(135deg, #fff9e6, #fff);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.2);
            transform: translateY(-2px);
        }
        
        .offer-checkbox {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 20px;
            height: 20px;
            accent-color: #d4af37;
            cursor: pointer;
        }
        
        .offer-option.has-checkbox {
            padding-left: 50px;
        }
        
        .offer-option.has-checkbox .option-header {
            margin-left: 10px;
        }
        
        /* Estilo específico para oferta básica sem checkbox */
        .offer-option[data-option="basic"] {
            padding-left: 20px;
        }
        
        .offer-option[data-option="basic"] .option-header {
            margin-left: 0;
        }
        
        .offer-image-container {
            text-align: left;
            margin: 15px 0;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .offer-image {
            max-width: 120px;
            max-height: 120px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            object-fit: contain;
            width: 100%;
            height: auto;
            flex-shrink: 0;
        }
        
        .offer-description-container {
            flex: 1;
        }
        
        
        /* Estilos para as pequenas checkboxes */
        .small-checkboxes-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        
        .small-checkbox-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }
        
        .small-checkbox-item:hover {
            background-color: #e9ecef;
        }
        
        .small-checkbox-label {
            font-size: 11px;
            color: #495057;
            margin: 0;
            line-height: 1.2;
            flex: 1;
            min-width: 0;
            word-break: break-word;
        }
        
        /* Estilos para as imagens das mini checkboxes */
        .small-checkbox-image {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            overflow: hidden;
            margin-right: 8px;
            flex-shrink: 0;
            border: 2px solid #e9ecef;
            transition: border-color 0.2s ease;
        }
        
        .small-checkbox-item:hover .small-checkbox-image {
            border-color: #d4af37;
        }
        
        .small-checkbox:checked ~ .small-checkbox-image {
            border-color: #d4af37;
            box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
        }
        
        .small-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        .small-checkbox-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px;
            border-radius: 6px;
            transition: all 0.2s ease;
            flex-direction: row;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .small-checkbox-item:hover {
            background-color: #e9ecef;
            border-color: #d4af37;
        }
        
        .small-checkbox-item.selected {
            background-color: #fff9e6;
            border-color: #d4af37;
            box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
        }
        
        .small-checkbox-item.selected .small-checkbox-label {
            color: #d4af37;
            font-weight: 500;
        }
        
        /* Estilos para a galeria de produtos */
        .product-gallery-section {
            margin: 20px 0;
            width: 100%;
            text-align: center;
            grid-column: 1 / -1; /* Ocupa toda a largura do grid */
        }
        
        .simple-gallery {
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }
        
        .gallery-main {
            position: relative;
            width: 100%;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .gallery-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(212, 175, 55, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .gallery-nav-btn.prev-btn {
            left: 15px;
        }
        
        .gallery-nav-btn.next-btn {
            right: 15px;
        }
        
        .gallery-nav-btn:hover {
            background: rgba(184, 148, 31, 0.95);
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }
        
        .gallery-nav-btn:disabled {
            background: rgba(204, 204, 204, 0.7);
            cursor: not-allowed;
            transform: translateY(-50%);
            box-shadow: none;
        }
        
        .gallery-main-image {
            width: 100%;
            height: auto;
            max-height: 600px;
            object-fit: contain;
            display: block;
            transition: transform 0.5s ease-in-out, opacity 0.3s ease;
        }
        
        .gallery-main-image.slide-left {
            transform: translateX(-100%);
            opacity: 0;
        }
        
        .gallery-main-image.slide-right {
            transform: translateX(100%);
            opacity: 0;
        }
        
        .gallery-main-image.slide-in-left {
            transform: translateX(100%);
            opacity: 0;
            animation: slideInFromRight 0.5s ease-in-out forwards;
        }
        
        .gallery-main-image.slide-in-right {
            transform: translateX(-100%);
            opacity: 0;
            animation: slideInFromLeft 0.5s ease-in-out forwards;
        }
        
        @keyframes slideInFromRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideInFromLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .gallery-caption {
            padding: 20px;
            text-align: center;
            font-weight: 600;
            color: #333;
            background: white;
            border-top: 1px solid #e9ecef;
            font-size: 16px;
        }
        
        .gallery-indicators {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        
        .gallery-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .gallery-indicator.active {
            background: #d4af37;
            transform: scale(1.2);
        }
        
        .gallery-indicator:hover {
            background: #b8941f;
        }
        
        /* Responsivo para galeria */
        @media (max-width: 768px) {
            .gallery-nav-btn {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
            
            .gallery-nav-btn.prev-btn {
                left: 10px;
            }
            
            .gallery-nav-btn.next-btn {
                right: 10px;
            }
            
            .gallery-main {
                width: 100%;
            }
            
            .gallery-main-image {
                height: auto;
                max-height: 400px;
            }
            
            .product-gallery-section {
                margin: 20px 0;
            }
        }
        
        .offer-option .option-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
            flex-wrap: nowrap;
            gap: 15px;
        }
        
        .offer-option h4 {
            color: #333;
            font-size: 1.3rem;
            margin: 0;
            white-space: normal;
            flex-shrink: 1;
            line-height: 1.3;
            word-wrap: break-word;
        }
        
        .offer-option .price {
            font-size: 1.5rem;
            font-weight: 700;
            color: #d4af37;
            white-space: nowrap;
            flex-shrink: 0;
            align-self: flex-start;
            margin-top: 0;
        }
        
        .offer-option .description {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 10px;
        }
        
        .offer-option .discount {
            background: #d4af37;
            color: white;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            position: absolute;
            top: -8px;
            right: -8px;
        }
        
        .product-summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .product-image {
            width: 300px;
            height: 400px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            margin: 0 auto 20px;
            display: block;
            object-fit: cover;
        }
        
        .product-details h3 {
            color: #333;
            font-size: 1.8rem;
            margin-bottom: 15px;
        }
        
        .product-details p {
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .offer-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .offer-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
            margin-top: 20px;
        }
        
        .offer-option {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 15px;
        }
        
        .offer-option:hover {
            border-color: #d4af37;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.15);
        }
        
        .offer-option.selected {
            border-color: #d4af37;
            background: linear-gradient(135deg, #fff9e6, #fff);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.2);
            transform: translateY(-2px);
        }
        
        .offer-option .option-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
            flex-wrap: nowrap;
            gap: 15px;
        }
        
        .offer-option h4 {
            color: #333;
            font-size: 1.3rem;
            margin: 0;
            white-space: normal;
            flex-shrink: 1;
            line-height: 1.3;
            word-wrap: break-word;
        }
        
        .offer-option .price {
            font-size: 1.5rem;
            font-weight: 700;
            color: #d4af37;
            white-space: nowrap;
            flex-shrink: 0;
            align-self: flex-start;
            margin-top: 0;
        }
        
        .offer-option .description {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 10px;
        }
        
        .offer-option .discount {
            background: #d4af37;
            color: white;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            position: absolute;
            top: -8px;
            right: -8px;
        }
        
        .offer-checkbox {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 20px;
            height: 20px;
            accent-color: #d4af37;
            cursor: pointer;
        }
        
        .offer-option.has-checkbox {
            padding-left: 50px;
        }
        
        .offer-option.has-checkbox .option-header {
            margin-left: 10px;
        }
        
        .offer-image-container {
            text-align: left;
            margin: 15px 0;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .offer-image {
            max-width: 120px;
            max-height: 120px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            object-fit: contain;
            width: 100%;
            height: auto;
            flex-shrink: 0;
        }
        
        .offer-description-container {
            flex: 1;
        }
        
        .summary-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 20px;
            position: sticky;
            top: 20px;
            margin-bottom: 20px;
        }
        
        .summary-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.4rem;
            text-align: center;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 10px;
        }
        
        .form-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3rem;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-section h3 i {
            color: #d4af37;
            font-size: 1.2rem;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            flex: 1;
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
            color: #333;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
            transform: translateY(-1px);
        }
        
        .form-group input:hover,
        .form-group select:hover,
        .form-group textarea:hover {
            border-color: #d4af37;
        }
        
        .checkout-summary {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .summary-row.total {
            border-top: 2px solid #d4af37;
            padding-top: 15px;
            margin-top: 15px;
            font-size: 1.2rem;
            font-weight: 700;
            color: #d4af37;
        }
        
        .checkout-btn {
            width: 100%;
            background: linear-gradient(135deg, #d4af37, #b8941f);
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
        }
        
        .checkout-btn:active {
            transform: translateY(0);
        }
        
        
        .back-link {
            text-align: center;
            margin-top: 20px;
        }
        
        .back-link a {
            color: #d4af37;
            text-decoration: none;
            font-weight: 500;
        }
        
        .back-link a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            .checkout-container {
                padding: 20px 10px;
                margin-top: 20px;
            }
            
            .checkout-layout {
                gap: 20px;
            }
            
            .unified-section {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 20px;
            }
            
            .checkout-bottom {
                grid-template-columns: 1fr;
            gap: 20px;
        }
        
            .form-row {
            flex-direction: column;
            }
            
            .form-group {
                width: 100%;
            }
            
            .product-summary {
                flex-direction: column;
                text-align: center;
            }
            
            .offer-options {
                gap: 15px;
            }
            
            .offer-option {
                padding: 15px;
            }
            
            .summary-section {
                position: static;
                order: -1;
            }
            
            .offer-section, .summary-section, .form-section {
                padding: 20px;
            }
            
            .checkout-header h1 {
                font-size: 2rem;
            }
            
            .product-image {
                max-width: 200px;
                height: auto;
            }
            
            .offer-option .option-header {
                flex-wrap: nowrap;
                gap: 10px;
                align-items: flex-start;
            }
            
            .offer-option h4 {
                font-size: 1.1rem;
                flex-shrink: 1;
                line-height: 1.2;
            }
            
            .offer-option .price {
                font-size: 1.3rem;
                flex-shrink: 0;
                align-self: flex-start;
            }
        }
        
        /* Reviews Section Styles */
        .reviews-section {
            background: white url('Background das reviews.jpg') center center / cover no-repeat; /* Fixed path */
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 40px;
            margin: 60px auto 40px;
            position: relative;
            max-width: 1200px;
        }
        
        .reviews-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.85);
            border-radius: 15px;
            z-index: 1;
        }
        
        .reviews-section > * {
            position: relative;
            z-index: 2;
        }

        .review-item {
            position: static !important;
            z-index: auto !important;
        }

        .reviews-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .reviews-header h3 {
            color: #d4af37;
            font-size: 2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .reviews-header h3 i {
            color: #d4af37;
            font-size: 1.8rem;
        }

        .reviews-header p {
            color: #666;
            font-size: 1.1rem;
        }

        .reviews-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .review-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .review-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(212, 175, 55, 0.15);
            border-color: #d4af37;
        }

        .review-image {
            text-align: center;
            margin-bottom: 20px !important;
            display: block;
        }

        .review-content {
            text-align: center;
        }

        .review-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #d4af37, #b8941f);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid #fff;
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
            margin: 0 auto;
        }

        .review-avatar i {
            font-size: 2.2rem;
            color: white;
        }

        .review-stars {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin-bottom: 15px;
        }

        .review-stars i {
            color: #ffd700;
            font-size: 1.1rem;
        }

        .review-stars i.far {
            color: #ddd;
        }

        .review-text {
            color: #333;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 10px;
            font-style: italic;
            text-align: center;
        }

        .review-author {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .review-author strong {
            color: #333;
            font-size: 1.1rem;
        }

        .review-date {
            color: #888;
            font-size: 0.9rem;
        }

        .review-text::before {
            content: '"';
            font-size: 2rem;
            color: #d4af37;
            opacity: 0.5;
        }

        .review-text::after {
            content: '"';
            font-size: 2rem;
            color: #d4af37;
            opacity: 0.5;
        }

        .review-author {
            text-align: center;
            border-top: 1px solid #e0e0e0;
            padding-top: 15px;
        }

        .review-author strong {
            color: #333;
            font-size: 1.1rem;
            display: block;
            margin-bottom: 5px;
        }

        .review-date {
            color: #666;
            font-size: 0.9rem;
        }


        /* Video specific styles */
        .review-image video:hover {
            transform: scale(1.02);
        }

        .review-image img:hover {
            transform: scale(1.02);
        }


        .video-fallback {
            width: 100%;
            height: 100%;
            background: #f8f9fa;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            color: #666;
            text-align: center;
            padding: 20px;
        }

        /* Remove border-radius when video is in fullscreen */
        video:fullscreen,
        video:-webkit-full-screen,
        video:-moz-full-screen,
        video:-ms-fullscreen {
            border-radius: 0 !important;
        }

        .video-fallback i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #d4af37;
        }

        .video-fallback p {
            margin: 0;
            font-size: 0.9rem;
        }

        .video-fallback p:last-child {
            margin-top: 5px;
            font-size: 0.8rem;
        }

        /* Clickable review styles */
        .clickable-review {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clickable-review:hover {
            background: #f0f0f0;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.2);
        }

        /* Modal styles */
        .review-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 15px;
        }

        .modal-close {
            background: #d4af37;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: #b8941f;
        }

        /* Quantity Controls Styles */
        /* Quantity Button Hover Effects */
        .quantity-btn:hover {
            background: #d4af37 !important;
            color: white !important;
            transform: scale(1.1);
        }

        .quantity-btn:active {
            transform: scale(0.95);
        }

        /* Reviews Mobile Responsiveness */
        @media (max-width: 1024px) {
            .reviews-container {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
            }
        }

        @media (max-width: 768px) {
            .reviews-section {
                padding: 25px 20px;
                margin-bottom: 20px;
            }

            .reviews-header h3 {
                font-size: 1.6rem;
            }

            .reviews-container {
                grid-template-columns: 1fr;
                gap: 20px;
                max-width: 100%;
            }

            .review-item {
                padding: 20px;
            }

            .review-avatar {
                width: 60px;
                height: 60px;
            }

            .review-avatar i {
                font-size: 1.8rem;
            }
        }

        @media (max-width: 480px) {
            .reviews-container {
                gap: 15px;
            }

            .review-item {
                padding: 15px;
            }

            .review-text {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <div class="logo-container">
                    <img src="../../Logo.png" alt="67 Beauty Hub" class="logo-image">
                    <div class="logo-text"><span class="logo-brand">67 BEAUTY HUB</span></div>
                </div>
            </div>
            <ul class="nav-menu">
                <li class="nav-item"><a href="../../index.html" class="nav-link">Início</a></li>
                <li class="nav-item"><a href="../../index.html#products" class="nav-link">Produtos</a></li>
                <li class="nav-item"><a href="../../index.html#about" class="nav-link">Sobre</a></li>
                <li class="nav-item"><a href="../../index.html#contact" class="nav-link">Contato</a></li>
            </ul>
            
            <!-- Flag Dropdown Selector -->
            <div class="flag-dropdown-container">
                <div class="flag-dropdown" onclick="toggleFlagDropdown()">
                    <div class="selected-flag" id="selectedFlag">🇺🇸</div>
                    <i class="fas fa-chevron-down dropdown-arrow"></i>
                </div>
                <div class="flag-dropdown-menu" id="flagDropdownMenu">
                    <!-- Países selecionados -->
                    <div class="flag-option" data-currency="USD" data-flag="🇺🇸" data-country="Estados Unidos">🇺🇸 Estados Unidos</div>
                    <div class="flag-option" data-currency="BRL" data-flag="🇧🇷" data-country="Brasil">🇧🇷 Brasil</div>
                    <div class="flag-option" data-currency="EUR" data-flag="🇵🇹" data-country="Portugal">🇵🇹 Portugal</div>
                </div>
            </div>
        </div>
    </nav>

    <div class="checkout-container">
        <div class="checkout-header">
            <h1><i class="fas fa-shopping-cart"></i> Finalizar Compra</h1>
            <p>Escolha sua oferta e complete seu pedido com segurança</p>
        </div>

        <div class="checkout-layout">
            <div class="unified-section">
                <div class="product-info">
                    <div class="product-summary">
                        <img src="Face and Neck Massager Tool, 7-in-1 Color Red-Light-Therapy Wand for Skin Care.png" alt="Vara de Skincare - Wrinkle Reducer" class="product-image" id="mainProductImage" />
                        <div class="product-details">
                            <h3>Vara de Skincare - Wrinkle Reducer</h3>
                            <p>Elimine rugas e linhas de expressão em casa. Luz vermelha + massagem + 7 funções. Resultados visíveis em 2 semanas.</p>
                        </div>
                    </div>
                </div>

                <div class="offer-section">
                    <h3><i class="fas fa-gift"></i> Escolha sua Oferta</h3>
                    
                    <div class="offer-options">
                        <div class="offer-option has-checkbox selected" data-option="basic">
                            <input type="checkbox" class="offer-checkbox" id="offer-basic" data-option="basic" checked>
                            <div class="option-header">
                                <h4>Vara de Skincare - Wrinkle Reducer</h4>
                                <span class="price" id="basic-price">$17.45</span>
                    </div>
                            <div class="discount">50% OFF</div>
                            <p class="description">Preocupada com rugas e linhas finas? O Redutor de Rugas usa luz vermelha para estimular o colágeno e devolver firmeza à sua pele sem sair de casa.</p>
                            
                            <!-- Sistema de Quantidade -->
                            <div class="quantity-section" style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #e0e0e0;">
                                <h5 style="color: #333; margin-bottom: 10px; font-size: 1rem;">Quantidade:</h5>
                                <div class="quantity-controls" style="display: flex; align-items: center; gap: 15px; justify-content: center;">
                                    <button type="button" class="quantity-btn" id="decreaseQty" style="width: 40px; height: 40px; border: 2px solid #d4af37; background: white; color: #d4af37; border-radius: 50%; cursor: pointer; font-size: 1.2rem; font-weight: bold; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;">-</button>
                                    <input type="number" id="productQuantity" value="1" min="1" max="10" style="width: 60px; height: 40px; text-align: center; border: 2px solid #d4af37; border-radius: 8px; font-size: 1.1rem; font-weight: 600; color: #333;">
                                    <button type="button" class="quantity-btn" id="increaseQty" style="width: 40px; height: 40px; border: 2px solid #d4af37; background: white; color: #d4af37; border-radius: 50%; cursor: pointer; font-size: 1.2rem; font-weight: bold; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;">+</button>
                                </div>
                                <p style="text-align: center; margin-top: 10px; color: #666; font-size: 0.9rem;">Máximo 10 unidades</p>
                                </div>
                            
                    </div>

                        <div class="offer-option has-checkbox" data-option="premium">
                            <input type="checkbox" class="offer-checkbox" id="offer-premium" data-option="premium">
                            <div class="option-header">
                                <h4>Face Mask Therapy</h4>
                                <span class="price" id="premium-price">$35.36</span>
                        </div>
                            <div class="offer-image-container">
                                <img src="type1 set nobox.png" alt="Face Mask Therapy" class="offer-image">
                                <div class="offer-description-container">
                                    <div class="description">Sua pele cansada e com sinais da idade? A Máscara Facial Anti-Idade hidrata profundamente, reduz linhas finas e devolve o brilho jovem ao rosto.</div>
                        </div>
                        </div>
                        </div>

                    </div>
                </div>

                <!-- Galeria de Imagens -->
                <div class="product-gallery-section">
                <div class="simple-gallery">
                    <div class="gallery-main">
                        <button class="gallery-nav-btn prev-btn" id="prevBtn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <img src="Galeria/516848824_2127249251135000_2813377934115782079_n.jpg" alt="Wrinkle Reducer - Red Light Therapy" class="gallery-main-image" id="galleryMainImage">
                        <button class="gallery-nav-btn next-btn" id="nextBtn">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                    <div class="gallery-indicators" id="galleryIndicators">
                        <!-- Indicadores serão gerados pelo JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Checkout Form -->
            <div class="checkout-bottom">
                <div class="form-section">
                    <h3><i class="fas fa-envelope"></i> Informações de Contato</h3>

                    <div class="form-group">
                        <label for="email">E-mail *</label>
                        <input type="email" id="email" name="email" required placeholder="seu@email.com">
                    </div>

                    <h3><i class="fas fa-credit-card"></i> Método de Pagamento</h3>
                    
                    <div class="form-group">
                        <label for="paymentMethod">Forma de Pagamento *</label>
                        <select id="paymentMethod" name="paymentMethod" required>
                            <option value="">Selecione</option>
                            <option value="paypal">PayPal</option>
                            <option value="pix">PIX</option>
                        </select>
                    </div>

                    <div id="paypal-payment-button" style="display: none;"></div>
                    <div id="pix-payment-info" style="display: none;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border: 2px solid #d4af37; text-align: center;">
                            <h4 style="color: #d4af37; margin-bottom: 15px;"><i class="fas fa-qrcode"></i> Pagamento via PIX</h4>
                            <p style="color: #666; margin-bottom: 15px;">Após confirmar o pedido, você receberá as instruções de pagamento PIX por email.</p>
                            <div style="background: white; padding: 15px; border-radius: 8px; border: 1px solid #ddd;">
                                <strong>Chave PIX:</strong> contato@67beautyhub.com
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="observations">Observações (opcional)</label>
                        <textarea id="observations" name="observations" rows="3" placeholder="Alguma observação especial sobre seu pedido?"></textarea>
                    </div>

                    <button class="checkout-btn" onclick="processCheckout()">
                        <i class="fas fa-lock"></i> Finalizar Pedido
                    </button>
                </div>

                <!-- Order Summary -->
                <div class="summary-section">
                    <h3><i class="fas fa-receipt"></i> Resumo do Pedido</h3>
                    <div class="checkout-summary">
                        <div id="selectedOffers"></div>
                        <div class="summary-row total">
                            <span>Total</span>
                            <span id="totalAmount">$17.45</span>
                    </div>

                        <!-- Currency Selector for Summary -->
                        <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px; text-align: center;">
                            <div>
                                <label style="display: block; color: #555; font-size: 14px; margin-bottom: 5px;">
                                    <i class="fas fa-exchange-alt"></i> Moeda do Resumo
                                </label>
                                <select id="summaryCurrencySelector" style="padding: 8px 12px; border: 2px solid #d4af37; border-radius: 6px; background: white; color: #333; font-size: 14px; width: 100%; max-width: 250px;">
                                    <option value="USD">🇺🇸 Dólar Americano (USD)</option>
                                    <option value="BRL">🇧🇷 Real Brasileiro (BRL)</option>
                                    <option value="EUR">🇪🇺 Euro (EUR)</option>
                                </select>
                            </div>
                        </div>
                        </div>
                        </div>
                        </div>
                    </div>
                </div>

    <!-- Reviews Section (moved to end) -->
    <div class="reviews-section" style="margin: 40px auto; max-width: 1200px; padding: 40px 20px; background-image: url('Background das reviews.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat; border-radius: 15px; position: relative;">
        <div class="reviews-header">
            <h3><i class="fas fa-star"></i> O que nossos clientes estão dizendo</h3>
            <p>Mais de 1.400 clientes satisfeitas com nossos produtos</p>
            
            <!-- Botão para adicionar review -->
            <div style="margin-top: 20px;">
                <button id="addReviewBtn" style="background: #d4af37; color: white; border: none; padding: 12px 24px; border-radius: 25px; font-size: 16px; cursor: pointer; transition: all 0.3s ease;">
                    <i class="fas fa-plus"></i> Adicionar sua Review
                </button>
            </div>
        </div>
        
        <div class="reviews-container">
            <div class="review-item clickable-review" 
                 data-review-id="sarah"
                 data-author="Sarah M."
                 data-date="2 weeks ago"
                 data-stars="4">
                <div class="review-image">
                    <div class="review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                    </div>
                    <p class="review-text">"They gave me a rigid facial mask during a facial, and I was hesitant about buying one, but I liked this model better because it is manageable and very comfortable!! I like using it, first I clean my face well, use it, and then add vitamin C and hyaluronic acid serum, then cream (together or alternate). I've been using it for about 3 weeks, at least 3 times a week. It's still too early to see the benefits, but the day after I use it, my husband tells me I look younger :)"</p>
                    <div class="review-author">
                        <strong>Sarah M.</strong>
                        <span class="review-date">Verified Purchase • 2 weeks ago</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-review-id="jennifer"
                 data-author="Jennifer K."
                 data-date="1 week ago"
                 data-stars="5">
                <div class="review-image">
                    <img src="REviews/The mask is of very high quality, with pleasant material. Thanks to the seller. ❤️ 😌.png" alt="Review Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"The mask is of very high quality, with pleasant material. Thanks to the seller. ❤️ 😌"</p>
                    <div class="review-author">
                        <strong>Jennifer K.</strong>
                        <span class="review-date">Verified Purchase • 1 week ago</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-review-id="amanda"
                 data-author="Amanda R."
                 data-date="3 days ago"
                 data-stars="5">
                <div class="review-image">
                    <img src="REviews/Very very impressed with this product! Packaged well and very high quality.png" alt="Review Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"Very very impressed with this product! Packaged well and very high quality"</p>
                    <div class="review-author">
                        <strong>Amanda R.</strong>
                        <span class="review-date">Verified Purchase • 3 days ago</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-review-id="michelle"
                 data-author="Michelle T."
                 data-date="5 days ago"
                 data-stars="4">
                <div class="review-image">
                    <img src="REviews/The material seems to be of good quality and comfortable to wear, it needs to be.png" alt="Review Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                    </div>
                    <p class="review-text">"The material seems to be of good quality and comfortable to wear, it needs to be charged for 5 hours before it can be used."</p>
                    <div class="review-author">
                        <strong>Michelle T.</strong>
                        <span class="review-date">Verified Purchase • 5 days ago</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-review-id="lisa"
                 data-author="Lisa W."
                 data-date="2 days ago"
                 data-stars="5">
                <div class="review-image">
                    <img src="REviews/Perfect...great packaging, arrived quickly, all LEDs work perfectly. Advice.png" alt="Review Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"Perfect...great packaging, arrived quickly, all LEDs work perfectly. Advice"</p>
                    <div class="review-author">
                        <strong>Lisa W.</strong>
                        <span class="review-date">Verified Purchase • 2 days ago</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-review-id="rachel"
                 data-author="Rachel M."
                 data-date="1 day ago"
                 data-stars="5">
                <div class="review-image">
                    <video controls style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;" preload="metadata">
                        <source src="REviews/Amazon.com- Customer reviews- Face and Neck Massager Tool, 7-in-1 Color Red-Light-Therapy Wand for S.mp4" type="video/mp4">
                        <div class="video-fallback">
                            <i class="fas fa-video"></i>
                            <p>Video Review Available</p>
                            <p>Click to play</p>
                        </div>
                    </video>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"Excellent product! The red light therapy works amazing and the 7-in-1 functionality is incredible. Highly recommend this wand for anyone looking for professional skincare results at home."</p>
                    <div class="review-author">
                        <strong>Rachel M.</strong>
                        <span class="review-date">Verified Purchase • 1 day ago</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Review -->
    <div id="reviewModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; width: 90%; max-height: 90vh; overflow-y: auto;">
            <h3 style="color: #d4af37; margin-bottom: 20px;"><i class="fas fa-star"></i> Adicionar Review</h3>
            <form id="reviewForm">
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Seu Nome:</label>
                    <input type="text" id="reviewerName" required style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Avaliação:</label>
                    <div id="starRating" style="display: flex; gap: 5px; justify-content: center; margin: 10px 0;">
                        <i class="far fa-star" data-rating="1" style="font-size: 2rem; color: #ddd; cursor: pointer; transition: color 0.2s;"></i>
                        <i class="far fa-star" data-rating="2" style="font-size: 2rem; color: #ddd; cursor: pointer; transition: color 0.2s;"></i>
                        <i class="far fa-star" data-rating="3" style="font-size: 2rem; color: #ddd; cursor: pointer; transition: color 0.2s;"></i>
                        <i class="far fa-star" data-rating="4" style="font-size: 2rem; color: #ddd; cursor: pointer; transition: color 0.2s;"></i>
                        <i class="far fa-star" data-rating="5" style="font-size: 2rem; color: #ddd; cursor: pointer; transition: color 0.2s;"></i>
                    </div>
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Sua Review:</label>
                    <textarea id="reviewText" required style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; min-height: 100px; resize: vertical;"></textarea>
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Foto (opcional):</label>
                    <input type="file" id="reviewImage" accept="image/*" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                    <div id="imagePreview" style="margin-top: 10px; text-align: center;"></div>
                </div>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button type="submit" style="background: #d4af37; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Enviar Review</button>
                    <button type="button" id="closeReviewModal" style="background: #666; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Currency System for Checkout
        let currentCurrency = 'USD';
        let summaryCurrency = 'USD'; // Moeda específica para o resumo do pedido
        let currentLanguage = 'en'; // Idioma independente da moeda
        let exchangeRates = {
            'USD': { symbol: '$', rate: 1, locale: 'en-US', currency: 'USD' },
            'BRL': { symbol: 'R$', rate: 5.20, locale: 'pt-BR', currency: 'BRL' },
            'EUR': { symbol: '€', rate: 0.85, locale: 'de-DE', currency: 'EUR' },
            'AOA': { symbol: 'Kz', rate: 920, locale: 'pt-AO', currency: 'AOA' }
        };

        // Toggle flag dropdown
        function toggleFlagDropdown() {
            const dropdown = document.querySelector('.flag-dropdown');
            const menu = document.getElementById('flagDropdownMenu');
            
            dropdown.classList.toggle('open');
            menu.classList.toggle('open');
        }
        
        // Select flag option
        function selectFlagOption(currency, flag) {
            const selectedFlag = document.getElementById('selectedFlag');
            selectedFlag.textContent = flag;
            
            // Close dropdown
            const dropdown = document.querySelector('.flag-dropdown');
            const menu = document.getElementById('flagDropdownMenu');
            dropdown.classList.remove('open');
            menu.classList.remove('open');
            
            // Change currency
            changeMainCurrency(currency);
        }
        
        // Change main currency (affects everything including summary)
        function changeMainCurrency(currencyCode) {
            currentCurrency = currencyCode;
            
            // Update all prices including summary
            updateCurrencyDisplay();
            
            // Save selection to localStorage
            localStorage.setItem('selectedCurrency', currencyCode);
            
        }

        // Manual currency selection (user override)
        function setCurrency(currency) {
            currentCurrency = currency;
            // NÃO alterar o idioma quando mudar a moeda
            
            // Save user preference (overrides auto-detection)
            localStorage.setItem('preferredCurrency', currency);
            localStorage.setItem('userManuallySelectedCurrency', 'true');
            
            updateCurrencyDisplay();
            // NÃO chamar updateReviewsLanguage() aqui
            
            
            // Show confirmation message
            showCurrencyChangeConfirmation(currency);
        }

        // Manual language selection (independent of currency)
        function setLanguage(language) {
            currentLanguage = language;
            
            // Save user preference
            localStorage.setItem('preferredLanguage', language);
            localStorage.setItem('userManuallySelectedLanguage', 'true');
            
            updateReviewsLanguage();
            
            
            // Show confirmation message
            showLanguageChangeConfirmation(language);
        }

        // Show confirmation when user changes language
        function showLanguageChangeConfirmation(language) {
            const languageNames = {
                'pt': 'Português',
                'en': 'English'
            };
            
            const confirmationMsg = document.createElement('div');
            confirmationMsg.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #d4af37;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
                z-index: 10000;
                font-weight: 600;
                animation: slideInRight 0.3s ease-out;
            `;
            confirmationMsg.innerHTML = `🌍 Idioma alterado para ${languageNames[language]}`;
            
            document.body.appendChild(confirmationMsg);
            
            setTimeout(() => {
                confirmationMsg.remove();
            }, 3000);
        }

        // Show confirmation when user changes currency
        function showCurrencyChangeConfirmation(currency) {
            const currencyNames = {
                'USD': '🇺🇸 Dólar Americano',
                'BRL': '🇧🇷 Real Brasileiro',
                'EUR': '🇪🇺 Euro'
            };
            
            const confirmationMsg = document.createElement('div');
            confirmationMsg.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #d4af37;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
                z-index: 10000;
                font-weight: 600;
                animation: slideInRight 0.3s ease-out;
            `;
            confirmationMsg.innerHTML = `💰 Moeda alterada para ${currencyNames[currency]}`;
            
            document.body.appendChild(confirmationMsg);
            
            setTimeout(() => {
                confirmationMsg.remove();
            }, 3000);
        }

        // Update currency display for all elements
        function updateCurrencyDisplay() {
            // Update all price displays
            updateAllPrices();
            
            // Update order summary
            updateOrderSummary();
            
        }

        // Update all prices on the page
        function updateAllPrices() {
            // Update basic offer price
            const basicPriceElement = document.getElementById('basic-price');
            if (basicPriceElement && offers.basic) {
                const usdPrice = offers.basic.prices.USD;
                const convertedPrice = usdPrice * exchangeRates[currentCurrency].rate;
                const formattedPrice = formatPrice(convertedPrice, currentCurrency);
                basicPriceElement.textContent = formattedPrice;
            }
            
            // Update premium offer price
            const premiumPriceElement = document.getElementById('premium-price');
            if (premiumPriceElement && offers.premium) {
                const usdPrice = offers.premium.prices.USD;
                const convertedPrice = usdPrice * exchangeRates[currentCurrency].rate;
                const formattedPrice = formatPrice(convertedPrice, currentCurrency);
                premiumPriceElement.textContent = formattedPrice;
            }
            
            // Update total amount in summary
            updateOrderSummary();
        }


        // Format price according to currency
        function formatPrice(price, currency) {
            const symbol = exchangeRates[currency].symbol;
            
            if (currency === 'BRL') {
                return `${symbol} ${price.toFixed(2).replace('.', ',')}`;
            } else {
                return `${symbol}${price.toFixed(2)}`;
            }
        }

        // Função para converter preço para a moeda do resumo
        function convertPriceForSummary(priceUSD) {
            const exchangeRate = exchangeRates[summaryCurrency];
            return priceUSD * exchangeRate.rate;
        }

        // Função para formatar preço do resumo
        function formatPriceForSummary(price) {
            if (summaryCurrency === 'BRL') {
                return `R$ ${price.toFixed(2).replace('.', ',')}`;
            } else if (summaryCurrency === 'USD') {
                return `$${price.toFixed(2)}`;
            } else if (summaryCurrency === 'EUR') {
                return `€${price.toFixed(2)}`;
            }
            return price.toString();
        }

        // Update reviews language
        function updateReviewsLanguage() {
            // This function will be implemented to update reviews language
        }

        // Initialize currency system
        document.addEventListener('DOMContentLoaded', function() {
            // Add click handlers for flag options
            document.querySelectorAll('.flag-option').forEach(option => {
                option.addEventListener('click', function() {
                    const currency = this.getAttribute('data-currency');
                    const flag = this.getAttribute('data-flag');
                    selectFlagOption(currency, flag);
                });
            });
            
            // Load saved preferences
            const savedCurrency = localStorage.getItem('selectedCurrency');
            if (savedCurrency && exchangeRates[savedCurrency]) {
                currentCurrency = savedCurrency;
                const flag = document.querySelector(`[data-currency="${savedCurrency}"]`).getAttribute('data-flag');
                document.getElementById('selectedFlag').textContent = flag;
                updateCurrencyDisplay();
            }
            
            // Event listener para o seletor de moeda do resumo
            const summaryCurrencySelector = document.getElementById('summaryCurrencySelector');
            if (summaryCurrencySelector) {
                // Inicializar com a moeda atual
                summaryCurrencySelector.value = currentCurrency;
                summaryCurrency = currentCurrency;
                
                summaryCurrencySelector.addEventListener('change', function() {
                    summaryCurrency = this.value;
                    console.log('Summary currency changed to:', summaryCurrency);
                    // Atualizar o resumo com a nova moeda
                    updateOrderSummary();
                });
            }
            
            // Sistema de galeria de produtos
            function initializeProductGallery() {
                const galleryImages = [
                    { src: 'Galeria/516848824_2127249251135000_2813377934115782079_n.jpg' },
                    { src: 'Galeria/71dJJYFOQjL._SL1500_.jpg' },
                    { src: 'Galeria/71L1N+QaTmL._SL1500_.jpg' },
                    { src: 'Galeria/817HWP9F6RL._SL1500_.jpg' },
                    { src: 'Galeria/S052cd5c603c64089ac481807139e8ad0Q.webp' },
                    { src: 'Galeria/Sbaed238c364448428b965c54b0951570d.webp' },
                    { src: 'Galeria/Screenshot 2025-09-20 144606.png' },
                    { src: 'Galeria/Screenshot 2025-09-20 144640.png' },
                    { src: 'Galeria/Screenshot 2025-09-20 144719.png' },
                    { src: 'Galeria/Screenshot 2025-09-20 150819.png' },
                    { src: 'Galeria/Screenshot 2025-09-20 150848.png' },
                    { src: 'Galeria/Screenshot 2025-09-20 150912.png' }
                ];
                
                let currentImageIndex = 0;
                const mainImage = document.getElementById('galleryMainImage');
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                const indicatorsContainer = document.getElementById('galleryIndicators');
                
                // Criar indicadores
                galleryImages.forEach((_, index) => {
                    const indicator = document.createElement('div');
                    indicator.className = 'gallery-indicator';
                    if (index === 0) indicator.classList.add('active');
                    indicator.addEventListener('click', () => goToImage(index));
                    indicatorsContainer.appendChild(indicator);
                });
                
                function updateImage(direction = null) {
                    const currentImage = galleryImages[currentImageIndex];
                    
                    // Aplicar transição de saída
                    if (direction === 'next') {
                        mainImage.classList.add('slide-right');
                    } else if (direction === 'prev') {
                        mainImage.classList.add('slide-left');
                    }
                    
                    setTimeout(() => {
                        mainImage.src = currentImage.src;
                        mainImage.alt = 'Wrinkle Reducer - Red Light Therapy';
                        
                        // Aplicar transição de entrada
                        if (direction === 'next') {
                            mainImage.classList.remove('slide-right');
                            mainImage.classList.add('slide-in-left');
                        } else if (direction === 'prev') {
                            mainImage.classList.remove('slide-left');
                            mainImage.classList.add('slide-in-right');
                        }
                        
                        // Remover classes de transição após a animação
                        setTimeout(() => {
                            mainImage.classList.remove('slide-in-left', 'slide-in-right');
                        }, 500);
                    }, 250);
                    
                    // Atualizar indicadores
                    const indicators = document.querySelectorAll('.gallery-indicator');
                    indicators.forEach((indicator, index) => {
                        indicator.classList.toggle('active', index === currentImageIndex);
                    });
                    
                    // Atualizar botões
                    prevBtn.disabled = currentImageIndex === 0;
                    nextBtn.disabled = currentImageIndex === galleryImages.length - 1;
                }
                
                function goToImage(index) {
                    if (index >= 0 && index < galleryImages.length) {
                        const direction = index > currentImageIndex ? 'next' : 'prev';
                        currentImageIndex = index;
                        updateImage(direction);
                    }
                }
                
                // Event listeners
                prevBtn.addEventListener('click', () => {
                    if (currentImageIndex > 0) {
                        currentImageIndex--;
                        updateImage('prev');
                    }
                });
                
                nextBtn.addEventListener('click', () => {
                    if (currentImageIndex < galleryImages.length - 1) {
                        currentImageIndex++;
                        updateImage('next');
                    }
                });
                
                // Inicializar estado dos botões
                updateImage();
                
                // Slideshow automático
                let slideshowInterval;
                
                function startSlideshow() {
                    slideshowInterval = setInterval(() => {
                        if (currentImageIndex < galleryImages.length - 1) {
                            currentImageIndex++;
                            updateImage('next');
                        } else {
                            currentImageIndex = 0;
                            updateImage('next');
                        }
                    }, 5000); // 5 segundos
                }
                
                function stopSlideshow() {
                    clearInterval(slideshowInterval);
                }
                
                // Pausar slideshow ao interagir
                [nextBtn, prevBtn, ...document.querySelectorAll('.gallery-indicator')].forEach(element => {
                    element.addEventListener('click', () => {
                        stopSlideshow();
                        setTimeout(startSlideshow, 10000); // Reiniciar após 10 segundos
                    });
                });
                
                // Pausar slideshow ao passar o mouse
                const galleryMain = document.querySelector('.gallery-main');
                galleryMain.addEventListener('mouseenter', stopSlideshow);
                galleryMain.addEventListener('mouseleave', startSlideshow);
                
                // Iniciar slideshow
                startSlideshow();
            }
            
            // Inicializar galeria
            initializeProductGallery();
        });

        // Add CSS for animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
        `;
        document.head.appendChild(style);
    </script>

    <script>
        let selectedOffers = ['basic']; // Array para múltiplas seleções
        
        // Dados das ofertas com preços em múltiplas moedas
        const offers = {
            basic: {
                name: 'Face and Neck Massager Tool, 7-in-1 Color Red-Light-Therapy Wand for Skin Care',
                prices: {
                    USD: 17.45,
                    BRL: 92.50,
                    EUR: 15.71,
                    AOA: 15710
                },
                discount: 0,
                shipping: {
                    USD: 2.45,
                    BRL: 12.90,
                    EUR: 2.25,
                    AOA: 2250
                }
            },
            premium: {
                name: 'type1 set nobox',
                prices: {
                    USD: 35.36,
                    BRL: 187.41,
                    EUR: 32.53,
                    AOA: 32530
                },
                discount: 0,
                shipping: {
                    USD: 2.45,
                    BRL: 12.90,
                    EUR: 2.25,
                    AOA: 2250
                }
            }
        };

        // Event listeners para checkboxes
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.offer-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const offerType = this.dataset.option;
                    const offerElement = this.closest('.offer-option');
                    
                    if (this.checked) {
                        if (!selectedOffers.includes(offerType)) {
                            selectedOffers.push(offerType);
                        }
                        offerElement.classList.add('selected');
            } else {
                        selectedOffers = selectedOffers.filter(offer => offer !== offerType);
                        offerElement.classList.remove('selected');
                    }
                    
                    // Garantir que pelo menos uma oferta esteja selecionada
                    if (selectedOffers.length === 0) {
                        this.checked = true;
                        selectedOffers.push(offerType);
                        offerElement.classList.add('selected');
                    }
                    
                    updateOrderSummary();
                });
            });

            // Event listeners para cliques nas ofertas
            document.querySelectorAll('.offer-option').forEach(option => {
                option.addEventListener('click', function(e) {
                    // Não processar clique se for no checkbox, botões de quantidade ou input de quantidade
                    if (e.target.type === 'checkbox' || 
                        e.target.classList.contains('quantity-btn') || 
                        e.target.id === 'productQuantity' ||
                        e.target.closest('.quantity-section')) {
                        return;
                    }
                    
                    const checkbox = this.querySelector('.offer-checkbox');
                    checkbox.checked = !checkbox.checked;
                    checkbox.dispatchEvent(new Event('change'));
                });
            });
            
            // Inicializar resumo
            updateOrderSummary();
            
            // Sistema de quantidade
            const decreaseBtn = document.getElementById('decreaseQty');
            const increaseBtn = document.getElementById('increaseQty');
            const quantityInput = document.getElementById('productQuantity');
            
            if (decreaseBtn && increaseBtn && quantityInput) {
                decreaseBtn.addEventListener('click', function(e) {
                    e.stopPropagation(); // Evita que o evento se propague para a oferta
                    let currentValue = parseInt(quantityInput.value);
                    if (currentValue > 1) {
                        quantityInput.value = currentValue - 1;
                        updateOrderSummary();
                    }
                });
                
                increaseBtn.addEventListener('click', function(e) {
                    e.stopPropagation(); // Evita que o evento se propague para a oferta
                    let currentValue = parseInt(quantityInput.value);
                    if (currentValue < 10) {
                        quantityInput.value = currentValue + 1;
                        updateOrderSummary();
                    }
                });
                
                quantityInput.addEventListener('change', function(e) {
                    e.stopPropagation(); // Evita que o evento se propague para a oferta
                    let value = parseInt(this.value);
                    if (value < 1) this.value = 1;
                    if (value > 10) this.value = 10;
            updateOrderSummary();
                });
                
                quantityInput.addEventListener('click', function(e) {
                    e.stopPropagation(); // Evita que o evento se propague para a oferta
                });
        }
        });

        // Funções para controle de quantidade

        function updateOrderSummary() {
            const selectedOffersContainer = document.getElementById('selectedOffers');
            let total = 0;
            const quantity = parseInt(document.getElementById('productQuantity')?.value || 1);
            
            selectedOffersContainer.innerHTML = '';
            
            selectedOffers.forEach(offerType => {
                const offer = offers[offerType];
                // Obter o preço na moeda atual
                const offerPriceUSD = offer.prices.USD;
                // Converter para a moeda do resumo
                const offerPriceSummary = convertPriceForSummary(offerPriceUSD);
                
                // A oferta premium não deve ser multiplicada pela quantidade
                let offerTotal;
                let quantityText = '';
                
                if (offerType === 'premium') {
                    offerTotal = offerPriceSummary; // Sem multiplicação
                    quantityText = ''; // Sem mostrar quantidade
                } else {
                    offerTotal = offerPriceSummary * quantity; // Com multiplicação
                    quantityText = quantity > 1 ? `(x${quantity})` : '';
                }
                
                total += offerTotal;

                const offerRow = document.createElement('div');
                offerRow.className = 'summary-row';
                offerRow.innerHTML = `
                    <span>${offer.name} ${quantityText}</span>
                    <span>${formatPriceForSummary(offerTotal)}</span>
                `;
                selectedOffersContainer.appendChild(offerRow);
            });

            const totalElement = document.getElementById('totalAmount');
            if (totalElement) {
                totalElement.textContent = formatPriceForSummary(total);
            }
        }

        function processCheckout() {
            const email = document.getElementById('email').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            const observations = document.getElementById('observations').value;

            if (!email || !paymentMethod) {
                alert('Por favor, preencha o email e selecione uma forma de pagamento.');
                return;
            }
            
            const orderData = {
                id: 'ORDER_' + Date.now(),
                products: selectedOffers.map(offerType => {
                    const quantity = parseInt(document.getElementById('productQuantity')?.value || 1);
                    const offer = offers[offerType];
                    const offerPriceUSD = offer.prices.USD;
                    
                    // A oferta premium não deve ser multiplicada pela quantidade
                    let totalPrice;
                    if (offerType === 'premium') {
                        totalPrice = offerPriceUSD; // Sem multiplicação
                    } else {
                        totalPrice = offerPriceUSD * quantity; // Com multiplicação
                    }
                    
                    return {
                        ...offer,
                        quantity: offerType === 'premium' ? 1 : quantity, // Premium sempre quantidade 1
                        totalPrice: totalPrice
                    };
                }),
                customer: {
                    email
                },
                paymentMethod,
                observations,
                total: selectedOffers.reduce((total, offerType) => {
                    const quantity = parseInt(document.getElementById('productQuantity')?.value || 1);
                    const offer = offers[offerType];
                    const offerPriceUSD = offer.prices.USD;
                    
                    // A oferta premium não deve ser multiplicada pela quantidade
                    if (offerType === 'premium') {
                        return total + offerPriceUSD; // Sem multiplicação
                    } else {
                        return total + (offerPriceUSD * quantity); // Com multiplicação
                    }
                }, 0),
                date: new Date().toISOString()
            };
            
            // Save order
            let orders = JSON.parse(localStorage.getItem('orders') || '[]');
            orders.push(orderData);
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // Show specific message based on payment method
            let successMessage = `Pedido realizado com sucesso!\n\nProdutos: ${orderData.products.map(p => p.name).join(' + ')}\nTotal: R$ ${orderData.total.toFixed(2).replace('.', ',')}\n\n`;
            
            switch(paymentMethod) {
                case 'paypal':
                    successMessage += 'O pagamento via PayPal foi processado. Você receberá um email de confirmação em breve.';
                    break;
                case 'pix':
                    successMessage += 'Você receberá as instruções de pagamento PIX por email. Após o pagamento, seu pedido será processado.';
                    break;
                default:
                    successMessage += 'Você receberá um email de confirmação em breve.';
            }
            
            alert(successMessage);
            
            // Redirect to home page
            window.location.href = '../../index.html';
        }

        // PayPal integration
        // Payment method control
        function setupPaymentMethodControl() {
            const paymentMethodSelect = document.getElementById('paymentMethod');
            const paypalButton = document.getElementById('paypal-payment-button');
            const pixInfo = document.getElementById('pix-payment-info');
            
            if (paymentMethodSelect) {
                paymentMethodSelect.addEventListener('change', function() {
                    const selectedMethod = this.value;
                    
                    // Hide all payment options first
                    if (paypalButton) paypalButton.style.display = 'none';
                    if (pixInfo) pixInfo.style.display = 'none';
                    
                    // Show selected payment method
                    switch(selectedMethod) {
                        case 'paypal':
                            if (paypalButton) paypalButton.style.display = 'block';
                            break;
                        case 'pix':
                            if (pixInfo) pixInfo.style.display = 'block';
                            break;
                    }
                });
            }
        }
        
        // Initialize payment method control and PayPal
        document.addEventListener('DOMContentLoaded', function() {
            setupPaymentMethodControl();
            initializePayPal();
        });

        // PayPal integration
        function initializePayPal() {
            // Wait for PayPal SDK to be loaded
            if (typeof paypal === 'undefined') {
                console.log('PayPal SDK not loaded yet, retrying...');
                setTimeout(initializePayPal, 100);
                return;
            }

            console.log('PayPal SDK loaded, initializing buttons...');

        paypal.Buttons({
            createOrder: function(data, actions) {
                    return new Promise((resolve, reject) => {
                        try {
                            // Validate required variables
                            if (!selectedOffers || !Array.isArray(selectedOffers) || selectedOffers.length === 0) {
                                throw new Error('No offers selected');
                            }
                            
                            if (!currentCurrency) {
                                currentCurrency = 'USD'; // Fallback
                            }
                            
                const quantity = parseInt(document.getElementById('productQuantity')?.value || 1);
                            
                            // Get total from order summary (converted to USD for PayPal)
                            const totalElement = document.getElementById('totalAmount');
                            let totalAmount = 0;
                            
                            if (totalElement) {
                                const totalText = totalElement.textContent;
                                const totalValue = parseFloat(totalText.replace(/[^\d.,]/g, '').replace(',', '.'));
                                
                                // Convert to USD if needed
                                if (summaryCurrency === 'BRL') {
                                    totalAmount = totalValue / 5.2; // Convert BRL to USD
                                } else if (summaryCurrency === 'EUR') {
                                    totalAmount = totalValue / 0.92; // Convert EUR to USD
                                } else {
                                    totalAmount = totalValue; // Already USD
                                }
                            } else {
                                // Fallback to calculation
                                totalAmount = selectedOffers.reduce((total, offerType) => {
                                    if (!offers[offerType]) {
                                        console.warn('Offer not found:', offerType);
                                        return total;
                                    }
                                    
                    const offer = offers[offerType];
                                    const price = offer.prices && offer.prices[currentCurrency] 
                                        ? offer.prices[currentCurrency] 
                                        : offer.prices.USD || 0;
                                    
                    // A oferta premium não deve ser multiplicada pela quantidade
                    if (offerType === 'premium') {
                                        return total + price; // Sem multiplicação
                    } else {
                                        return total + (price * quantity); // Com multiplicação
                    }
                }, 0);
                            }
                
                const productNames = selectedOffers.map(offerType => {
                    const offer = offers[offerType];
                    if (offerType === 'premium') {
                                    return offer.name; // Sem quantidade
                    } else {
                        return quantity > 1 ? `${offer.name} (${quantity}x)` : offer.name;
                    }
                }).join(' + ');
                
                            console.log('PayPal order creation:', {
                                selectedOffers: selectedOffers,
                                totalAmount: totalAmount,
                                currency: currentCurrency,
                                productNames: productNames,
                                quantity: quantity
                            });
                            
                            if (totalAmount <= 0) {
                                throw new Error('Invalid total amount: ' + totalAmount);
                            }
                            
                            // Create order with timeout
                            const orderPromise = actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: totalAmount.toFixed(2),
                            currency_code: 'USD'
                        },
                                    description: productNames || 'Wrinkle Reducer Products'
                                }]
                            });
                            
                            // Add timeout to prevent hanging
                            const timeoutPromise = new Promise((_, timeoutReject) => {
                                setTimeout(() => {
                                    timeoutReject(new Error('PayPal order creation timeout'));
                                }, 8000);
                            });
                            
                            Promise.race([orderPromise, timeoutPromise])
                                .then(resolve)
                                .catch(reject);
                                
                        } catch (error) {
                            console.error('Error creating PayPal order:', error);
                            reject(error);
                        }
                });
            },
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                        console.log('PayPal payment approved:', details);
                    alert('Pagamento aprovado! ID da transação: ' + details.id);
                    processCheckout();
                    }).catch(function(error) {
                        console.error('PayPal payment error:', error);
                        alert('Erro no processamento do pagamento. Tente novamente.');
                    });
                },
                onError: function(err) {
                    console.error('PayPal error:', err);
                    alert('Erro no PayPal. Tente novamente ou escolha outra forma de pagamento.');
                },
                onCancel: function(data) {
                    console.log('PayPal payment cancelled:', data);
                }
            }).render('#paypal-payment-button').then(function() {
                console.log('PayPal buttons rendered successfully');
            }).catch(function(error) {
                console.error('Error rendering PayPal buttons:', error);
                // Retry after a delay
                setTimeout(() => {
                    console.log('Retrying PayPal button initialization...');
                    initializePayPal();
                }, 2000);
            });
        }
        </script>

        <script>
        // Currency Detection and Conversion System
        class CurrencyConverter {
            constructor() {
                this.baseCurrency = 'USD';
                this.exchangeRates = {
                    'USD': 1.00,
                    'BRL': 5.20,  // Brazilian Real
                    'EUR': 0.85   // Euro
                };
                
                this.currencySymbols = {
                    'USD': '$',
                    'BRL': 'R$',
                    'EUR': '€'
                };
                
                // Product names translations
                this.productNames = {
                    'wrinkle-reducer': {
                        'USD': 'Wrinkle Reducer - Red Light Therapy',
                        'BRL': 'Redutor de Rugas - Terapia de Luz Vermelha',
                        'EUR': 'Wrinkle Reducer - Red Light Therapy'
                    }
                };
                
                // Product descriptions translations
                this.productDescriptions = {
                    'wrinkle-reducer': {
                        'USD': 'Eliminate wrinkles and expression lines at home. Red light + massage + 7 functions. Visible results in 2 weeks.',
                        'BRL': 'Elimine rugas e linhas de expressão em casa. Luz vermelha + massagem + 7 funções. Resultados visíveis em 2 semanas.',
                        'EUR': 'Eliminate wrinkles and expression lines at home. Red light + massage + 7 functions. Visible results in 2 weeks.'
                    }
                };
                
                // Page content translations
                this.pageContent = {
                    'product_title': {
                        'USD': 'Wrinkle Reducer - Red Light Therapy',
                        'BRL': 'Redutor de Rugas - Terapia de Luz Vermelha',
                        'EUR': 'Wrinkle Reducer - Red Light Therapy'
                    },
                    'product_description': {
                        'USD': 'Eliminate wrinkles and expression lines at home. Red light + massage + 7 functions. Visible results in 2 weeks.',
                        'BRL': 'Elimine rugas e linhas de expressão em casa. Luz vermelha + massagem + 7 funções. Resultados visíveis em 2 semanas.',
                        'EUR': 'Eliminate wrinkles and expression lines at home. Red light + massage + 7 functions. Visible results in 2 weeks.'
                    },
                    'checkout_title': {
                        'USD': 'Checkout - Wrinkle Reducer',
                        'BRL': 'Finalizar Compra - Redutor de Rugas',
                        'EUR': 'Checkout - Wrinkle Reducer'
                    }
                };
                
                this.userCountry = null;
                this.userCurrency = 'USD';
                this.isInitialized = false;
                this.init();
            }
            
            async init() {
                try {
                    await this.detectUserLocation();
                    this.updateAllPrices();
                    this.updatePageContent();
                    this.isInitialized = true;
                } catch (error) {
                    console.error('Error initializing currency converter:', error);
                    this.userCurrency = 'USD';
                    this.updateAllPrices();
                    this.updatePageContent();
                }
            }
            
            async detectUserLocation() {
                try {
                    let countryCode = null;
                    
                    // Check if running from file:// protocol
                    if (window.location.protocol === 'file:') {
                        // Try to detect from browser language
                        const browserLang = navigator.language || navigator.userLanguage;
                        if (browserLang.startsWith('pt')) {
                            countryCode = 'BR';
                        } else if (browserLang.startsWith('es')) {
                            countryCode = 'ES';
                        } else {
                            countryCode = 'US';
                        }
                    } else {
                        // Try ipapi.co first
                        try {
                            const response = await fetch('https://ipapi.co/json/', {
                                timeout: 5000,
                                mode: 'cors'
                            });
                            if (response.ok) {
                                const data = await response.json();
                                countryCode = data.country_code;
                            }
                        } catch (e) {
                        }
                        
                        // Fallback to ipinfo.io if ipapi.co fails
                        if (!countryCode) {
                            try {
                                const response = await fetch('https://ipinfo.io/json', {
                                    timeout: 5000,
                                    mode: 'cors'
                                });
                                if (response.ok) {
                                    const data = await response.json();
                                    countryCode = data.country;
                                }
                            } catch (e) {
                            }
                        }
                    }
                    
                    this.userCountry = countryCode;
                    
                    // Map countries to supported currencies based on user origin
                    const countryToCurrency = {
                        // Real Brasileiro (BRL) - Brasil
                        'BR': 'BRL',
                        
                        // Dólar Americano (USD) - América do Norte e outros países
                        'US': 'USD', 'CA': 'USD', 'MX': 'USD', 'AR': 'USD', 'CL': 'USD', 'CO': 'USD', 'PE': 'USD', 'UY': 'USD', 'BO': 'USD', 'PY': 'USD', 'VE': 'USD', 'EC': 'USD', 'GY': 'USD', 'SR': 'USD', 'GF': 'USD', 'FK': 'USD', 'BZ': 'USD', 'GT': 'USD', 'HN': 'USD', 'SV': 'USD', 'NI': 'USD', 'CR': 'USD', 'PA': 'USD', 'CU': 'USD', 'JM': 'USD', 'HT': 'USD', 'DO': 'USD', 'PR': 'USD', 'VI': 'USD', 'AG': 'USD', 'BB': 'USD', 'DM': 'USD', 'GD': 'USD', 'KN': 'USD', 'LC': 'USD', 'VC': 'USD', 'TT': 'USD', 'BS': 'USD', 'AU': 'USD', 'NZ': 'USD', 'JP': 'USD', 'KR': 'USD', 'SG': 'USD', 'HK': 'USD', 'TW': 'USD', 'TH': 'USD', 'MY': 'USD', 'ID': 'USD', 'PH': 'USD', 'VN': 'USD', 'IN': 'USD', 'PK': 'USD', 'BD': 'USD', 'LK': 'USD', 'MM': 'USD', 'KH': 'USD', 'LA': 'USD', 'BN': 'USD', 'FJ': 'USD', 'PG': 'USD', 'SB': 'USD', 'VU': 'USD', 'NC': 'USD', 'PF': 'USD', 'WS': 'USD', 'TO': 'USD', 'KI': 'USD', 'TV': 'USD', 'NR': 'USD', 'MH': 'USD', 'FM': 'USD', 'PW': 'USD', 'AS': 'USD', 'GU': 'USD', 'MP': 'USD', 'CK': 'USD', 'NU': 'USD', 'TK': 'USD', 'WF': 'USD', 'NF': 'USD', 'PN': 'USD', 'GS': 'USD', 'SH': 'USD', 'AC': 'USD', 'TA': 'USD', 'IO': 'USD', 'CX': 'USD', 'CC': 'USD', 'HM': 'USD', 'AQ': 'USD', 'BV': 'USD', 'TF': 'USD', 'UM': 'USD',
                        
                        // Euro (EUR) - Países da Zona do Euro
                        'DE': 'EUR', 'FR': 'EUR', 'IT': 'EUR', 'ES': 'EUR', 'NL': 'EUR', 'BE': 'EUR', 'AT': 'EUR', 'PT': 'EUR', 'IE': 'EUR', 'FI': 'EUR', 'GR': 'EUR', 'LU': 'EUR', 'MT': 'EUR', 'CY': 'EUR', 'SK': 'EUR', 'SI': 'EUR', 'EE': 'EUR', 'LV': 'EUR', 'LT': 'EUR', 'AD': 'EUR', 'MC': 'EUR', 'SM': 'EUR', 'VA': 'EUR', 'ME': 'EUR', 'XK': 'EUR'
                    };
                    
                    this.userCurrency = countryToCurrency[this.userCountry] || 'USD';
                    
                    // Debug: Log detection results
                    console.log('🌍 Currency Detection Results:');
                    console.log('📍 User Country:', this.userCountry);
                    console.log('💰 User Currency:', this.userCurrency);
                    console.log('💱 Exchange Rate:', this.exchangeRates[this.userCurrency]);
                    
                } catch (error) {
                    console.error('Error in location detection:', error);
                    this.userCurrency = 'USD';
                    this.userCountry = 'Unknown';
                }
            }
            
            convertPrice(usdPrice) {
                const rate = this.exchangeRates[this.userCurrency];
                const convertedPrice = usdPrice * rate;
                
                // Debug: Log price conversion
                console.log(`💱 Price Conversion: $${usdPrice} USD → ${this.formatPrice(convertedPrice)} (Rate: ${rate})`);
                
                return this.formatPrice(convertedPrice);
            }
            
            translateProductName(productKey) {
                return this.productNames[productKey] ? 
                    this.productNames[productKey][this.userCurrency] || 
                    this.productNames[productKey]['USD'] : 
                    productKey;
            }
            
            translateProductDescription(productKey) {
                return this.productDescriptions[productKey] ? 
                    this.productDescriptions[productKey][this.userCurrency] || 
                    this.productDescriptions[productKey]['USD'] : 
                    '';
            }
            
            translatePageContent(contentKey) {
                return this.pageContent[contentKey] ? 
                    this.pageContent[contentKey][this.userCurrency] || 
                    this.pageContent[contentKey]['USD'] : 
                    contentKey;
            }
            
            formatPrice(price) {
                const symbol = this.currencySymbols[this.userCurrency];
                
                if (this.userCurrency === 'BRL') {
                    return `${symbol} ${price.toFixed(2).replace('.', ',')}`;
                } else {
                    return `${symbol}${price.toFixed(2)}`;
                }
            }
            
            updateAllPrices() {
                try {
                    // Product prices in USD
                    const productPrices = {
                        'wrinkle-reducer': { current: 17.45, original: 34.90 }
                    };
                    
                    // Wait for DOM to be ready
                    const updatePrices = () => {
                        // Update product title
                        const productTitle = document.querySelector('h3');
                        if (productTitle) {
                            productTitle.textContent = this.translatePageContent('product_title');
                        }
                        
                        // Update page title
                        document.title = this.translatePageContent('checkout_title');
                        
                        // Update product description
                        const productDescription = document.querySelector('.product-details p');
                        if (productDescription) {
                            productDescription.textContent = this.translateProductDescription('wrinkle-reducer');
                        }
                        
                        // Update prices in offer options
                        const priceElements = document.querySelectorAll('.price, .price-current, .price-original');
                        priceElements.forEach(element => {
                            if (element.classList.contains('price') || element.classList.contains('price-current')) {
                                element.textContent = this.convertPrice(productPrices['wrinkle-reducer'].current);
                            } else if (element.classList.contains('price-original')) {
                                element.textContent = this.convertPrice(productPrices['wrinkle-reducer'].original);
                            }
                        });
                        
                        // Update selected offer price in summary
                        const selectedOfferPrice = document.getElementById('selectedOfferPrice');
                        if (selectedOfferPrice) {
                            selectedOfferPrice.textContent = this.convertPrice(productPrices['wrinkle-reducer'].current);
                        }
                        
                    };
                    
                    // Try to update immediately
                    updatePrices();
                    
                    // If no elements found, wait a bit and try again
                    setTimeout(updatePrices, 100);
                    
                } catch (error) {
                    console.error('Error updating prices:', error);
                }
            }
            
            updatePageContent() {
                try {
                    // Update page title
                    document.title = this.translatePageContent('checkout_title');
                    
                    // Update product title
                    const productTitle = document.querySelector('h3');
                    if (productTitle) {
                        productTitle.textContent = this.translatePageContent('product_title');
                    }
                    
                    // Update product description
                    const productDescription = document.querySelector('.product-details p');
                    if (productDescription) {
                        productDescription.textContent = this.translateProductDescription('wrinkle-reducer');
                    }
                    
                    
                } catch (error) {
                    console.error('Error updating page content:', error);
                }
            }
        }
        
        // Initialize currency converter when page loads
        document.addEventListener('DOMContentLoaded', function() {
            const converter = new CurrencyConverter();
            converter.init();
        });
        
        // Atualizar preços após carregamento completo
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                updateAllPrices();
            }, 500);
        });

        // Sistema de Reviews Interativas
        function openReviewModal(author, date, stars, fullText) {
            const modal = document.createElement('div');
            modal.className = 'review-modal';
            modal.id = 'reviewModal';
            
            const starCount = parseFloat(stars);
            let starsHTML = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= starCount) {
                    starsHTML += '<i class="fas fa-star" style="color: #d4af37;"></i>';
                } else {
                    starsHTML += '<i class="far fa-star" style="color: #ddd;"></i>';
                }
            }
            
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 style="color: #d4af37; margin: 0;">Review Completa</h3>
                        <button class="modal-close" onclick="closeReviewModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #d4af37, #b8941f); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-user" style="color: white; font-size: 1.2rem;"></i>
                            </div>
                            <div>
                                <h4 style="margin: 0; color: #333;">${author}</h4>
                                <p style="margin: 5px 0 0 0; color: #666; font-size: 0.9rem;">Verified Purchase • ${date}</p>
                            </div>
                        </div>
                        <div style="display: flex; gap: 3px; margin-bottom: 20px;">
                            ${starsHTML}
                        </div>
                    </div>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border-left: 4px solid #d4af37;">
                        <p style="margin: 0; color: #333; line-height: 1.6; font-style: italic;">"${fullText}"</p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function closeReviewModal() {
            const modal = document.getElementById('reviewModal');
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
                modal.remove();
            }
        }



        // Add click listeners to reviews
        document.addEventListener('DOMContentLoaded', function() {
            // Sistema de Reviews Completo (do Laikou)
            let selectedRating = 0;
            let userReviews = [];

            // Verificar se usuário está logado
            function checkLogin() {
                return localStorage.getItem('userLoggedIn') === 'true';
            }

            // Mostrar modal de login
            function showLoginModal() {
                alert('Por favor, faça login para adicionar uma review.');
            }

            // Mostrar modal de review
            function showReviewModal() {
                if (!checkLogin()) {
                    showLoginModal();
                    return;
                }
                document.getElementById('reviewModal').style.display = 'flex';
            }

            // Fechar modal de review
            function closeReviewModal() {
                document.getElementById('reviewModal').style.display = 'none';
                document.getElementById('reviewForm').reset();
                selectedRating = 0;
                updateStarDisplay();
                document.getElementById('imagePreview').innerHTML = '';
            }

            // Atualizar display das estrelas
            function updateStarDisplay() {
                const stars = document.querySelectorAll('#starRating i');
                stars.forEach((star, index) => {
                    if (index < selectedRating) {
                        star.className = 'fas fa-star';
                        star.style.color = '#d4af37';
                    } else {
                        star.className = 'far fa-star';
                        star.style.color = '#ddd';
                    }
                });
            }

            // Adicionar review ao DOM
            function addReviewToDOM(reviewData) {
                const reviewsContainer = document.querySelector('.reviews-container');
                const reviewElement = document.createElement('div');
                reviewElement.className = 'review-item clickable-review';
                reviewElement.setAttribute('data-review-id', reviewData.id);
                reviewElement.setAttribute('data-author', reviewData.name);
                reviewElement.setAttribute('data-date', reviewData.date);
                reviewElement.setAttribute('data-stars', reviewData.rating);
                
                let imageHtml = '';
                if (reviewData.image) {
                    imageHtml = `<img src="${reviewData.image}" alt="Review Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">`;
                } else {
                    imageHtml = `<div class="review-avatar"><i class="fas fa-user"></i></div>`;
                }

                let starsHtml = '';
                for (let i = 1; i <= 5; i++) {
                    if (i <= reviewData.rating) {
                        starsHtml += '<i class="fas fa-star"></i>';
                    } else {
                        starsHtml += '<i class="far fa-star"></i>';
                    }
                }

                reviewElement.innerHTML = `
                    <div class="review-image">
                        ${imageHtml}
                    </div>
                    <div class="review-content">
                        <div class="review-stars">
                            ${starsHtml}
                        </div>
                        <p class="review-text">"${reviewData.text}"</p>
                        <div class="review-author">
                            <strong>${reviewData.name}</strong>
                            <span class="review-date">${reviewData.date}</span>
                        </div>
                    </div>
                `;

                // Adicionar event listener para o modal
                reviewElement.addEventListener('click', function() {
                    openReviewModal(reviewData.name, reviewData.date, reviewData.rating, reviewData.text);
                });

                reviewsContainer.insertBefore(reviewElement, reviewsContainer.firstChild);
            }

            // Botão adicionar review
            const addReviewBtn = document.getElementById('addReviewBtn');
            if (addReviewBtn) {
                addReviewBtn.addEventListener('click', showReviewModal);
            }

            // Fechar modais
            const closeReviewModalBtn = document.getElementById('closeReviewModal');
            if (closeReviewModalBtn) {
                closeReviewModalBtn.addEventListener('click', closeReviewModal);
            }

            // Sistema de estrelas
            const starElements = document.querySelectorAll('#starRating i');
            starElements.forEach((star, index) => {
                star.addEventListener('click', function() {
                    selectedRating = index + 1;
                    updateStarDisplay();
                });
            });

            // Preview de imagem
            const imageInput = document.getElementById('reviewImage');
            if (imageInput) {
                imageInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            document.getElementById('imagePreview').innerHTML = `
                                <img src="${e.target.result}" style="max-width: 200px; max-height: 200px; border-radius: 50%; object-fit: cover;">
                            `;
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }

            // Form de review
            const reviewForm = document.getElementById('reviewForm');
            if (reviewForm) {
                reviewForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const name = document.getElementById('reviewerName').value;
                    const text = document.getElementById('reviewText').value;
                    const imageFile = document.getElementById('reviewImage').files[0];
                    
                    if (selectedRating === 0) {
                        alert('Por favor, selecione uma avaliação.');
                        return;
                    }
                    
                    const newReview = {
                        id: 'user_' + Date.now(),
                        name: name,
                        rating: selectedRating,
                        text: text,
                        date: 'Agora mesmo',
                        image: imageFile ? URL.createObjectURL(imageFile) : null
                    };
                    
                    userReviews.unshift(newReview);
                    addReviewToDOM(newReview);
                    closeReviewModal();
                    
                    alert('Review adicionada com sucesso!');
                });
            }


            const clickableReviews = document.querySelectorAll('.clickable-review');
            clickableReviews.forEach(review => {
                review.addEventListener('click', function() {
                    const author = this.dataset.author;
                    const date = this.dataset.date;
                    const stars = this.dataset.stars;
                    
                    // Get review text based on ID
                    const reviewTexts = {
                        'sarah': "They gave me a rigid facial mask during a facial, and I was hesitant about buying one, but I liked this model better because it is manageable and very comfortable!! I like using it, first I clean my face well, use it, and then add vitamin C and hyaluronic acid serum, then cream (together or alternate). I've been using it for about 3 weeks, at least 3 times a week. It's still too early to see the benefits, but the day after I use it, my husband tells me I look younger :)",
                        'jennifer': "The mask is of very high quality, with pleasant material. Thanks to the seller. ❤️ 😌",
                        'amanda': "Very very impressed with this product! Packaged well and very high quality",
                        'michelle': "The material seems to be of good quality and comfortable to wear, it needs to be charged for 5 hours before it can be used.",
                        'lisa': "Perfect...great packaging, arrived quickly, all LEDs work perfectly. Advice",
                        'rachel': "Excellent product! The red light therapy works amazing and the 7-in-1 functionality is incredible. Highly recommend this wand for anyone looking for professional skincare results at home."
                    };
                    
                    const reviewId = this.dataset.reviewId;
                    const fullText = reviewTexts[reviewId] || "Review text not available";
                    
                    openReviewModal(author, date, stars, fullText);
                });
            });
        });
        </script>

</body>
</html>
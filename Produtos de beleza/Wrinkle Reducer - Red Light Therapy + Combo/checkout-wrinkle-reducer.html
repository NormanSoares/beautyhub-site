<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - 7-in-1 Wrinkle Wand | 67 Beauty Hub</title>
    <link rel="stylesheet" href="../../styles.css">
    <!-- Scripts do Sistema de Processamento (carregar primeiro) -->
    <script src="../../js/supplier-order-processor.js"></script>
    <script src="../../js/payment-gateway.js"></script>
    <script src="../../js/pix-generator.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- PayPal SDK -->
    <!-- PayPal SDK will be loaded dynamically with correct locale -->
    <!-- AliExpress Integration -->
    <script src="../../js/aliexpress-integration.js"></script>
    <!-- Review System -->
    <script src="../../js/review-system.js"></script>
    <!-- Product Variation Mapping System -->
    <script src="../../js/product-variation-mapping.js"></script>
    <!-- Price Cache System -->
    <script src="../../js/price-cache.js"></script>
    <!-- Active Prices Sync System -->
    <script src="../../js/active-prices-sync.js"></script>
    <!-- Global Translation System -->
    <script src="../../js/language-controller.js"></script>
    <!-- PIX Payment System -->
    <script src="../../js/pix-generator.js"></script>
    <!-- Wrinkle Reducer Specific JavaScript -->
    <script src="checkout-wrinkle-reducer.js"></script>
    <style>
        body {
            background: #f0e6d2;
        }

        .checkout-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            margin-top: 50px;
            min-height: 100vh;
        }

        .checkout-layout {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .unified-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            align-items: start;
            min-height: auto;
        }

        .checkout-bottom {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            align-items: start;
        }

        .form-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }


        .checkout-header {
            text-align: center;
            margin-bottom: 40px;
            grid-column: 1 / -1;
        }

        .checkout-header h1 {
            color: #d4af37;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        /* Flag dropdown styles removed - currency detection is now automatic */
        
        .offer-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .product-summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .product-image {
            max-width: 100%;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            margin: 0 auto 20px;
            display: block;
            max-height: 400px;
            object-fit: contain;
        }
        
        .product-details h3 {
            color: #333;
            font-size: 1.8rem;
            margin-bottom: 15px;
        }
        
        .product-details p {
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .offer-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
            margin-top: 20px;
        }
        
        .offer-option {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 15px;
        }
        
        .offer-option:hover {
            border-color: #d4af37;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.15);
        }
        
        .offer-option.selected {
            border-color: #d4af37;
            background: linear-gradient(135deg, #fff9e6, #fff);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.2);
            transform: translateY(-2px);
        }
        
        .offer-checkbox {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 20px;
            height: 20px;
            accent-color: #d4af37;
            cursor: pointer;
        }
        
        .offer-option.has-checkbox {
            padding-left: 50px;
        }
        
        .offer-option.has-checkbox .option-header {
            margin-left: 10px;
        }
        
        /* Specific style for basic offer without checkbox */
        .offer-option[data-option="basic"] {
            padding-left: 20px;
        }
        
        .offer-option[data-option="basic"] .option-header {
            margin-left: 0;
        }
        
        .offer-image-container {
            text-align: left;
            margin: 15px 0;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .offer-image {
            max-width: 120px;
            max-height: 120px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            object-fit: contain;
            width: 100%;
            height: auto;
            flex-shrink: 0;
        }
        
        .offer-description-container {
            flex: 1;
        }
        
        
        /* Estilos para as pequenas checkboxes */
        .small-checkboxes-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        
        .small-checkbox-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }
        
        .small-checkbox-item:hover {
            background-color: #e9ecef;
        }
        
        .small-checkbox-label {
            font-size: 11px;
            color: #495057;
            margin: 0;
            line-height: 1.2;
            flex: 1;
            min-width: 0;
            word-break: break-word;
        }
        
        /* Estilos para as imagens das mini checkboxes */
        .small-checkbox-image {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            overflow: hidden;
            margin-right: 8px;
            flex-shrink: 0;
            border: 2px solid #e9ecef;
            transition: border-color 0.2s ease;
        }
        
        .small-checkbox-item:hover .small-checkbox-image {
            border-color: #d4af37;
        }
        
        .small-checkbox:checked ~ .small-checkbox-image {
            border-color: #d4af37;
            box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
        }
        
        .small-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        .small-checkbox-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px;
            border-radius: 6px;
            transition: all 0.2s ease;
            flex-direction: row;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .small-checkbox-item:hover {
            background-color: #e9ecef;
            border-color: #d4af37;
        }
        
        .small-checkbox-item.selected {
            background-color: #fff9e6;
            border-color: #d4af37;
            box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
        }
        
        .small-checkbox-item.selected .small-checkbox-label {
            color: #d4af37;
            font-weight: 500;
        }
        
        /* Estilos para a galeria de produtos */
        .product-gallery-section {
            margin: 20px 0;
            width: 100%;
            text-align: center;
            grid-column: 1 / -1; /* Ocupa toda a largura do grid */
        }
        
        .simple-gallery {
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }
        
        .gallery-main {
            position: relative;
            width: 100%;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .gallery-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(212, 175, 55, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .gallery-nav-btn.prev-btn {
            left: 15px;
        }
        
        .gallery-nav-btn.next-btn {
            right: 15px;
        }
        
        .gallery-nav-btn:hover {
            background: rgba(184, 148, 31, 0.95);
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }
        
        .gallery-nav-btn:disabled {
            background: rgba(204, 204, 204, 0.7);
            cursor: not-allowed;
            transform: translateY(-50%);
            box-shadow: none;
        }
        
        .gallery-main-image {
            width: 100%;
            height: auto;
            max-height: 600px;
            object-fit: contain;
            display: block;
            transition: transform 0.5s ease-in-out, opacity 0.3s ease;
        }
        
        .gallery-main-image.slide-left {
            transform: translateX(-100%);
            opacity: 0;
        }
        
        .gallery-main-image.slide-right {
            transform: translateX(100%);
            opacity: 0;
        }
        
        .gallery-main-image.slide-in-left {
            transform: translateX(100%);
            opacity: 0;
            animation: slideInFromRight 0.5s ease-in-out forwards;
        }
        
        .gallery-main-image.slide-in-right {
            transform: translateX(-100%);
            opacity: 0;
            animation: slideInFromLeft 0.5s ease-in-out forwards;
        }
        
        @keyframes slideInFromRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideInFromLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .gallery-caption {
            padding: 20px;
            text-align: center;
            font-weight: 600;
            color: #333;
            background: white;
            border-top: 1px solid #e9ecef;
            font-size: 16px;
        }
        
        .gallery-indicators {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        
        .gallery-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .gallery-indicator.active {
            background: #d4af37;
            transform: scale(1.2);
        }
        
        .gallery-indicator:hover {
            background: #b8941f;
        }
        
        /* Responsivo para galeria */
        @media (max-width: 768px) {
            .gallery-nav-btn {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
            
            .gallery-nav-btn.prev-btn {
                left: 10px;
            }
            
            .gallery-nav-btn.next-btn {
                right: 10px;
            }
            
            .gallery-main {
                width: 100%;
            }
            
            .gallery-main-image {
                height: auto;
                max-height: 400px;
            }
            
            .product-gallery-section {
                margin: 20px 0;
            }
        }
        
        .offer-option .option-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
            flex-wrap: nowrap;
            gap: 15px;
        }
        
        .offer-option h4 {
            color: #333;
            font-size: 1.3rem;
            margin: 0;
            white-space: normal;
            flex-shrink: 1;
            line-height: 1.3;
            word-wrap: break-word;
        }
        
        .offer-option .price {
            font-size: 1.5rem;
            font-weight: 700;
            color: #d4af37;
            white-space: nowrap;
            flex-shrink: 0;
            align-self: flex-start;
            margin-top: 0;
        }
        
        .offer-option .description {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 10px;
        }
        
        .offer-option .discount {
            background: #d4af37;
            color: white;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            position: absolute;
            top: -8px;
            right: -8px;
        }
        
        .product-summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .product-image {
            width: 300px;
            height: 400px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            margin: 0 auto 20px;
            display: block;
            object-fit: cover;
        }
        
        .product-details h3 {
            color: #333;
            font-size: 1.8rem;
            margin-bottom: 15px;
        }
        
        .product-details p {
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .offer-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .offer-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
            margin-top: 20px;
        }
        
        .offer-option {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 15px;
        }
        
        .offer-option:hover {
            border-color: #d4af37;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.15);
        }
        
        .offer-option.selected {
            border-color: #d4af37;
            background: linear-gradient(135deg, #fff9e6, #fff);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.2);
            transform: translateY(-2px);
        }
        
        .offer-option .option-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
            flex-wrap: nowrap;
            gap: 15px;
        }
        
        .offer-option h4 {
            color: #333;
            font-size: 1.3rem;
            margin: 0;
            white-space: normal;
            flex-shrink: 1;
            line-height: 1.3;
            word-wrap: break-word;
        }
        
        .offer-option .price {
            font-size: 1.5rem;
            font-weight: 700;
            color: #d4af37;
            white-space: nowrap;
            flex-shrink: 0;
            align-self: flex-start;
            margin-top: 0;
        }
        
        .offer-option .description {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 10px;
        }
        
        .offer-option .discount {
            background: #d4af37;
            color: white;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            position: absolute;
            top: -8px;
            right: -8px;
        }
        
        .offer-checkbox {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 20px;
            height: 20px;
            accent-color: #d4af37;
            cursor: pointer;
        }
        
        .offer-option.has-checkbox {
            padding-left: 50px;
        }
        
        .offer-option.has-checkbox .option-header {
            margin-left: 10px;
        }
        
        .offer-image-container {
            text-align: left;
            margin: 15px 0;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .offer-image {
            max-width: 120px;
            max-height: 120px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            object-fit: contain;
            width: 100%;
            height: auto;
            flex-shrink: 0;
        }
        
        .offer-description-container {
            flex: 1;
        }
        
        .summary-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 20px;
            position: sticky;
            top: 20px;
            margin-bottom: 20px;
        }
        
        .summary-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.4rem;
            text-align: center;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 10px;
        }
        
        .form-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3rem;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-section h3 i {
            color: #d4af37;
            font-size: 1.2rem;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            flex: 1;
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
            color: #333;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
            transform: translateY(-1px);
        }
        
        .form-group input:hover,
        .form-group select:hover,
        .form-group textarea:hover {
            border-color: #d4af37;
        }
        
        .checkout-summary {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .summary-row.total {
            border-top: 2px solid #d4af37;
            padding-top: 15px;
            margin-top: 15px;
            font-size: 1.2rem;
            font-weight: 700;
            color: #d4af37;
        }
        
        .checkout-btn {
            width: 100%;
            background: linear-gradient(135deg, #d4af37, #b8941f);
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
        }
        
        .checkout-btn:active {
            transform: translateY(0);
        }
        
        
        .back-link {
            text-align: center;
            margin-top: 20px;
        }
        
        .back-link a {
            color: #d4af37;
            text-decoration: none;
            font-weight: 500;
        }
        
        .back-link a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            .checkout-container {
                padding: 20px 10px;
                margin-top: 20px;
            }
            
            .checkout-layout {
                gap: 20px;
            }
            
            .unified-section {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 20px;
            }
            
            .checkout-bottom {
                grid-template-columns: 1fr;
            gap: 20px;
        }
        
            .form-row {
            flex-direction: column;
            }
            
            .form-group {
                width: 100%;
            }
            
            .product-summary {
                flex-direction: column;
                text-align: center;
            }
            
            .offer-options {
                gap: 15px;
            }
            
            .offer-option {
                padding: 15px;
            }
            
            .summary-section {
                position: static;
            }
            
            .offer-section, .summary-section, .form-section {
                padding: 20px;
            }
            
            .checkout-header h1 {
                font-size: 2rem;
            }
            
            .product-image {
                max-width: 200px;
                height: auto;
            }
            
            .offer-option .option-header {
                flex-wrap: nowrap;
                gap: 10px;
                align-items: flex-start;
            }
            
            .offer-option h4 {
                font-size: 1.1rem;
                flex-shrink: 1;
                line-height: 1.2;
            }
            
            .offer-option .price {
                font-size: 1.3rem;
                flex-shrink: 0;
                align-self: flex-start;
            }
        }

        /* Before & After Slider Styles */
        .before-after-section {
            margin: 40px auto;
            max-width: 1200px;
            padding: 40px;
            background: #f8f9fa;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .before-after-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .before-after-header h3 {
            color: #d4af37;
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .before-after-header p {
            color: #666;
            font-size: 1.1rem;
        }
        
        .slider-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .slider-wrapper {
            position: relative;
            width: 100%;
            height: 400px;
            cursor: pointer;
        }
        
        .slider-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .slider-before {
            z-index: 2;
        }
        
        .slider-after {
            z-index: 1;
        }
        
        .slider-line {
            position: absolute;
            top: 0;
            left: 50%;
            width: 4px;
            height: 100%;
            background: #d4af37;
            z-index: 3;
            transform: translateX(-50%);
        }
        
        .slider-handle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 50px;
            height: 50px;
            background: #d4af37;
            border-radius: 50%;
            z-index: 4;
            cursor: grab;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            transform: translate(-50%, -50%);
        }
        
        .slider-handle:active {
            cursor: grabbing;
        }
        
        .slider-labels {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            z-index: 3;
            padding: 0 20px;
        }
        
        .slider-label {
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .slider-label.after {
            background: rgba(0,0,0,0.9);
        }
        
        .slider-label.before {
            background: rgba(212, 175, 55, 0.9);
        }

        /* Reviews Section Styles */
        .reviews-section {
            background: white url('Background das reviews.jpg') center center / cover no-repeat; /* Fixed path */
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 40px;
            margin: 60px auto 40px;
            position: relative;
            max-width: 1200px;
        }

        .reviews-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.85);
            border-radius: 15px;
            z-index: 1;
        }

        .reviews-section > * {
            position: relative;
            z-index: 2;
        }
        


        .reviews-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .reviews-header h3 {
            color: #d4af37;
            font-size: 2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .reviews-header h3 i {
            color: #d4af37;
            font-size: 1.8rem;
        }

        .reviews-header p {
            color: #666;
            font-size: 1.1rem;
        }

        .reviews-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .review-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .review-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(212, 175, 55, 0.15);
            border-color: #d4af37;
        }

        .review-image {
            text-align: center;
            margin-bottom: 20px !important;
            display: block;
        }

        .review-content {
            text-align: center;
        }

        .review-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #d4af37, #b8941f);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid #fff;
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
            margin: 0 auto;
        }

        .review-avatar i {
            font-size: 2.2rem;
            color: white;
        }

        .review-stars {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin-bottom: 15px;
        }

        .review-stars i {
            color: #ffd700;
            font-size: 1.1rem;
        }

        .review-stars i.far {
            color: #ddd;
        }

        .review-text {
            color: #333;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 10px;
            font-style: italic;
            text-align: center;
        }

        .review-author {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .review-author strong {
            color: #333;
            font-size: 1.1rem;
        }

        .review-date {
            color: #888;
            font-size: 0.9rem;
        }

        .review-text::before {
            content: '"';
            font-size: 2rem;
            color: #d4af37;
            opacity: 0.5;
        }

        .review-text::after {
            content: '"';
            font-size: 2rem;
            color: #d4af37;
            opacity: 0.5;
        }

        .review-author {
            text-align: center;
            border-top: 1px solid #e0e0e0;
            padding-top: 15px;
        }

        .review-author strong {
            color: #333;
            font-size: 1.1rem;
            display: block;
            margin-bottom: 5px;
        }

        .review-date {
            color: #666;
            font-size: 0.9rem;
        }


        /* Video specific styles */
        .review-image video:hover {
            transform: scale(1.02);
        }

        .review-image img:hover {
            transform: scale(1.02);
        }


        .video-fallback {
            width: 100%;
            height: 100%;
            background: #f8f9fa;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            color: #666;
            text-align: center;
            padding: 20px;
        }

        /* Disable fullscreen functionality */
        video::-webkit-media-controls-fullscreen-button {
            display: none !important;
        }
        
        video::-webkit-media-controls {
            overflow: hidden !important;
        }
        
        video {
            pointer-events: none;
        }
        
        video::-webkit-media-controls-panel {
            display: none !important;
        }
        
        /* Custom video controls */
        .video-controls {
            position: absolute;
            bottom: 10px;
            right: 10px;
            z-index: 1000;
            pointer-events: auto;
        }
        
        .audio-toggle-btn {
            background: rgba(0, 0, 0, 0.7);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s ease;
            z-index: 1000;
            pointer-events: auto;
            position: relative;
        }
        
        .audio-toggle-btn:hover {
            background: rgba(0, 0, 0, 0.9);
            transform: scale(1.1);
        }
        
        .audio-toggle-btn.audio-on {
            background: rgba(212, 175, 55, 0.8);
        }
        
        .audio-toggle-btn.audio-on:hover {
            background: rgba(212, 175, 55, 1);
        }

        .video-fallback i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #d4af37;
        }

        .video-fallback p {
            margin: 0;
            font-size: 0.9rem;
        }

        .video-fallback p:last-child {
            margin-top: 5px;
            font-size: 0.8rem;
        }

        /* Clickable review styles */
        .clickable-review {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clickable-review:hover {
            background: #f0f0f0;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.2);
        }

        /* Modal styles */
        .review-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 15px;
        }

        .modal-close {
            background: #d4af37;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: #b8941f;
        }

        /* Quantity Controls Styles */
        /* Quantity Button Hover Effects */
        .quantity-btn:hover {
            background: #d4af37 !important;
            color: white !important;
            transform: scale(1.1);
        }

        .quantity-btn:active {
            transform: scale(0.95);
        }

        /* Reviews Mobile Responsiveness */
        @media (max-width: 1024px) {
            .reviews-container {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
            }
        }

        @media (max-width: 768px) {
            .reviews-section {
                padding: 25px 20px;
                margin-bottom: 20px;
            }

            .reviews-header h3 {
                font-size: 1.6rem;
            }

            .reviews-container {
                grid-template-columns: 1fr;
                gap: 20px;
                max-width: 100%;
            }

            .review-item {
                padding: 20px;
            }

            .review-avatar {
                width: 60px;
                height: 60px;
            }

            .review-avatar i {
                font-size: 1.8rem;
            }
        }

        @media (max-width: 480px) {
            .reviews-container {
                gap: 15px;
            }

            .review-item {
                padding: 15px;
            }

            .review-text {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <div class="logo-container">
                    <img src="../../Logo.png" alt="67 Beauty Hub" class="logo-image">
                    <div class="logo-text"><span class="logo-brand">67 BEAUTY HUB</span></div>
            </div>
            </div>
            <ul class="nav-menu">
                <li class="nav-item"><a href="../../index.html" class="nav-link" data-translate-key="nav_home">Home</a></li>
                <li class="nav-item"><a href="../../index.html#products" class="nav-link" data-translate-key="nav_products">Products</a></li>
                <li class="nav-item"><a href="../../index.html#about" class="nav-link" data-translate-key="nav_about">About</a></li>
                <li class="nav-item"><a href="../../index.html#contact" class="nav-link" data-translate-key="nav_contact">Contact</a></li>
            </ul>
            
            <!-- Currency automatically detected based on browser language -->
                        </div>
            </div>
        </div>
    </nav>

    <div class="checkout-container">
            <div class="checkout-header">
            <h1><i class="fas fa-shopping-cart"></i> <span data-translate-key="checkout_title">Checkout</span></h1>
            <p data-translate-key="checkout_subtitle">Choose your offer and complete your order securely</p>
            </div>

        <div class="checkout-layout">
            <div class="unified-section">
                <div class="product-info">
                    <div class="product-summary">
                        <img src="Apresentação.png" alt="Wrinkle Reducer" class="product-image" id="mainProductImage" />
                        <div class="product-details">
                            <h3 data-translate-key="product_wrinkle_reducer">Wrinkle Reducer</h3>
                            <p data-translate-key="product_wrinkle_reducer_description">Eliminate wrinkles and expression lines at home. Red light + massage + 7 functions. Visible results in 2 weeks.</p>
                </div>
                </div>
            </div>

                <div class="offer-section">
                    <h3 data-translate-key="choose_offer"><i class="fas fa-gift"></i> Choose Your Offer</h3>
                    
                            <div class="offer-options">
                        <div class="offer-option has-checkbox selected" data-option="basic">
                            <input type="checkbox" class="offer-checkbox" id="offer-basic" data-option="basic" checked>
                                    <div class="option-header">
                                <h4 data-translate-key="product_wrinkle_reducer">Wrinkle Reducer</h4>
                                <span class="price" id="basic-price">$17.45</span>
                                    </div>
                            <div class="discount">50% OFF</div>
                            <p class="description" data-translate-key="offer_basic_description">Worried about wrinkles and fine lines? The Wrinkle Reducer uses red light to stimulate collagen and restore firmness to your skin without leaving home.</p>
                            
                            <!-- Sistema de Quantidade -->
                            <div class="quantity-section" style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #e0e0e0;">
                                <h5 style="color: #333; margin-bottom: 10px; font-size: 1rem;" data-translate-key="quantity_label">Quantity:</h5>
                                <div class="quantity-controls" style="display: flex; align-items: center; gap: 15px; justify-content: center;">
                                    <button type="button" class="quantity-btn" id="decreaseQty" style="width: 40px; height: 40px; border: 2px solid #d4af37; background: white; color: #d4af37; border-radius: 50%; cursor: pointer; font-size: 1.2rem; font-weight: bold; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;">-</button>
                                    <input type="number" id="productQuantity" value="1" min="1" max="10" style="width: 60px; height: 40px; text-align: center; border: 2px solid #d4af37; border-radius: 8px; font-size: 1.1rem; font-weight: 600; color: #333;">
                                    <button type="button" class="quantity-btn" id="increaseQty" style="width: 40px; height: 40px; border: 2px solid #d4af37; background: white; color: #d4af37; border-radius: 50%; cursor: pointer; font-size: 1.2rem; font-weight: bold; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;">+</button>
                                </div>
                                <p style="text-align: center; margin-top: 10px; color: #666; font-size: 0.9rem;" data-translate-key="max_10_units">Maximum 10 units</p>
                            </div>
                            
                        </div>

                        <div class="offer-option has-checkbox" data-option="premium">
                            <input type="checkbox" class="offer-checkbox" id="offer-premium" data-option="premium">
                            <div class="option-header">
                                <h4 data-translate-key="offer_premium_title">Face Mask Therapy</h4>
                                <span class="price" id="premium-price">$35.36</span>
                        </div>
                            <div class="offer-image-container">
                                <img src="type1 set nobox.png" alt="Face Mask Therapy" class="offer-image">
                                <div class="offer-description-container">
                                    <div class="description" data-translate-key="offer_premium_description">Tired skin with signs of aging? Anti-Aging Facial Mask Therapy deeply hydrates, reduces fine lines and restores youthful glow to your face.</div>
                        </div>
                    </div>
                </div>

                            </div>
                            </div>

                <!-- Galeria de Imagens -->
                <div class="product-gallery-section">
                <div class="simple-gallery">
                    <div class="gallery-main">
                        <button class="gallery-nav-btn prev-btn" id="prevBtn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <img src="Galeria/516848824_2127249251135000_2813377934115782079_n.jpg" alt="Wrinkle Reducer" class="gallery-main-image" id="galleryMainImage">
                        <button class="gallery-nav-btn next-btn" id="nextBtn">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        </div>
                </div>
                    <div class="gallery-indicators" id="galleryIndicators">
                        <!-- Indicators will be generated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Checkout Form -->
            <div class="checkout-bottom">
                <div class="form-section">
                    <h3><i class="fas fa-user"></i> <span data-translate-key="customer_info">Customer Information</span></h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName" data-translate-key="first_name">First Name *</label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName" data-translate-key="last_name">Last Name *</label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email" data-translate-key="email_label">Email *</label>
                        <input type="email" id="email" name="email" required placeholder="seu@email.com">
                    </div>

                    <div class="form-group">
                        <label for="phone" data-translate-key="phone_label">Phone *</label>
                        <input type="tel" id="phone" name="phone" required placeholder="+1 (555) 123-4567">
                    </div>

                    <h3><i class="fas fa-truck"></i> <span data-translate-key="shipping_info">Shipping Information</span></h3>
                    
                    <div class="form-group">
                        <label for="address" data-translate-key="address_label">Address *</label>
                        <textarea id="address" name="address" rows="3" required placeholder="Street address, apartment, suite, etc."></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="city" data-translate-key="city_label">City *</label>
                            <input type="text" id="city" name="city" required>
                        </div>
                        <div class="form-group">
                            <label for="state" data-translate-key="state_label">State/Province *</label>
                            <input type="text" id="state" name="state" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="zipCode" data-translate-key="zip_code_label">ZIP/Postal Code *</label>
                            <input type="text" id="zipCode" name="zipCode" required>
                        </div>
                        <div class="form-group">
                            <label for="country" data-translate-key="country_label">Country *</label>
                            <select id="country" name="country" required>
                                <option value="" data-translate-key="select_country">Select Country</option>
                                <option value="US" data-translate-key="country_us">United States</option>
                                <option value="BR" data-translate-key="country_br">Brazil</option>
                                <option value="PT" data-translate-key="country_pt">Portugal</option>
                                <option value="CA" data-translate-key="country_ca">Canada</option>
                                <option value="GB" data-translate-key="country_gb">United Kingdom</option>
                                <option value="DE" data-translate-key="country_de">Germany</option>
                                <option value="FR" data-translate-key="country_fr">France</option>
                                <option value="ES" data-translate-key="country_es">Spain</option>
                                <option value="IT" data-translate-key="country_it">Italy</option>
                                <option value="AU" data-translate-key="country_au">Australia</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="observations" data-translate-key="observations_label">Order Notes (optional)</label>
                        <textarea id="observations" name="observations" rows="3" placeholder="Any special instructions for your order?"></textarea>
                    </div>

                    <h3><i class="fas fa-credit-card"></i> <span data-translate-key="payment_method">Payment Method</span></h3>
                    
                    <div class="form-group">
                        <label for="paymentMethod" data-translate-key="payment_method_label">Payment Method *</label>
                        <select id="paymentMethod" name="paymentMethod" required>
                            <option value="" data-translate-key="select_option">Select</option>
                            <option value="paypal" data-translate-key="paypal_option">PayPal</option>
                            <option value="pix" id="pix-option" style="display: none;" data-translate-key="pix_option">PIX (Brazil only)</option>
                            <option value="stripe" id="stripe-option" style="display: none;" data-translate-key="stripe_option">Credit Card (Stripe)</option>
                        </select>
                    </div>

                    <div id="paypal-payment-button" style="display: none;"></div>
                    <div id="pix-payment-info" style="display: none;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border: 2px solid #d4af37; text-align: center;">
                            <h4 style="color: #d4af37; margin-bottom: 15px;"><i class="fas fa-qrcode"></i> <span data-translate-key="pix_payment">PIX Payment</span></h4>
                            <p style="color: #666; margin-bottom: 15px;" data-translate-key="pix_payment_info">After confirming your order, you will receive PIX payment instructions by email.</p>
                            <div style="background: white; padding: 15px; border-radius: 8px; border: 1px solid #ddd;">
                                <strong data-translate-key="pix_key">PIX Key:</strong> contato@67beautyhub.com
                            </div>
                        </div>
                    </div>
                    
                    <div id="stripe-payment-info" style="display: none;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border: 2px solid #d4af37; text-align: center;">
                            <h4 style="color: #d4af37; margin-bottom: 15px;"><i class="fas fa-credit-card"></i> <span data-translate-key="stripe_payment">Credit Card Payment</span></h4>
                            <p style="color: #666; margin-bottom: 15px;" data-translate-key="stripe_payment_info">Secure payment processing with Stripe. Your card information is encrypted and secure.</p>
                        </div>
                    </div>

                    <button class="checkout-btn" onclick="processCheckout()">
                        <i class="fas fa-lock"></i> <span data-translate-key="confirm_order">Complete Order</span>
                        </button>
                </div>

                <!-- Order Summary -->
                <div class="summary-section">
                    <h3><i class="fas fa-receipt"></i> <span data-translate-key="order_summary">Order Summary</span></h3>
                    <div class="checkout-summary">
                        <div id="selectedOffers"></div>
                        <div class="summary-row total">
                            <span data-translate-key="total">Total</span>
                            <span id="totalAmount">$17.45</span>
            </div>

                        <!-- Currency automatically detected based on browser language -->
                        </div>
                        </div>
                        </div>
                    </div>
                </div>

    <!-- Before & After Slider Section -->
    <div class="before-after-section">
        <div class="before-after-header">
            <h3><i class="fas fa-magic"></i> <span data-translate-key="slider_title">See the Instant Transformation</span></h3>
            <p data-translate-key="slider_description">Drag the slider to see the amazing before and after results with <span data-translate-key="product_wrinkle_reducer">Wrinkle Reducer</span></p>
        </div>
        
        <div class="slider-container">
            <div class="slider-wrapper" id="beforeAfterSlider">
                <!-- Before Image (right side) -->
                <img src="Before.jpeg" alt="Before" class="slider-image slider-before" id="beforeImage">
                <!-- After Image (left side) -->
                <img src="After .jpeg" alt="After" class="slider-image slider-after" id="afterImage">
                <div class="slider-line" id="sliderLine"></div>
                <div class="slider-handle" id="sliderHandle">
                    <i class="fas fa-arrows-alt-h"></i>
                </div>
                <div class="slider-labels">
                    <div class="slider-label after">AFTER</div>
                    <div class="slider-label before">BEFORE</div>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 20px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
            <p style="color: #333; font-size: 1.1rem; margin: 0;">
                <i class="fas fa-star" style="color: #d4af37;"></i> 
                <strong data-translate-key="slider_results_title">Real results from real customers!</strong> 
                <span data-translate-key="slider_results_description">This is what you can achieve with just one application of <span data-translate-key="product_wrinkle_reducer">Wrinkle Reducer</span>.</span>
            </p>
        </div>
    </div>

    <!-- Reviews Section (moved to end) -->
    <div class="reviews-section" style="margin: 40px auto; max-width: 1200px; padding: 40px 20px; background-image: url('Background das reviews.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat; border-radius: 15px; position: relative;">
                <div class="reviews-header">
            <h3 data-translate-key="reviews_title"><i class="fas fa-star"></i> What our customers are saying</h3>
            <p data-translate-key="reviews_subtitle">More than 1,400 satisfied customers with our products</p>
            
            <!-- Button to add review -->
            <div style="margin-top: 20px;">
                <button id="addReviewBtn" style="background: #d4af37; color: white; border: none; padding: 12px 24px; border-radius: 25px; font-size: 16px; cursor: pointer; transition: all 0.3s ease;">
                    <i class="fas fa-plus"></i> <span data-translate-key="add_review_btn">Add Your Review</span>
                </button>
            </div>
                </div>

                <div class="reviews-container">
            <div class="review-item clickable-review" 
                 data-review-id="sarah"
                 data-author="Sarah M."
                 data-date="2 weeks ago"
                 data-stars="4">
                        <div class="review-image">
                            <div class="review-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                        <div class="review-content">
                            <div class="review-stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                            </div>
                    <p class="review-text" data-translate-key="review_sarah">"They gave me a rigid facial mask during a facial, and I was hesitant about buying one, but I liked this model better because it is manageable and very comfortable!! I like using it, first I clean my face well, use it, and then add vitamin C and hyaluronic acid serum, then cream (together or alternate). I've been using it for about 3 weeks, at least 3 times a week. It's still too early to see the benefits, but the day after I use it, my husband tells me I look younger :)"</p>
                            <div class="review-author">
                                <strong>Sarah M.</strong>
                        <span class="review-date" data-translate-key="verified_purchase_2_weeks">Verified Purchase • 2 weeks ago</span>
                            </div>
                        </div>
                    </div>

            <div class="review-item clickable-review" 
                 data-review-id="jennifer"
                 data-author="Jennifer K."
                 data-date="1 week ago"
                 data-stars="5">
                        <div class="review-image">
                    <img src="REviews/The mask is of very high quality, with pleasant material. Thanks to the seller. ❤️ 😌.png" alt="Review Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                            </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text" data-translate-key="review_jennifer">"The mask is of very high quality, with pleasant material. Thanks to the seller. ❤️ 😌"</p>
                    <div class="review-author">
                        <strong>Jennifer K.</strong>
                        <span class="review-date" data-translate-key="verified_purchase_1_week">Verified Purchase • 1 week ago</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-review-id="amanda"
                 data-author="Amanda R."
                 data-date="3 days ago"
                 data-stars="5">
                <div class="review-image">
                    <img src="REviews/Very very impressed with this product! Packaged well and very high quality.png" alt="Review Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                        </div>
                        <div class="review-content">
                            <div class="review-stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                    <p class="review-text" data-translate-key="review_amanda">"Very very impressed with this product! Packaged well and very high quality"</p>
                            <div class="review-author">
                        <strong>Amanda R.</strong>
                        <span class="review-date" data-translate-key="verified_purchase_3_days">Verified Purchase • 3 days ago</span>
                            </div>
                        </div>
                    </div>

            <div class="review-item clickable-review" 
                 data-review-id="michelle"
                 data-author="Michelle T."
                 data-date="5 days ago"
                 data-stars="4">
                        <div class="review-image">
                    <img src="REviews/The material seems to be of good quality and comfortable to wear, it needs to be.png" alt="Review Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                            </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                    </div>
                    <p class="review-text" data-translate-key="review_michelle">"The material seems to be of good quality and comfortable to wear, it needs to be charged for 5 hours before it can be used."</p>
                    <div class="review-author">
                        <strong>Michelle T.</strong>
                        <span class="review-date" data-translate-key="verified_purchase_5_days">Verified Purchase • 5 days ago</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-review-id="lisa"
                 data-author="Lisa W."
                 data-date="2 days ago"
                 data-stars="5">
                <div class="review-image">
                    <img src="REviews/Perfect...great packaging, arrived quickly, all LEDs work perfectly. Advice.png" alt="Review Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                        </div>
                        <div class="review-content">
                            <div class="review-stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                            </div>
                    <p class="review-text" data-translate-key="review_lisa">"Perfect...great packaging, arrived quickly, all LEDs work perfectly. Advice"</p>
                            <div class="review-author">
                        <strong>Lisa W.</strong>
                        <span class="review-date" data-translate-key="verified_purchase_2_days">Verified Purchase • 2 days ago</span>
                            </div>
                        </div>
                    </div>

            <div class="review-item clickable-review" 
                 data-review-id="rachel"
                 data-author="Rachel M."
                 data-date="1 day ago"
                 data-stars="5">
                <div class="review-image">
                    <video id="reviewVideo" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;" preload="metadata" muted loop>
                        <source src="REviews/Amazon.com- Customer reviews- Face and Neck Massager Tool, 7-in-1 Color Red-Light-Therapy Wand for S.mp4" type="video/mp4">
                        <div class="video-fallback">
                            <i class="fas fa-video"></i>
                            <p data-translate-key="video_review_available">Video Review Available</p>
                            <p data-translate-key="click_to_play">Click to play</p>
                        </div>
                    </video>
                    <div class="video-controls">
                        <button id="audioToggle" class="audio-toggle-btn" title="Toggle Audio">
                            <i class="fas fa-volume-mute"></i>
                        </button>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text" data-translate-key="review_rachel">"Excellent product! The red light therapy works amazing and the 7-in-1 functionality is incredible. Highly recommend this wand for anyone looking for professional skincare results at home."</p>
                    <div class="review-author">
                        <strong>Rachel M.</strong>
                        <span class="review-date" data-translate-key="verified_purchase_1_day">Verified Purchase • 1 day ago</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Review -->
    <div id="reviewModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; width: 90%; max-height: 90vh; overflow-y: auto;">
            <h3 style="color: #d4af37; margin-bottom: 20px;"><i class="fas fa-star"></i> <span data-translate-key="add_review_modal">Add Review</span></h3>
            <form id="reviewForm">
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;" data-translate-key="your_name">Your Name:</label>
                    <input type="text" id="reviewerName" required style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;" data-translate-key="rating_label">Rating:</label>
                    <div id="starRating" style="display: flex; gap: 5px; justify-content: center; margin: 10px 0;">
                        <i class="far fa-star" data-rating="1" style="font-size: 2rem; color: #ddd; cursor: pointer; transition: color 0.2s;"></i>
                        <i class="far fa-star" data-rating="2" style="font-size: 2rem; color: #ddd; cursor: pointer; transition: color 0.2s;"></i>
                        <i class="far fa-star" data-rating="3" style="font-size: 2rem; color: #ddd; cursor: pointer; transition: color 0.2s;"></i>
                        <i class="far fa-star" data-rating="4" style="font-size: 2rem; color: #ddd; cursor: pointer; transition: color 0.2s;"></i>
                        <i class="far fa-star" data-rating="5" style="font-size: 2rem; color: #ddd; cursor: pointer; transition: color 0.2s;"></i>
                    </div>
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;" data-translate-key="your_review">Your Review:</label>
                    <textarea id="reviewText" required style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; min-height: 100px; resize: vertical;"></textarea>
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;" data-translate-key="photo_optional">Photo (optional):</label>
                    <input type="file" id="reviewImage" accept="image/*" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                    <div id="imagePreview" style="margin-top: 10px; text-align: center;"></div>
                </div>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button type="submit" style="background: #d4af37; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;" data-translate-key="submit_review">Submit Review</button>
                    <button type="button" id="closeReviewModal" style="background: #666; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;" data-translate-key="cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Currency System for Checkout
        let currentCurrency = 'USD';
        let summaryCurrency = 'USD'; // Specific currency for order summary
        let currentLanguage = 'en'; // Idioma independente da moeda
        let exchangeRates = {
            'USD': { symbol: '$', rate: 1, locale: 'en-US', currency: 'USD' },
            'BRL': { symbol: 'R$', rate: 5.20, locale: 'pt-BR', currency: 'BRL' },
            'EUR': { symbol: '€', rate: 0.85, locale: 'de-DE', currency: 'EUR' },
            'AOA': { symbol: 'Kz', rate: 920, locale: 'pt-AO', currency: 'AOA' }
        };

        // Currency detection is now automatic - no manual selection needed
        
        // Change main currency (affects everything including summary)
        function changeMainCurrency(currencyCode) {
            currentCurrency = currencyCode;
            
            // Update all prices including summary
            updateCurrencyDisplay();
            
            // Save selection to localStorage
            localStorage.setItem('selectedCurrency', currencyCode);
            
        }

        // Manual currency selection (user override)
        function setCurrency(currency) {
            currentCurrency = currency;
            // DO NOT change language when changing currency
            
            // Save user preference (overrides auto-detection)
            localStorage.setItem('preferredCurrency', currency);
            localStorage.setItem('userManuallySelectedCurrency', 'true');
            
            updateCurrencyDisplay();
            // DO NOT call updateReviewsLanguage() here
            
            
            // Show confirmation message
            showCurrencyChangeConfirmation(currency);
        }

        // Manual language selection (independent of currency)
        function setLanguage(language) {
            currentLanguage = language;
            
            // Save user preference
            localStorage.setItem('preferredLanguage', language);
            localStorage.setItem('userManuallySelectedLanguage', 'true');
            
            updateReviewsLanguage();
            
            
            // Show confirmation message
            showLanguageChangeConfirmation(language);
        }

        // Show confirmation when user changes language
        function showLanguageChangeConfirmation(language) {
            const languageNames = {
                'pt': 'Portuguese',
                'en': 'English'
            };
            
            const confirmationMsg = document.createElement('div');
            confirmationMsg.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #d4af37;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
                z-index: 10000;
                font-weight: 600;
                animation: slideInRight 0.3s ease-out;
            `;
            confirmationMsg.innerHTML = `🌍 Idioma alterado para ${languageNames[language]}`;
            
            document.body.appendChild(confirmationMsg);
            
            setTimeout(() => {
                confirmationMsg.remove();
            }, 3000);
        }

        // Show confirmation when user changes currency
        function showCurrencyChangeConfirmation(currency) {
            const currencyNames = {
                'USD': '🇺🇸 American Dollar',
                'BRL': '🇧🇷 Brazilian Real',
                'EUR': '🇪🇺 Euro'
            };
            
            const confirmationMsg = document.createElement('div');
            confirmationMsg.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #d4af37;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
                z-index: 10000;
                font-weight: 600;
                animation: slideInRight 0.3s ease-out;
            `;
            confirmationMsg.innerHTML = `💰 Moeda alterada para ${currencyNames[currency]}`;
            
            document.body.appendChild(confirmationMsg);
            
            setTimeout(() => {
                confirmationMsg.remove();
            }, 3000);
        }

        // Update currency display for all elements
        function updateCurrencyDisplay() {
            // Update all price displays
            updateAllPrices();
            
            // Update order summary
            updateOrderSummary();
            
        }

        // Update all prices on the page
        function updateAllPrices() {
            console.log('💰 Updating prices for currency:', currentCurrency);
            console.log('📊 Offers object:', offers);
            
            // Ensure variables are properly initialized
            if (!currentCurrency) {
                currentCurrency = 'USD';
                console.log('⚠️ currentCurrency was undefined, set to USD');
            }
            
            if (!offers || typeof offers !== 'object') {
                console.error('❌ Offers object not properly initialized');
                return;
            }
            
            // Update basic offer price
            const basicPriceElement = document.getElementById('basic-price');
            if (basicPriceElement && offers.basic) {
                // Use the price directly from offers object for current currency
                const price = offers.basic.prices[currentCurrency] || offers.basic.prices.USD;
                const formattedPrice = formatPrice(price, currentCurrency);
                basicPriceElement.textContent = formattedPrice;
                console.log('✅ Basic price updated:', formattedPrice, 'from price:', price);
            } else {
                console.warn('⚠️ Basic price element not found or offers.basic not available');
            }
            
            // Update premium offer price
            const premiumPriceElement = document.getElementById('premium-price');
            if (premiumPriceElement && offers.premium) {
                // Use the price directly from offers object for current currency
                const price = offers.premium.prices[currentCurrency] || offers.premium.prices.USD;
                const formattedPrice = formatPrice(price, currentCurrency);
                premiumPriceElement.textContent = formattedPrice;
                console.log('✅ Premium price updated:', formattedPrice, 'from price:', price);
            } else {
                console.warn('⚠️ Premium price element not found or offers.premium not available');
            }
            
            // Update total amount in summary
            updateOrderSummary();
        }


        // Format price according to currency
        function formatPrice(price, currency) {
            const currencySymbols = {
                'USD': '$',
                'BRL': 'R$',
                'EUR': '€',
                'AOA': 'Kz'
            };
            
            const symbol = currencySymbols[currency] || '$';
            
            if (currency === 'BRL') {
                return `${symbol} ${price.toFixed(2).replace('.', ',')}`;
            } else if (currency === 'AOA') {
                return `${symbol} ${price.toLocaleString()}`;
            } else {
                return `${symbol}${price.toFixed(2)}`;
            }
        }

        // Function to convert price to summary currency
        function convertPriceForSummary(priceUSD) {
            const exchangeRate = exchangeRates[summaryCurrency];
            return priceUSD * exchangeRate.rate;
        }

        // Function to format summary price
        function formatPriceForSummary(price) {
            return formatPrice(price, currentCurrency);
        }

        // Update reviews language
        function updateReviewsLanguage() {
            // This function will be implemented to update reviews language
        }

        // Initialize currency system
        document.addEventListener('DOMContentLoaded', function() {
            // Flag dropdown removed - currency detection is now automatic
            
            // Load saved preferences
            const savedCurrency = localStorage.getItem('selectedCurrency');
            if (savedCurrency && exchangeRates[savedCurrency]) {
                currentCurrency = savedCurrency;
                updateCurrencyDisplay();
            }
            
            // Event listener para o seletor de moeda do resumo
            const summaryCurrencySelector = document.getElementById('summaryCurrencySelector');
            if (summaryCurrencySelector) {
                // Inicializar com a moeda atual
                summaryCurrencySelector.value = currentCurrency;
                summaryCurrency = currentCurrency;
                
                summaryCurrencySelector.addEventListener('change', function() {
                    summaryCurrency = this.value;
                    console.log('Summary currency changed to:', summaryCurrency);
                    // Atualizar o resumo com a nova moeda
                    updateOrderSummary();
                });
            }
            
            // Before & After Slider functionality
            function initializeBeforeAfterSlider() {
                const slider = document.getElementById('beforeAfterSlider');
                const handle = document.getElementById('sliderHandle');
                const line = document.getElementById('sliderLine');
                const beforeImage = document.getElementById('beforeImage');
                const afterImage = document.getElementById('afterImage');
                
                if (!slider || !handle || !line || !beforeImage || !afterImage) {
                    console.log('Before & After Slider elements not found');
                    return;
                }
                
                let isDragging = false;
                let startX = 0;
                let currentX = 0;
                
                // Set initial position (50%)
                const initialPosition = 50;
                updateSliderPosition(initialPosition);
                
                // Mouse events
                handle.addEventListener('mousedown', startDrag);
                document.addEventListener('mousemove', drag);
                document.addEventListener('mouseup', stopDrag);
                
                // Touch events for mobile
                handle.addEventListener('touchstart', startDrag);
                document.addEventListener('touchmove', drag);
                document.addEventListener('touchend', stopDrag);
                
                // Click on slider to move handle
                slider.addEventListener('click', function(e) {
                    if (!isDragging) {
                        const rect = slider.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const percentage = (x / rect.width) * 100;
                        updateSliderPosition(Math.max(0, Math.min(100, percentage)));
                    }
                });
                
                function startDrag(e) {
                    isDragging = true;
                    startX = e.clientX || e.touches[0].clientX;
                    handle.style.cursor = 'grabbing';
                    e.preventDefault();
                }
                
                function drag(e) {
                    if (!isDragging) return;
                    
                    currentX = e.clientX || e.touches[0].clientX;
                    const rect = slider.getBoundingClientRect();
                    const x = currentX - rect.left;
                    const percentage = (x / rect.width) * 100;
                    
                    updateSliderPosition(Math.max(0, Math.min(100, percentage)));
                    e.preventDefault();
                }
                
                function stopDrag() {
                    isDragging = false;
                    handle.style.cursor = 'grab';
                }
                
                function updateSliderPosition(percentage) {
                    // Update handle position
                    handle.style.left = percentage + '%';
                    line.style.left = percentage + '%';
                    
                    // Update before image clip (right side)
                    beforeImage.style.clipPath = `inset(0 ${100 - percentage}% 0 0)`;
                    
                    // Update after image clip (left side)
                    afterImage.style.clipPath = `inset(0 0 0 ${percentage}%)`;
                }
                
                console.log('Before & After Slider initialized successfully');
            }

            // Sistema de galeria de produtos
            function initializeProductGallery() {
                const galleryImages = [
                    { src: 'Galeria/516848824_2127249251135000_2813377934115782079_n.jpg' },
                    { src: 'Galeria/71dJJYFOQjL._SL1500_.jpg' },
                    { src: 'Galeria/71L1N+QaTmL._SL1500_.jpg' },
                    { src: 'Galeria/1760613388163.jpeg' },
                    { src: 'Galeria/1760613503845.jpeg' },
                    { src: 'Galeria/1760613566236.jpeg' },
                    { src: 'Galeria/1760613577217.jpeg' },
                    { src: 'Galeria/1760613621044.jpeg' },
                    { src: 'Galeria/1760616235671.jpeg' },
                    { src: 'Galeria/Screenshot 2025-09-20 150848.png' },
                    { src: 'Galeria/Screenshot 2025-09-20 150912.png' }
                ];
                
                let currentImageIndex = 0;
                const mainImage = document.getElementById('galleryMainImage');
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                const indicatorsContainer = document.getElementById('galleryIndicators');
                
                // Debug: Verificar se os elementos foram encontrados
                console.log('🔍 Elementos encontrados:');
                console.log('📷 Main Image:', mainImage ? '✅' : '❌');
                console.log('⬅️ Prev Button:', prevBtn ? '✅' : '❌');
                console.log('➡️ Next Button:', nextBtn ? '✅' : '❌');
                console.log('🔘 Indicators Container:', indicatorsContainer ? '✅' : '❌');
                
                // Limpar indicadores existentes para evitar duplicação
                indicatorsContainer.innerHTML = '';
                
                // Criar indicadores
                console.log('🖼️ Total de imagens na galeria:', galleryImages.length);
                galleryImages.forEach((_, index) => {
                    const indicator = document.createElement('div');
                    indicator.className = 'gallery-indicator';
                    if (index === 0) indicator.classList.add('active');
                    indicator.addEventListener('click', () => goToImage(index));
                    indicatorsContainer.appendChild(indicator);
                });
                console.log('🔘 Total de indicadores criados:', document.querySelectorAll('.gallery-indicator').length);
                
                function updateImage(direction = null) {
                    const currentImage = galleryImages[currentImageIndex];
                    
                    // Apply exit transition
                    if (direction === 'next') {
                        mainImage.classList.add('slide-right');
                    } else if (direction === 'prev') {
                        mainImage.classList.add('slide-left');
                    }
                    
                    setTimeout(() => {
                        mainImage.src = currentImage.src;
                        mainImage.alt = 'Wrinkle Reducer';
                        
                        // Apply entry transition
                        if (direction === 'next') {
                            mainImage.classList.remove('slide-right');
                            mainImage.classList.add('slide-in-left');
                        } else if (direction === 'prev') {
                            mainImage.classList.remove('slide-left');
                            mainImage.classList.add('slide-in-right');
                        }
                        
                        // Remove transition classes after animation
                        setTimeout(() => {
                            mainImage.classList.remove('slide-in-left', 'slide-in-right');
                        }, 500);
                    }, 250);
                    
                    // Atualizar indicadores
                    const indicators = document.querySelectorAll('.gallery-indicator');
                    indicators.forEach((indicator, index) => {
                        indicator.classList.toggle('active', index === currentImageIndex);
                    });
                    
                    // Update buttons
                    prevBtn.disabled = currentImageIndex === 0;
                    nextBtn.disabled = currentImageIndex === galleryImages.length - 1;
                }
                
                function goToImage(index) {
                    if (index >= 0 && index < galleryImages.length) {
                        const direction = index > currentImageIndex ? 'next' : 'prev';
                        currentImageIndex = index;
                        updateImage(direction);
                    }
                }
                
                // Event listeners
                if (prevBtn) {
                    prevBtn.addEventListener('click', () => {
                        console.log('⬅️ Botão anterior clicado, índice atual:', currentImageIndex);
                        if (currentImageIndex > 0) {
                            currentImageIndex--;
                            updateImage('prev');
                            console.log('⬅️ Navegando para imagem:', currentImageIndex);
                        } else {
                            console.log('⬅️ Já na primeira imagem');
                        }
                    });
                } else {
                    console.log('❌ Botão anterior não encontrado!');
                }
                
                if (nextBtn) {
                    nextBtn.addEventListener('click', () => {
                        console.log('➡️ Botão próximo clicado, índice atual:', currentImageIndex);
                        if (currentImageIndex < galleryImages.length - 1) {
                            currentImageIndex++;
                            updateImage('next');
                            console.log('➡️ Navegando para imagem:', currentImageIndex);
                        } else {
                            console.log('➡️ Já na última imagem');
                        }
                    });
                } else {
                    console.log('❌ Botão próximo não encontrado!');
                }
                
                // Initialize button state
                updateImage();
                
                // Manual navigation only - no automatic slideshow
                // Users can navigate using buttons and indicators at their own pace
            }
            
            // Initialize gallery
            initializeProductGallery();
            
            // Initialize Before & After Slider
            initializeBeforeAfterSlider();
            
            // Video auto-play when reviews section is visible
            const reviewsSection = document.querySelector('.reviews-section');
            const reviewVideo = document.getElementById('reviewVideo');
            const audioToggle = document.getElementById('audioToggle');
            let isVideoPlaying = false;
            let isAudioOn = false;
            
            // Ensure video is ready for autoplay
            if (reviewVideo) {
                reviewVideo.addEventListener('loadeddata', function() {
                    console.log('Video loaded and ready for autoplay');
                });
                
                reviewVideo.addEventListener('canplay', function() {
                    console.log('Video can start playing');
                });
            }
            
            // Intersection Observer for auto-play
            if (reviewsSection && reviewVideo) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting && !isVideoPlaying) {
                            // Force play with user interaction simulation
                            reviewVideo.currentTime = 0;
                            reviewVideo.play().then(() => {
                                isVideoPlaying = true;
                                console.log('✅ Video started playing automatically');
                            }).catch(e => {
                                console.log('❌ Auto-play failed:', e);
                                // Try again after a short delay
                                setTimeout(() => {
                                    reviewVideo.play().then(() => {
                                        isVideoPlaying = true;
                                        console.log('✅ Video started playing on retry');
                                    }).catch(e2 => {
                                        console.log('❌ Auto-play retry failed:', e2);
                                    });
                                }, 1000);
                            });
                        } else if (!entry.isIntersecting && isVideoPlaying) {
                            reviewVideo.pause();
                            isVideoPlaying = false;
                            console.log('⏸️ Video paused - section not visible');
                        }
                    });
                }, { threshold: 0.3 });
                
                observer.observe(reviewsSection);
            }
            
            // Audio toggle functionality
            if (audioToggle && reviewVideo) {
                audioToggle.addEventListener('click', function(e) {
                    // Prevent event propagation to avoid triggering other click events
                    e.stopPropagation();
                    e.preventDefault();
                    
                    if (isAudioOn) {
                        reviewVideo.muted = true;
                        isAudioOn = false;
                        this.classList.remove('audio-on');
                        this.innerHTML = '<i class="fas fa-volume-mute"></i>';
                    } else {
                        reviewVideo.muted = false;
                        isAudioOn = true;
                        this.classList.add('audio-on');
                        this.innerHTML = '<i class="fas fa-volume-up"></i>';
                    }
                });
            }
            
            // Video autoplay is handled by Intersection Observer - no global click listener needed
            
            // Handle video end - restart automatically
            if (reviewVideo) {
                reviewVideo.addEventListener('ended', function() {
                    console.log('🔄 Video ended - restarting automatically');
                    this.currentTime = 0; // Reset to beginning
                    this.play().then(() => {
                        console.log('✅ Video restarted automatically');
                    }).catch(e => {
                        console.log('❌ Video restart failed:', e);
                    });
                });
            }
            
            // Additional fallback: Play video when page loads if reviews section is visible
            setTimeout(() => {
                if (reviewVideo && !isVideoPlaying) {
                    const rect = reviewsSection.getBoundingClientRect();
                    const isVisible = rect.top < window.innerHeight && rect.bottom > 0;
                    
                    if (isVisible) {
                        reviewVideo.play().then(() => {
                            isVideoPlaying = true;
                            console.log('✅ Video started playing on page load');
                        }).catch(e => {
                            console.log('❌ Video play failed on page load:', e);
                        });
                    }
                }
            }, 2000);
        });

        // Add CSS for animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
        `;
        document.head.appendChild(style);
    </script>

    <script>
        // Função de processamento de checkout - REDIRECIONADA para supplier-order-processor.js
        function processCheckout() {
            console.log('🔄 processCheckout() chamada - redirecionando para supplier-order-processor.js');
            // Deixar o supplier-order-processor.js interceptar o formulário
            return true;
        }
        
        let selectedOffers = ['basic']; // Array for multiple selections
        
        // Offer data with prices in multiple currencies
        const offers = {
            basic: {
                name: 'Wrinkle Reducer',
                prices: {
                    USD: 17.45,
                    BRL: 92.50,
                    EUR: 15.71,
                    AOA: 15710
                },
                discount: 0,
                shipping: {
                    USD: 2.45,
                    BRL: 12.90,
                    EUR: 2.25,
                    AOA: 2250
                }
            },
            premium: {
                name: 'Premium Skincare Set',
                prices: {
                    USD: 35.36,
                    BRL: 187.41,
                    EUR: 32.53,
                    AOA: 32530
                },
                discount: 0,
                shipping: {
                    USD: 2.45,
                    BRL: 12.90,
                    EUR: 2.25,
                    AOA: 2250
                }
            }
        };

        // Event listeners para checkboxes
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.offer-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const offerType = this.dataset.option;
                    const offerElement = this.closest('.offer-option');
                    
                    if (this.checked) {
                        if (!selectedOffers.includes(offerType)) {
                            selectedOffers.push(offerType);
                        }
                        offerElement.classList.add('selected');
            } else {
                        selectedOffers = selectedOffers.filter(offer => offer !== offerType);
                        offerElement.classList.remove('selected');
                    }
                    
                    // Garantir que pelo menos uma oferta esteja selecionada
                    if (selectedOffers.length === 0) {
                        this.checked = true;
                        selectedOffers.push(offerType);
                        offerElement.classList.add('selected');
                    }
                    
                    updateOrderSummary();
                });
            });

            // Event listeners para cliques nas ofertas
            document.querySelectorAll('.offer-option').forEach(option => {
                option.addEventListener('click', function(e) {
                    // Don't process click if it's on checkbox, quantity buttons or quantity input
                    if (e.target.type === 'checkbox' || 
                        e.target.classList.contains('quantity-btn') || 
                        e.target.id === 'productQuantity' ||
                        e.target.closest('.quantity-section')) {
                        return;
                    }
                    
                    const checkbox = this.querySelector('.offer-checkbox');
                    checkbox.checked = !checkbox.checked;
                    checkbox.dispatchEvent(new Event('change'));
                });
            });
            
            // Inicializar resumo
            updateOrderSummary();
            
            // Sistema de quantidade
            const decreaseBtn = document.getElementById('decreaseQty');
            const increaseBtn = document.getElementById('increaseQty');
            const quantityInput = document.getElementById('productQuantity');
            
            if (decreaseBtn && increaseBtn && quantityInput) {
                decreaseBtn.addEventListener('click', function(e) {
                    e.stopPropagation(); // Evita que o evento se propague para a oferta
                    let currentValue = parseInt(quantityInput.value);
                    if (currentValue > 1) {
                        quantityInput.value = currentValue - 1;
                        updateOrderSummary();
                    }
                });
                
                increaseBtn.addEventListener('click', function(e) {
                    e.stopPropagation(); // Evita que o evento se propague para a oferta
                    let currentValue = parseInt(quantityInput.value);
                    if (currentValue < 10) {
                        quantityInput.value = currentValue + 1;
                        updateOrderSummary();
                    }
                });
                
                quantityInput.addEventListener('change', function(e) {
                    e.stopPropagation(); // Evita que o evento se propague para a oferta
                    let value = parseInt(this.value);
                    if (value < 1) this.value = 1;
                    if (value > 10) this.value = 10;
            updateOrderSummary();
                });
                
                quantityInput.addEventListener('click', function(e) {
                    e.stopPropagation(); // Evita que o evento se propague para a oferta
                });
        }
        });

        // Functions for quantity control

        function updateOrderSummary() {
            const selectedOffersContainer = document.getElementById('selectedOffers');
            let total = 0;
            const quantity = parseInt(document.getElementById('productQuantity')?.value || 1);
            
            selectedOffersContainer.innerHTML = '';
            
            selectedOffers.forEach(offerType => {
                const offer = offers[offerType];
                // Get price in current currency directly
                const offerPrice = offer.prices[currentCurrency] || offer.prices.USD;
                
                // Premium offer should not be multiplied by quantity
                let offerTotal;
                let quantityText = '';
                
                if (offerType === 'premium') {
                    offerTotal = offerPrice; // Without multiplication
                    quantityText = ''; // Without showing quantity
                } else {
                    offerTotal = offerPrice * quantity; // With multiplication
                    quantityText = quantity > 1 ? `(x${quantity})` : '';
                }
                
                total += offerTotal;

                const offerRow = document.createElement('div');
                offerRow.className = 'summary-row';
                offerRow.innerHTML = `
                    <span>${offer.name} ${quantityText}</span>
                    <span>${formatPriceForSummary(offerTotal)}</span>
                `;
                selectedOffersContainer.appendChild(offerRow);
            });

            const totalElement = document.getElementById('totalAmount');
            if (totalElement) {
                totalElement.textContent = formatPriceForSummary(total);
            }
        }

        function processCheckout_OLD() { // DESABILITADA para usar supplier-order-processor.js
            const email = document.getElementById('email').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            const observations = document.getElementById('observations').value;

            if (!email || !paymentMethod) {
                alert(translateContent('fill_email_payment') || 'Please fill in the email and select a payment method.');
                return;
            }
            
            const orderData = {
                id: 'ORDER_' + Date.now(),
                products: selectedOffers.map(offerType => {
                    const quantity = parseInt(document.getElementById('productQuantity')?.value || 1);
                    const offer = offers[offerType];
                    const offerPriceUSD = offer.prices.USD;
                    
                    // Premium offer should not be multiplied by quantity
                    let totalPrice;
                    if (offerType === 'premium') {
                        totalPrice = offerPriceUSD; // Without multiplication
                    } else {
                        totalPrice = offerPriceUSD * quantity; // With multiplication
                    }
                    
                    return {
                        ...offer,
                        quantity: offerType === 'premium' ? 1 : quantity, // Premium sempre quantidade 1
                        totalPrice: totalPrice
                    };
                }),
                customer: {
                    email
                },
                paymentMethod,
                observations,
                total: selectedOffers.reduce((total, offerType) => {
                    const quantity = parseInt(document.getElementById('productQuantity')?.value || 1);
                    const offer = offers[offerType];
                    const offerPriceUSD = offer.prices.USD;
                    
                    // Premium offer should not be multiplied by quantity
                    if (offerType === 'premium') {
                        return total + offerPriceUSD; // Without multiplication
                    } else {
                        return total + (offerPriceUSD * quantity); // With multiplication
                    }
                }, 0),
                date: new Date().toISOString()
            };
            
            // Map order for supplier (AliExpress)
            let mappedOrder = null;
            if (typeof mapProductOrder === 'function') {
                try {
                    // Prepare order data for mapping
                    const mappingOrderData = {
                        id: orderData.id,
                        customer: orderData.customer,
                        items: orderData.products.map(product => ({
                            productId: 'wrinkle_reducer',
                            name: product.name,
                            variation: null, // Wrinkle Reducer has no variations
                            quantity: product.quantity,
                            unitPrice: product.totalPrice / product.quantity,
                            totalPrice: product.totalPrice
                        })),
                        total: orderData.total,
                        date: orderData.date
                    };
                    
                    // Map the order
                    mappedOrder = mapProductOrder(mappingOrderData);
                    console.log('Order mapped to supplier:', mappedOrder);
                } catch (error) {
                    console.error('Error mapping order:', error);
                }
            }
            
            // Save original order
            let orders = JSON.parse(localStorage.getItem('orders') || '[]');
            orders.push(orderData);
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // Save mapped order to dashboardData for dashboard synchronization
            let dashboardData = JSON.parse(localStorage.getItem('dashboardData') || '{}');
            if (!dashboardData.orders) dashboardData.orders = [];
            
            // Use mapped order if available, otherwise use original
            const orderToSave = mappedOrder || orderData;
            dashboardData.orders.push(orderToSave);
            localStorage.setItem('dashboardData', JSON.stringify(dashboardData));
            
            // Show specific message based on payment method
            let successMessage = `Order placed successfully!\n\nProducts: ${orderData.products.map(p => p.name).join(' + ')}\nTotal: R$ ${orderData.total.toFixed(2).replace('.', ',')}\n\n`;
            
            switch(paymentMethod) {
                case 'paypal':
                    successMessage += translateContent('paypal_processed') || 'PayPal payment has been processed. You will receive a confirmation email shortly.';
                    break;
                case 'pix':
                    successMessage += translateContent('pix_instructions') || 'You will receive PIX payment instructions by email. After payment, your order will be processed.';
                    break;
                default:
                    successMessage += translateContent('confirmation_email') || 'You will receive a confirmation email shortly.';
            }
            
            alert(successMessage);
            
            // Redirect to home page
            window.location.href = '../../index.html';
        }

        // PayPal integration
        // Payment method control
        function setupPaymentMethodControl() {
            const paymentMethodSelect = document.getElementById('paymentMethod');
            const paypalButton = document.getElementById('paypal-payment-button');
            const pixInfo = document.getElementById('pix-payment-info');
            
            if (paymentMethodSelect) {
                paymentMethodSelect.addEventListener('change', function() {
                    const selectedMethod = this.value;
                    
                    // Hide all payment options first
                    if (paypalButton) paypalButton.style.display = 'none';
                    if (pixInfo) pixInfo.style.display = 'none';
                    
                    // Show selected payment method
                    switch(selectedMethod) {
                        case 'paypal':
                            if (paypalButton) paypalButton.style.display = 'block';
                            break;
                        case 'pix':
                            if (pixInfo) pixInfo.style.display = 'block';
                            break;
                    }
                });
            }
        }
        
        // Initialize payment method control and PayPal
        document.addEventListener('DOMContentLoaded', function() {
            setupPaymentMethodControl();
            loadPayPalWithCorrectLocale();
            setupPIXForBrazilOnly();
        });

        // Global variables for PayPal currency and locale
        let currentPayPalCurrency = 'USD';
        let currentPayPalLocale = 'en_US';
        
        // Setup PIX only for Brazilian customers
        function setupPIXForBrazilOnly() {
            const userLanguage = navigator.language || navigator.userLanguage;
            const pixOption = document.getElementById('pix-option');
            
            // Show PIX only for Brazilian Portuguese (pt-BR)
            if (userLanguage.startsWith('pt-BR') || userLanguage.startsWith('pt_BR')) {
                if (pixOption) {
                    pixOption.style.display = 'block';
                    console.log('🇧🇷 Brazilian customer detected - PIX enabled');
                }
            } else {
                if (pixOption) {
                    pixOption.style.display = 'none';
                    console.log('🌍 Non-Brazilian customer - PIX disabled');
                }
            }
        }

        // Load PayPal SDK with correct locale and currency based on user's language
        function loadPayPalWithCorrectLocale() {
            // Detect user's language and currency
            const userLanguage = navigator.language || navigator.userLanguage;
            console.log('Browser language detected:', userLanguage);
            let paypalLocale = 'en_US'; // Default to English
            let paypalCurrency = 'USD'; // Default to USD
            
            // Map browser language to PayPal locale and currency
            if (userLanguage.startsWith('pt')) {
                if (userLanguage.includes('BR') || userLanguage.includes('br')) {
                    paypalLocale = 'pt_BR'; // Portuguese Brazil
                    paypalCurrency = 'BRL'; // Brazilian Real
                } else if (userLanguage.includes('PT') || userLanguage.includes('pt')) {
                    paypalLocale = 'pt_PT'; // Portuguese Portugal
                    paypalCurrency = 'EUR'; // Euro
                } else {
                    // Generic Portuguese (Angola, etc.) - use USD
                    paypalLocale = 'pt_PT'; // Portuguese interface
                    paypalCurrency = 'USD'; // US Dollar for international Portuguese speakers
                }
            } else if (userLanguage.startsWith('en')) {
                paypalLocale = 'en_US'; // English US
                paypalCurrency = 'USD'; // US Dollar
            } else if (userLanguage.startsWith('es')) {
                paypalLocale = 'es_ES'; // Spanish
                paypalCurrency = 'EUR'; // Euro for European Spanish
            } else if (userLanguage.startsWith('fr')) {
                paypalLocale = 'fr_FR'; // French
                paypalCurrency = 'EUR'; // Euro
            } else if (userLanguage.startsWith('de')) {
                paypalLocale = 'de_DE'; // German
                paypalCurrency = 'EUR'; // Euro
            }
            
            // Additional check for English browsers
            if (userLanguage === 'en' || userLanguage === 'en-US' || userLanguage === 'en_US') {
                paypalLocale = 'en_US';
                paypalCurrency = 'USD';
                console.log('Explicit English detection - forcing en_US');
            }
            
            // Store globally for use in order creation
            currentPayPalCurrency = paypalCurrency;
            currentPayPalLocale = paypalLocale;
            
            console.log('Detected language:', userLanguage, 'Using PayPal locale:', paypalLocale, 'Currency:', paypalCurrency);
            
            // Load PayPal SDK with correct locale and currency
            const script = document.createElement('script');
            script.src = `https://www.paypal.com/sdk/js?client-id=Ab2ftZVJCplquKwOY1cWgvWMivADwMhbUs-OhehwO4hVh_VW9lS87qLkRUVD39yEeoh7YGXzBeuq1Dlh&currency=${paypalCurrency}&intent=capture&locale=${paypalLocale}`;
            script.onload = function() {
                console.log('PayPal SDK loaded with locale:', paypalLocale, 'and currency:', paypalCurrency);
            // Force locale in window object for PayPal
            window.paypalLocale = paypalLocale;
            // Set HTML lang attribute to match PayPal locale
            document.documentElement.lang = paypalLocale.replace('_', '-');
            initializePayPal();
            };
            script.onerror = function() {
                console.error('Failed to load PayPal SDK');
                // Try with a simpler URL
                console.log('Retrying with simpler PayPal SDK URL...');
                const retryScript = document.createElement('script');
                retryScript.src = 'https://www.paypal.com/sdk/js?client-id=Ab2ftZVJCplquKwOY1cWgvWMivADwMhbUs-OhehwO4hVh_VW9lS87qLkRUVD39yEeoh7YGXzBeuq1Dlh&currency=USD&intent=capture';
                retryScript.async = true;
                retryScript.defer = true;
                retryScript.onload = function() {
                    console.log('PayPal SDK loaded with fallback URL');
                    setTimeout(initializePayPal, 500);
                };
                retryScript.onerror = function() {
                    console.error('PayPal SDK failed to load even with fallback URL');
                };
                document.head.appendChild(retryScript);
            };
            document.head.appendChild(script);
        }

        // Function to get current currency for order creation
        function getCurrentCurrency() {
            return currentPayPalCurrency;
        }

        // PayPal integration
        let paypalRetryCount = 0;
        const maxPaypalRetries = 50; // Maximum 5 seconds (50 * 100ms)
        
        function initializePayPal() {
            // Wait for PayPal SDK to be loaded
            if (typeof paypal === 'undefined') {
                paypalRetryCount++;
                if (paypalRetryCount < maxPaypalRetries) {
                    console.log('PayPal SDK not loaded yet, retrying...');
                    setTimeout(initializePayPal, 100);
                    return;
                } else {
                    console.error('PayPal SDK failed to load after maximum retries');
                    return;
                }
            }

            console.log('PayPal SDK loaded, initializing buttons...');
            console.log('Current PayPal Locale:', currentPayPalLocale);
            console.log('Current PayPal Currency:', currentPayPalCurrency);

        paypal.Buttons({
            locale: currentPayPalLocale,
            style: {
                locale: currentPayPalLocale,
                color: 'gold',
                shape: 'rect',
                label: 'paypal'
            },
            createOrder: function(data, actions) {
                    return new Promise((resolve, reject) => {
                        try {
                            // Validate required variables
                            if (!selectedOffers || !Array.isArray(selectedOffers) || selectedOffers.length === 0) {
                                throw new Error('No offers selected');
                            }
                            
                            if (!currentCurrency) {
                                currentCurrency = 'USD'; // Fallback
                            }
                            
                const quantity = parseInt(document.getElementById('productQuantity')?.value || 1);
                            
                            // PayPal should use the correct currency based on user's language
                            console.log('🔍 PayPal Debug - Using', currentPayPalCurrency, 'prices for PayPal');
                            
                            // Calculate total in the correct currency
                            const totalAmount = selectedOffers.reduce((total, offerType) => {
                                if (!offers[offerType]) {
                                    console.warn('Offer not found:', offerType);
                                    return total;
                                }
                                
                                const offer = offers[offerType];
                                let price = offer.prices.USD; // Start with USD price
                                
                                // Convert to correct currency if needed
                                if (currentPayPalCurrency === 'EUR') {
                                    price = offer.prices.EUR || (offer.prices.USD * 0.92); // Convert USD to EUR
                                } else if (currentPayPalCurrency === 'BRL') {
                                    price = offer.prices.BRL || (offer.prices.USD * 5.27); // Convert USD to BRL
                                } else if (currentPayPalCurrency === 'USD') {
                                    price = offer.prices.USD; // Use USD price directly
                                }
                                
                                // Premium offer should not be multiplied by quantity
                                if (offerType === 'premium') {
                                    return total + price; // Without multiplication
                                } else {
                                    return total + (price * quantity); // With multiplication
                                }
                            }, 0);
                            
                            console.log('🔍 PayPal Debug -', currentPayPalCurrency, 'totalAmount for PayPal:', totalAmount);
                
                const productNames = selectedOffers.map(offerType => {
                    const offer = offers[offerType];
                    if (offerType === 'premium') {
                                    return offer.name; // Sem quantidade
                    } else {
                        return quantity > 1 ? `${offer.name} (${quantity}x)` : offer.name;
                    }
                }).join(' + ');
                
                            console.log('PayPal order creation:', {
                                selectedOffers: selectedOffers,
                                totalAmount: totalAmount,
                                currency: currentCurrency,
                                productNames: productNames,
                                quantity: quantity
                            });
                            
                            console.log('🔍 PayPal Debug - Final totalAmount being sent to PayPal:', totalAmount);
                            if (totalAmount <= 0) {
                                throw new Error('Invalid total amount: ' + totalAmount);
                            }
                            
                            // Create order with timeout
                            const orderPromise = actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: totalAmount.toFixed(2),
                            currency_code: getCurrentCurrency()
                        },
                                    description: productNames || 'Wrinkle Reducer Products'
                                }]
                            });
                            
                            // Add timeout to prevent hanging
                            const timeoutPromise = new Promise((_, timeoutReject) => {
                                setTimeout(() => {
                                    timeoutReject(new Error('PayPal order creation timeout'));
                                }, 8000);
                            });
                            
                            Promise.race([orderPromise, timeoutPromise])
                                .then(resolve)
                                .catch(reject);
                                
                        } catch (error) {
                            console.error('Error creating PayPal order:', error);
                            reject(error);
                        }
                });
            },
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                        console.log('PayPal payment approved:', details);
                    alert((translateContent('payment_approved') || 'Payment approved!') + ' Transaction ID: ' + details.id);
                    processCheckout();
                    }).catch(function(error) {
                        console.error('PayPal payment error:', error);
                        alert(translateContent('payment_error') || 'Payment processing error. Please try again.');
                    });
                },
                onError: function(err) {
                    console.error('PayPal error:', err);
                    alert(translateContent('paypal_error') || 'PayPal error. Please try again or choose another payment method.');
                },
                onCancel: function(data) {
                    console.log('PayPal payment cancelled:', data);
                }
            }).render('#paypal-payment-button').then(function() {
                console.log('PayPal buttons rendered successfully');
            }).catch(function(error) {
                console.error('Error rendering PayPal buttons:', error);
                // Retry after a delay
                setTimeout(() => {
                    console.log('Retrying PayPal button initialization...');
                    initializePayPal();
                }, 2000);
            });
        }
        </script>

        <script>
        // Currency Detection and Conversion System - REMOVED (duplicate functionality)
        /*
        class CurrencyConverter {
            constructor() {
                this.baseCurrency = 'USD';
                this.exchangeRates = {
                    'USD': 1.00,
                    'BRL': 5.20,  // Brazilian Real
                    'EUR': 0.85   // Euro
                };
                
                this.currencySymbols = {
                    'USD': '$',
                    'BRL': 'R$',
                    'EUR': '€'
                };
                
                // Product names translations
                this.productNames = {
                    'wrinkle-reducer': {
                        'USD': 'Wrinkle Reducer',
                        'BRL': 'Wrinkle Reducer',
                        'EUR': 'Wrinkle Reducer'
                    }
                };
                
                // Product descriptions translations
                this.productDescriptions = {
                    'wrinkle-reducer': {
                        'USD': 'Eliminate wrinkles and expression lines at home. Red light + massage + 7 functions. Visible results in 2 weeks.',
                        'BRL': 'Eliminate wrinkles and expression lines at home. Red light + massage + 7 functions. Visible results in 2 weeks.',
                        'EUR': 'Eliminate wrinkles and expression lines at home. Red light + massage + 7 functions. Visible results in 2 weeks.'
                    }
                };
                
                // Page content translations
                this.pageContent = {
                    'product_title': {
                        'USD': 'Wrinkle Reducer',
                        'BRL': 'Wrinkle Reducer',
                        'EUR': 'Wrinkle Reducer'
                    },
                    'product_description': {
                        'USD': 'Eliminate wrinkles and expression lines at home. Red light + massage + 7 functions. Visible results in 2 weeks.',
                        'BRL': 'Eliminate wrinkles and expression lines at home. Red light + massage + 7 functions. Visible results in 2 weeks.',
                        'EUR': 'Eliminate wrinkles and expression lines at home. Red light + massage + 7 functions. Visible results in 2 weeks.'
                    },
                    'checkout_title': {
                        'USD': 'Checkout - Wrinkle Reducer',
                        'BRL': 'Checkout - Wrinkle Reducer',
                        'EUR': 'Checkout - Wrinkle Reducer'
                    }
                };
                
                this.userCountry = null;
                this.userCurrency = 'USD';
                this.isInitialized = false;
                this.init();
            }
            
            async init() {
                try {
                    await this.detectUserLocation();
                    this.updateAllPrices();
                    this.updatePageContent();
                    this.isInitialized = true;
                } catch (error) {
                    console.error('Error initializing currency converter:', error);
                    this.userCurrency = 'USD';
                    this.updateAllPrices();
                    this.updatePageContent();
                }
            }
            
            async detectUserLocation() {
                try {
                    let countryCode = null;
                    
                    // Check if running from file:// protocol
                    if (window.location.protocol === 'file:') {
                        // Try to detect from browser language with better detection
                        const browserLang = navigator.language || navigator.userLanguage;
                        console.log('🌍 Browser Language Detected:', browserLang);

                        if (browserLang.startsWith('pt-BR') || browserLang.startsWith('pt_BR')) {
                            countryCode = 'BR';
                            console.log('🇧🇷 Brazilian Portuguese detected → Brazil');
                        } else if (browserLang.startsWith('pt-PT') || browserLang.startsWith('pt_PT')) {
                            countryCode = 'PT';
                            console.log('🇵🇹 European Portuguese detected → Portugal');
                        } else if (browserLang.startsWith('pt')) {
                            countryCode = 'PT'; // Default to Portugal for Portuguese
                            console.log('🇵🇹 Generic Portuguese detected → Portugal (default)');
                        } else if (browserLang.startsWith('es')) {
                            countryCode = 'ES';
                            console.log('🇪🇸 Spanish detected → Spain');
                        } else {
                            countryCode = 'US';
                            console.log('🇺🇸 English detected → USA');
                        }
                    } else {
                        // Try ipapi.co first
                        try {
                            const response = await fetch('https://ipapi.co/json/', {
                                timeout: 5000,
                                mode: 'cors'
                            });
                            if (response.ok) {
                                const data = await response.json();
                                countryCode = data.country_code;
                            }
                        } catch (e) {
                        }
                        
                        // Fallback to ipinfo.io if ipapi.co fails
                        if (!countryCode) {
                            try {
                                const response = await fetch('https://ipinfo.io/json', {
                                    timeout: 5000,
                                    mode: 'cors'
                                });
                                if (response.ok) {
                                    const data = await response.json();
                                    countryCode = data.country;
                                }
                            } catch (e) {
                            }
                        }
                    }
                    
                    this.userCountry = countryCode;
                    
                    // Map countries to supported currencies based on user origin
                    const countryToCurrency = {
                        // Real Brasileiro (BRL) - Brasil
                        'BR': 'BRL',

                        // Angola - Dollar (default)
                        'AO': 'USD',

                        // US Dollar (USD) - North America and other countries
                        'US': 'USD', 'CA': 'USD', 'MX': 'USD', 'AR': 'USD', 'CL': 'USD', 'CO': 'USD', 'PE': 'USD', 'UY': 'USD', 'BO': 'USD', 'PY': 'USD', 'VE': 'USD', 'EC': 'USD', 'GY': 'USD', 'SR': 'USD', 'GF': 'USD', 'FK': 'USD', 'BZ': 'USD', 'GT': 'USD', 'HN': 'USD', 'SV': 'USD', 'NI': 'USD', 'CR': 'USD', 'PA': 'USD', 'CU': 'USD', 'JM': 'USD', 'HT': 'USD', 'DO': 'USD', 'PR': 'USD', 'VI': 'USD', 'AG': 'USD', 'BB': 'USD', 'DM': 'USD', 'GD': 'USD', 'KN': 'USD', 'LC': 'USD', 'VC': 'USD', 'TT': 'USD', 'BS': 'USD', 'AU': 'USD', 'NZ': 'USD', 'JP': 'USD', 'KR': 'USD', 'SG': 'USD', 'HK': 'USD', 'TW': 'USD', 'TH': 'USD', 'MY': 'USD', 'ID': 'USD', 'PH': 'USD', 'VN': 'USD', 'IN': 'USD', 'PK': 'USD', 'BD': 'USD', 'LK': 'USD', 'MM': 'USD', 'KH': 'USD', 'LA': 'USD', 'BN': 'USD', 'FJ': 'USD', 'PG': 'USD', 'SB': 'USD', 'VU': 'USD', 'NC': 'USD', 'PF': 'USD', 'WS': 'USD', 'TO': 'USD', 'KI': 'USD', 'TV': 'USD', 'NR': 'USD', 'MH': 'USD', 'FM': 'USD', 'PW': 'USD', 'AS': 'USD', 'GU': 'USD', 'MP': 'USD', 'CK': 'USD', 'NU': 'USD', 'TK': 'USD', 'WF': 'USD', 'NF': 'USD', 'PN': 'USD', 'GS': 'USD', 'SH': 'USD', 'AC': 'USD', 'TA': 'USD', 'IO': 'USD', 'CX': 'USD', 'CC': 'USD', 'HM': 'USD', 'AQ': 'USD', 'BV': 'USD', 'TF': 'USD', 'UM': 'USD',

                        // Euro (EUR) - Eurozone countries
                        'DE': 'EUR', 'FR': 'EUR', 'IT': 'EUR', 'ES': 'EUR', 'NL': 'EUR', 'BE': 'EUR', 'AT': 'EUR', 'PT': 'EUR', 'IE': 'EUR', 'FI': 'EUR', 'GR': 'EUR', 'LU': 'EUR', 'MT': 'EUR', 'CY': 'EUR', 'SK': 'EUR', 'SI': 'EUR', 'EE': 'EUR', 'LV': 'EUR', 'LT': 'EUR', 'AD': 'EUR', 'MC': 'EUR', 'SM': 'EUR', 'VA': 'EUR', 'ME': 'EUR', 'XK': 'EUR'
                    };
                    
                    this.userCurrency = countryToCurrency[this.userCountry] || 'USD';
                    
                    // Debug: Log detection results
                    console.log('🌍 Currency Detection Results:');
                    console.log('📍 User Country:', this.userCountry);
                    console.log('💰 User Currency:', this.userCurrency);
                    console.log('💱 Exchange Rate:', this.exchangeRates[this.userCurrency]);
                    
                } catch (error) {
                    console.error('Error in location detection:', error);
                    this.userCurrency = 'USD';
                    this.userCountry = 'Unknown';
                }
            }
            
            convertPrice(usdPrice) {
                const rate = this.exchangeRates[this.userCurrency];
                const convertedPrice = usdPrice * rate;
                
                // Debug: Log price conversion
                console.log(`💱 Price Conversion: $${usdPrice} USD → ${this.formatPrice(convertedPrice)} (Rate: ${rate})`);
                
                return this.formatPrice(convertedPrice);
            }
            
            translateProductName(productKey) {
                return this.productNames[productKey] ? 
                    this.productNames[productKey][this.userCurrency] || 
                    this.productNames[productKey]['USD'] : 
                    productKey;
            }
            
            translateProductDescription(productKey) {
                return this.productDescriptions[productKey] ? 
                    this.productDescriptions[productKey][this.userCurrency] || 
                    this.productDescriptions[productKey]['USD'] : 
                    '';
            }
            
            translatePageContent(contentKey) {
                return this.pageContent[contentKey] ? 
                    this.pageContent[contentKey][this.userCurrency] || 
                    this.pageContent[contentKey]['USD'] : 
                    contentKey;
            }
            
            formatPrice(price) {
                const symbol = this.currencySymbols[this.userCurrency];
                
                if (this.userCurrency === 'BRL') {
                    return `${symbol} ${price.toFixed(2).replace('.', ',')}`;
                } else {
                    return `${symbol}${price.toFixed(2)}`;
                }
            }
            
            // Removed duplicate updateAllPrices function - using the main one instead
            
            updatePageContent() {
                try {
                    // Update page title
                    document.title = this.translatePageContent('checkout_title');
                    
                    // Update product title
                    const productTitle = document.querySelector('h3');
                    if (productTitle) {
                        productTitle.textContent = this.translatePageContent('product_title');
                    }
                    
                    // Update product description
                    const productDescription = document.querySelector('.product-details p');
                    if (productDescription) {
                        productDescription.textContent = this.translateProductDescription('wrinkle-reducer');
                    }
                    
                    
                } catch (error) {
                    console.error('Error updating page content:', error);
                }
            }
        }
        */
        
        // Initialize currency converter when page loads - REMOVED (duplicate functionality)
        // document.addEventListener('DOMContentLoaded', function() {
        //     const converter = new CurrencyConverter();
        //     converter.init();
        // });
        
        // Update prices after complete loading
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                updateAllPrices();
            }, 500);
        });

        // Sistema de Reviews Interativas
        function openReviewModal(author, date, stars, fullText) {
            const modal = document.createElement('div');
            modal.className = 'review-modal';
            modal.id = 'reviewModal';
            
            const starCount = parseFloat(stars);
            let starsHTML = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= starCount) {
                    starsHTML += '<i class="fas fa-star" style="color: #d4af37;"></i>';
                } else {
                    starsHTML += '<i class="far fa-star" style="color: #ddd;"></i>';
                }
            }
            
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 style="color: #d4af37; margin: 0;">Review Completa</h3>
                        <button class="modal-close" onclick="closeReviewModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #d4af37, #b8941f); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-user" style="color: white; font-size: 1.2rem;"></i>
                            </div>
                            <div>
                                <h4 style="margin: 0; color: #333;">${author}</h4>
                                <p style="margin: 5px 0 0 0; color: #666; font-size: 0.9rem;">Verified Purchase • ${date}</p>
                            </div>
                        </div>
                        <div style="display: flex; gap: 3px; margin-bottom: 20px;">
                            ${starsHTML}
                        </div>
                    </div>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border-left: 4px solid #d4af37;">
                        <p style="margin: 0; color: #333; line-height: 1.6; font-style: italic;">"${fullText}"</p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function closeReviewModal() {
            const modal = document.getElementById('reviewModal');
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
                modal.remove();
            }
        }



        // Add click listeners to reviews
        document.addEventListener('DOMContentLoaded', function() {
            // Sistema de Reviews Completo (do Laikou)
            let selectedRating = 0;
            let userReviews = [];

            // Check if user is logged in
            function checkLogin() {
                return localStorage.getItem('userLoggedIn') === 'true';
            }

            // Mostrar modal de login
            function showLoginModal() {
                alert(translateContent('please_login_review') || 'Please login to add a review.');
            }

            // Mostrar modal de review
            function showReviewModal() {
                if (!checkLogin()) {
                    showLoginModal();
                    return;
                }
                document.getElementById('reviewModal').style.display = 'flex';
            }

            // Fechar modal de review
            function closeReviewModal() {
                document.getElementById('reviewModal').style.display = 'none';
                document.getElementById('reviewForm').reset();
                selectedRating = 0;
                updateStarDisplay();
                document.getElementById('imagePreview').innerHTML = '';
            }

            // Atualizar display das estrelas
            function updateStarDisplay() {
                const stars = document.querySelectorAll('#starRating i');
                stars.forEach((star, index) => {
                    if (index < selectedRating) {
                        star.className = 'fas fa-star';
                        star.style.color = '#d4af37';
                    } else {
                        star.className = 'far fa-star';
                        star.style.color = '#ddd';
                    }
                });
            }

            // Adicionar review ao DOM
            function addReviewToDOM(reviewData) {
                const reviewsContainer = document.querySelector('.reviews-container');
                const reviewElement = document.createElement('div');
                reviewElement.className = 'review-item clickable-review';
                reviewElement.setAttribute('data-review-id', reviewData.id);
                reviewElement.setAttribute('data-author', reviewData.name);
                reviewElement.setAttribute('data-date', reviewData.date);
                reviewElement.setAttribute('data-stars', reviewData.rating);
                
                let imageHtml = '';
                if (reviewData.image) {
                    imageHtml = `<img src="${reviewData.image}" alt="Review Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">`;
                } else {
                    imageHtml = `<div class="review-avatar"><i class="fas fa-user"></i></div>`;
                }

                let starsHtml = '';
                for (let i = 1; i <= 5; i++) {
                    if (i <= reviewData.rating) {
                        starsHtml += '<i class="fas fa-star"></i>';
                    } else {
                        starsHtml += '<i class="far fa-star"></i>';
                    }
                }

                reviewElement.innerHTML = `
                    <div class="review-image">
                        ${imageHtml}
                    </div>
                    <div class="review-content">
                        <div class="review-stars">
                            ${starsHtml}
                        </div>
                        <p class="review-text">"${reviewData.text}"</p>
                        <div class="review-author">
                            <strong>${reviewData.name}</strong>
                            <span class="review-date">${reviewData.date}</span>
                        </div>
                    </div>
                `;

                // Adicionar event listener para o modal
                reviewElement.addEventListener('click', function() {
                    openReviewModal(reviewData.name, reviewData.date, reviewData.rating, reviewData.text);
                });

                reviewsContainer.insertBefore(reviewElement, reviewsContainer.firstChild);
            }

            // Add review button
            const addReviewBtn = document.getElementById('addReviewBtn');
            if (addReviewBtn) {
                addReviewBtn.addEventListener('click', showReviewModal);
            }

            // Fechar modais
            const closeReviewModalBtn = document.getElementById('closeReviewModal');
            if (closeReviewModalBtn) {
                closeReviewModalBtn.addEventListener('click', closeReviewModal);
            }

            // Sistema de estrelas
            const starElements = document.querySelectorAll('#starRating i');
            starElements.forEach((star, index) => {
                star.addEventListener('click', function() {
                    selectedRating = index + 1;
                    updateStarDisplay();
                });
            });

            // Preview de imagem
            const imageInput = document.getElementById('reviewImage');
            if (imageInput) {
                imageInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            document.getElementById('imagePreview').innerHTML = `
                                <img src="${e.target.result}" style="max-width: 200px; max-height: 200px; border-radius: 50%; object-fit: cover;">
                            `;
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }

            // Form de review
            const reviewForm = document.getElementById('reviewForm');
            if (reviewForm) {
                reviewForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const name = document.getElementById('reviewerName').value;
                    const text = document.getElementById('reviewText').value;
                    const imageFile = document.getElementById('reviewImage').files[0];
                    
                    if (selectedRating === 0) {
                        alert('Please select a rating.');
                        return;
                    }
                    
                    const newReview = {
                        id: 'user_' + Date.now(),
                        name: name,
                        rating: selectedRating,
                        text: text,
                        date: 'Agora mesmo',
                        image: imageFile ? URL.createObjectURL(imageFile) : null
                    };
                    
                    userReviews.unshift(newReview);
                    addReviewToDOM(newReview);
                    closeReviewModal();
                    
                    alert(translateContent('review_added_success') || 'Review added successfully!');
                });
            }


            const clickableReviews = document.querySelectorAll('.clickable-review');
            clickableReviews.forEach(review => {
                review.addEventListener('click', function() {
                    const author = this.dataset.author;
                    const date = this.dataset.date;
                    const stars = this.dataset.stars;
                    
                    // Get review text based on ID
                    const reviewTexts = {
                        'sarah': "They gave me a rigid facial mask during a facial, and I was hesitant about buying one, but I liked this model better because it is manageable and very comfortable!! I like using it, first I clean my face well, use it, and then add vitamin C and hyaluronic acid serum, then cream (together or alternate). I've been using it for about 3 weeks, at least 3 times a week. It's still too early to see the benefits, but the day after I use it, my husband tells me I look younger :)",
                        'jennifer': "The mask is of very high quality, with pleasant material. Thanks to the seller. ❤️ 😌",
                        'amanda': "Very very impressed with this product! Packaged well and very high quality",
                        'michelle': "The material seems to be of good quality and comfortable to wear, it needs to be charged for 5 hours before it can be used.",
                        'lisa': "Perfect...great packaging, arrived quickly, all LEDs work perfectly. Advice",
                        'rachel': "Excellent product! The red light therapy works amazing and the 7-in-1 functionality is incredible. Highly recommend this wand for anyone looking for professional skincare results at home."
                    };
                    
                    const reviewId = this.dataset.reviewId;
                    const fullText = reviewTexts[reviewId] || "Review text not available";
                    
                    openReviewModal(author, date, stars, fullText);
                });
            });
        });
        </script>

    <!-- Translation System -->
    <script>
        class CheckoutTranslator {
            constructor() {
                this.userLanguage = 'en';
                this.userCountry = null;
                this.userCurrency = 'USD';
                this.isInitialized = false;
                this.init();
            }
            
            async init() {
                try {
                    await this.detectUserLocation();
                    this.updatePageContent();
                    this.isInitialized = true;
                    console.log(`Checkout translator initialized. Language: ${this.userLanguage}, Currency: ${this.userCurrency}`);
                } catch (error) {
                    console.error('Error initializing checkout translator:', error);
                    this.userLanguage = 'en';
                    this.userCurrency = 'USD';
                    this.updatePageContent();
                }
            }
            
            async detectUserLocation() {
                try {
                    // Use ONLY browser language - NO IP detection
                    const browserLang = navigator.language || navigator.userLanguage;
                    console.log('🌍 Browser language detected:', browserLang);
                    
                    // Set language and currency based ONLY on browser language
                    if (browserLang.startsWith('pt-PT') || browserLang.startsWith('pt_PT')) {
                        this.userLanguage = 'pt';
                        this.userCountry = 'PT';
                        this.userCurrency = 'EUR';
                        console.log('🇵🇹 Portuguese (Portugal) detected → EUR');
                    } else if (browserLang.startsWith('pt-BR') || browserLang.startsWith('pt_BR')) {
                        this.userLanguage = 'pt';
                        this.userCountry = 'BR';
                        this.userCurrency = 'BRL';
                        console.log('🇧🇷 Portuguese (Brazil) detected → BRL');
                    } else if (browserLang.startsWith('pt')) {
                        // Generic Portuguese - default to USD (for Angola and other Portuguese-speaking countries)
                        this.userLanguage = 'pt';
                        this.userCountry = 'AO'; // Angola
                        this.userCurrency = 'USD';
                        console.log('🇦🇴 Generic Portuguese detected → USD (Angola/International)');
                    } else {
                        this.userLanguage = 'en';
                        this.userCountry = 'US';
                        this.userCurrency = 'USD';
                        console.log('🇺🇸 English detected → USD');
                    }
                } catch (error) {
                    console.error('Error in language detection:', error);
                    this.userLanguage = 'en';
                    this.userCountry = 'US';
                    this.userCurrency = 'USD';
                }
            }
            
            translateContent(contentKey) {
                // Detect user language - prioritize English detection
                const browserLang = navigator.language || navigator.userLanguage;
                let userLanguage = 'en'; // Default to English
                let languageKey = 'USD'; // Default to USD
                
                // Only use Portuguese if explicitly detected
                if (browserLang.startsWith('pt')) {
                    userLanguage = 'pt';
                    languageKey = 'BRL';
                } else if (browserLang.startsWith('en')) {
                    userLanguage = 'en';
                    languageKey = 'USD';
                }
                
                console.log(`🌍 Translating ${contentKey}: userLanguage=${userLanguage}, languageKey=${languageKey}`);
                
                const translations = {
                    'checkout_title': {
                        'USD': 'Checkout',
                        'BRL': 'Checkout',
                        'EUR': 'Checkout'
                    },
                    'product_wrinkle_reducer': {
                        'USD': 'Wrinkle Reducer',
                        'BRL': 'Wrinkle Reducer',
                        'EUR': 'Wrinkle Reducer'
                    },
                    'choose_offer': {
                        'USD': 'Choose Your Offer',
                        'BRL': 'Choose Your Offer',
                        'EUR': 'Choose Your Offer'
                    },
                    'offer_basic_description': {
                        'USD': 'Worried about wrinkles and fine lines? The Wrinkle Reducer uses red light to stimulate collagen and restore firmness to your skin without leaving home.',
                        'BRL': 'Preocupada com rugas e linhas finas? O Redutor de Rugas usa luz vermelha para estimular o colágeno e devolver firmeza à sua pele sem sair de casa.',
                        'EUR': 'Preocupada com rugas e linhas finas? O Redutor de Rugas usa luz vermelha para estimular o colágeno e devolver firmeza à sua pele sem sair de casa.'
                    },
                    'offer_premium_title': {
                        'USD': 'Face Mask Therapy',
                        'BRL': 'Terapia de Máscara Facial',
                        'EUR': 'Terapia de Máscara Facial'
                    },
                    'offer_premium_description': {
                        'USD': 'Tired skin with signs of aging? The Anti-Aging Facial Mask deeply hydrates, reduces fine lines and restores youthful glow to the face.',
                        'BRL': 'Sua pele cansada e com sinais da idade? A Terapia de Máscara Facial Anti-Idade hidrata profundamente, reduz linhas finas e devolve o brilho jovem ao rosto.',
                        'EUR': 'Sua pele cansada e com sinais da idade? A Terapia de Máscara Facial Anti-Idade hidrata profundamente, reduz linhas finas e devolve o brilho jovem ao rosto.'
                    },
                    'discount_badge': {
                        'USD': '50% OFF',
                        'BRL': '50% OFF',
                        'EUR': '50% OFF'
                    }
                };
                
                return translations[contentKey] ? 
                    translations[contentKey][languageKey] || 
                    translations[contentKey]['USD'] : 
                    contentKey;
            }
            
            updatePageContent() {
                try {
                    // Update page title
                    const pageTitle = document.querySelector('title');
                    if (pageTitle) {
                        pageTitle.textContent = `${this.translateContent('checkout_title')} - 7-in-1 Wrinkle Wand | 67 Beauty Hub`;
                    }
                    
                    // Update product title
                    const productTitle = document.querySelector('h3[data-translate-key="product_wrinkle_reducer"]');
                    if (productTitle) productTitle.textContent = this.translateContent('product_wrinkle_reducer');
                    
                    // Update offer elements
                    const chooseOfferTitle = document.querySelector('h3[data-translate-key="choose_offer"]');
                    if (chooseOfferTitle) {
                        chooseOfferTitle.innerHTML = `<i class="fas fa-gift"></i> ${this.translateContent('choose_offer')}`;
                    }
                    
                    const productTitleInOffer = document.querySelector('h4[data-translate-key="product_wrinkle_reducer"]');
                    if (productTitleInOffer) productTitleInOffer.textContent = this.translateContent('product_wrinkle_reducer');
                    
                    const offerPremiumTitle = document.querySelector('h4[data-translate-key="offer_premium_title"]');
                    if (offerPremiumTitle) offerPremiumTitle.textContent = this.translateContent('offer_premium_title');
                    
                    const offerPremiumDescription = document.querySelector('.description[data-translate-key="offer_premium_description"]');
                    if (offerPremiumDescription) offerPremiumDescription.textContent = this.translateContent('offer_premium_description');
                    
                    // Update order summary title
                    const orderSummaryTitle = document.querySelector('span[data-translate-key="order_summary"]');
                    if (orderSummaryTitle) orderSummaryTitle.textContent = this.translateContent('order_summary');
                    
                    console.log('Checkout page content updated successfully');
                    
                } catch (error) {
                    console.error('Error updating checkout page content:', error);
                }
            }
        }
        
        // Sistema CheckoutTranslator removido - usando sistema global unificado
        
        // PIX Payment System
        let pixCheckout = null;
        
        // Use existing variables from the page
        // selectedOffers, currentCurrency, and offers should already exist
        
        // Initialize PIX system
        function initializePIXSystem() {
            if (typeof PIXCheckout !== 'undefined') {
                pixCheckout = new PIXCheckout();
                console.log('✅ PIX system initialized');
            } else {
                console.error('❌ PIX system not available');
            }
        }
        
        // Setup payment methods based on user location
        function setupPIXForBrazilOnly() {
            const userLanguage = navigator.language || navigator.userLanguage;
            const pixOption = document.getElementById('pix-option');
            const stripeOption = document.getElementById('stripe-option');
            
            // Check for test mode (Angolan testing)
            const isTestMode = localStorage.getItem('pixTestMode') === 'true';
            const isAngolan = userLanguage.startsWith('pt') && !userLanguage.includes('BR') && !userLanguage.includes('PT');
            
            // Force test mode if explicitly enabled (regardless of language)
            const forceTestMode = localStorage.getItem('pixTestMode') === 'true';
            
            // Debug logs
            console.log('🔍 Payment Methods Debug Info:');
            console.log('User Language:', userLanguage);
            console.log('Is Test Mode:', isTestMode);
            console.log('Is Angolan:', isAngolan);
            console.log('PIX Option Element:', pixOption);
            console.log('Stripe Option Element:', stripeOption);
            console.log('localStorage pixTestMode:', localStorage.getItem('pixTestMode'));
            
            // Show PIX for Brazilian Portuguese (pt-BR) OR for test mode (any language)
            if (userLanguage.startsWith('pt-BR') || userLanguage.startsWith('pt_BR') || forceTestMode) {
                if (pixOption) {
                    pixOption.style.display = 'block';
                    if (isTestMode) {
                        console.log('🧪 PIX Test Mode enabled');
                        pixOption.textContent = 'PIX (Test Mode)';
                    } else {
                        console.log('🇧🇷 Brazilian customer detected - PIX enabled');
                        pixOption.textContent = 'PIX';
                    }
                } else {
                    console.error('❌ PIX Option element not found!');
                }
            } else {
                if (pixOption) {
                    pixOption.style.display = 'none';
                    console.log('🌍 Non-Brazilian customer - PIX disabled');
                } else {
                    console.error('❌ PIX Option element not found!');
                }
            }
            
            // Show Stripe for US/UK/CA/AU users
            if (userLanguage.startsWith('en-US') || userLanguage.startsWith('en-GB') || 
                userLanguage.startsWith('en-CA') || userLanguage.startsWith('en-AU')) {
                if (stripeOption) {
                    stripeOption.style.display = 'block';
                    console.log('🇺🇸 English-speaking customer detected - Stripe enabled');
                }
            } else {
                if (stripeOption) {
                    stripeOption.style.display = 'none';
                }
            }
        }
        
        // Enable PIX test mode
        function enablePIXTestMode() {
            localStorage.setItem('pixTestMode', 'true');
            console.log('🧪 PIX Test Mode enabled');
            setupPIXForBrazilOnly();
        }
        
        // Disable PIX test mode
        function disablePIXTestMode() {
            localStorage.removeItem('pixTestMode');
            console.log('🚫 PIX Test Mode disabled');
            setupPIXForBrazilOnly();
        }
        
        // Check current PIX status
        function checkPIXStatus() {
            console.log('🔍 PIX Status Check:');
            console.log('localStorage pixTestMode:', localStorage.getItem('pixTestMode'));
            console.log('User Language:', navigator.language);
            console.log('PIX Option Element:', document.getElementById('pix-option'));
            console.log('PIX Option Display:', document.getElementById('pix-option')?.style.display);
            console.log('PIX Option Text:', document.getElementById('pix-option')?.textContent);
        }
        
        // Initialize PIX for order
        function initializePIXForOrder() {
            if (!pixCheckout) {
                console.error('PIX system not initialized');
                return;
            }
            
            const orderData = getCurrentOrderData();
            if (!orderData) {
                console.error('Failed to get order data for PIX');
                return;
            }
            
            // Initialize PIX with order data
            pixCheckout.initializePIX(orderData);
        }
        
        // Get current order data for PIX (using summary total like PayPal)
        function getCurrentOrderData() {
            // Validate required variables
            if (!selectedOffers || !Array.isArray(selectedOffers) || selectedOffers.length === 0) {
                console.error('No offers selected');
                return null;
            }
            
            // Get total from order summary (same as PayPal logic)
            const totalElement = document.getElementById('totalAmount');
            let totalAmount = 0;
            
            if (totalElement) {
                const totalText = totalElement.textContent;
                totalAmount = parseFloat(totalText.replace(/[^\d.,]/g, '').replace(',', '.'));
                console.log('💰 PIX using summary total:', totalAmount, currentCurrency);
                console.log('📊 Summary element text:', totalText);
            } else {
                console.warn('⚠️ Total element not found, using fallback calculation');
                // Fallback to calculation
                selectedOffers.forEach(offerType => {
                    if (offers[offerType]) {
                        const offer = offers[offerType];
                        const price = offer.prices && offer.prices[currentCurrency] 
                            ? offer.prices[currentCurrency] 
                            : offer.price || 0;
                        totalAmount += price;
                    }
                });
            }
            
            if (totalAmount <= 0) {
                console.error('❌ Invalid total amount:', totalAmount);
                return null;
            }
            
            // Get product names
            const products = selectedOffers.map(offerType => {
                if (offers[offerType]) {
                    let productName = offers[offerType].name;
                    
                    // Se for a oferta básica e há cor selecionada, usar apenas o nome da cor
                    if (offerType === 'basic' && selectedColor && selectedColor.name) {
                        productName = selectedColor.name;
                    }
                    
                    return productName;
                }
                return 'Produto';
            });
            
            console.log('✅ PIX Order Data:', {
                total: totalAmount,
                currency: currentCurrency,
                products: products
            });
            
            return {
                id: 'ORDER_' + Date.now(),
                products: products,
                total: totalAmount,
                currency: currentCurrency,
                description: products.join(' + ')
            };
        }
        
        // Handle PIX payment
        function handlePIXPayment(email, observations) {
            if (!pixCheckout) {
                alert('PIX system not available. Please try again.');
                return;
            }
            
            const orderData = getCurrentOrderData();
            if (!orderData) {
                alert('Failed to get order data. Please try again.');
                return;
            }
            
            // Initialize PIX with order data
            pixCheckout.initializePIX(orderData);
        }
        
        
        // Payment method control
        function setupPaymentMethodControl() {
            const paymentMethodSelect = document.getElementById('paymentMethod');
            const paypalButton = document.getElementById('paypal-payment-button');
            const pixInfo = document.getElementById('pix-payment-info');
            
            if (paymentMethodSelect) {
                paymentMethodSelect.addEventListener('change', function() {
                    const selectedMethod = this.value;
                    
                    // Hide all payment options first
                    if (paypalButton) paypalButton.style.display = 'none';
                    if (pixInfo) pixInfo.style.display = 'none';
                    
                    // Show selected payment method
                    switch(selectedMethod) {
                        case 'paypal':
                            if (paypalButton) paypalButton.style.display = 'block';
                            break;
                        case 'pix':
                            if (pixInfo) pixInfo.style.display = 'block';
                            initializePIXForOrder();
                            break;
                    }
                });
            }
        }
        
        // Process checkout function
        function processCheckout_OLD() { // DESABILITADA para usar supplier-order-processor.js
            // Validate all required fields
            const requiredFields = ['firstName', 'lastName', 'email', 'phone', 'address', 'city', 'state', 'zipCode', 'country', 'paymentMethod'];
            const missingFields = [];
            
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (!field || !field.value.trim()) {
                    missingFields.push(fieldId);
                }
            });
            
            if (missingFields.length > 0) {
                alert('Please fill in all required fields: ' + missingFields.join(', '));
                return;
            }
            
            const paymentMethod = document.getElementById('paymentMethod').value;
            const observations = document.getElementById('observations').value;
            
            // Handle PIX payment
            if (paymentMethod === 'pix') {
                handlePIXPayment(document.getElementById('email').value, observations);
                return;
            }
            
            // Handle other payment methods
            if (paymentMethod === 'paypal') {
                // PayPal is already handled by the PayPal SDK
                return;
            }
            
            if (paymentMethod === 'stripe') {
                alert('Stripe payment integration coming soon!');
                return;
            }
            
            alert('Payment method not implemented yet.');
        }
        
        // Initialize offers and summary
        function initializeOffers() {
            // Check if variables exist, if not create them
            if (typeof selectedOffers === 'undefined') {
                window.selectedOffers = ['basic'];
            }
            if (typeof currentCurrency === 'undefined') {
                window.currentCurrency = 'USD';
            }
            if (typeof offers === 'undefined') {
                window.offers = {
                    basic: {
                        name: '7-in-1 Wrinkle Wand',
                        price: 17.45,
                        prices: {
                            'USD': 17.45,
                            'EUR': 15.80,
                            'BRL': 90.74
                        },
                        description: 'Basic offer with the main product'
                    }
                };
            }
            if (typeof selectedColor === 'undefined') {
                window.selectedColor = null;
            }
            updateOrderSummary();
        }
        
        // Update order summary
        function updateOrderSummary() {
            const selectedOffersElement = document.getElementById('selectedOffers');
            const totalElement = document.getElementById('totalAmount');
            
            if (!selectedOffersElement || !totalElement) return;
            
            let total = 0;
            let summaryHTML = '';
            
            selectedOffers.forEach(offerType => {
                if (offers[offerType]) {
                    const offer = offers[offerType];
                    const price = offer.prices && offer.prices[currentCurrency] 
                        ? offer.prices[currentCurrency] 
                        : offer.price || 0;
                    
                    total += price;
                    
                    summaryHTML += `
                        <div class="summary-row">
                            <span>${offer.name}</span>
                            <span>$${price.toFixed(2)}</span>
                        </div>
                    `;
                }
            });
            
            selectedOffersElement.innerHTML = summaryHTML;
            totalElement.textContent = `$${total.toFixed(2)}`;
        }
        
        // Initialize PIX system when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeOffers();
            setupPaymentMethodControl();
            initializePIXSystem();
            setupPIXForBrazilOnly();
            
            // Update prices after initialization
            setTimeout(() => {
                updateAllPrices();
            }, 100);
        });

            // Close dropdown when clicking outside
            // Flag dropdown removed - no click listener needed

        // Flag dropdown functions removed - currency detection is now automatic

        // Currency detection is now automatic - no manual selection needed
    </script>
    
    <!-- Footer Copyright -->
    <footer style="text-align: center; padding: 20px; background: #f8f9fa; border-top: 1px solid #e9ecef; margin-top: 40px;">
        <p style="color: #666; font-size: 14px; margin: 0;">
            © 2025 67 Beauty Hub - All rights reserved
        </p>
    </footer>


</body>
</html>
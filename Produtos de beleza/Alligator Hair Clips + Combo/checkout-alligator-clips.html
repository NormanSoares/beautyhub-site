<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Unbreakable Hair Clips | 67 Beauty Hub</title>
    <link rel="stylesheet" href="../../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Scripts do Sistema de Processamento (carregar primeiro) -->
    <script src="../../js/supplier-order-processor.js"></script>
    <script src="../../js/payment-gateway.js"></script>
    <script src="../../js/pix-generator.js"></script>
    <!-- PayPal SDK -->
    <!-- PayPal SDK will be loaded dynamically with correct locale -->
    <!-- Review System -->
    <script src="../../js/review-system.js"></script>
    <!-- Product Variation Mapping System -->
    <script src="../../js/product-variation-mapping.js"></script>
    <!-- Global Translation System -->
    <script src="../../js/translation-system.js"></script>
    <!-- PIX Payment System -->
    <script src="../../js/pix-generator.js"></script>
    <style>
        body {
            background: #f0e6d2;
        }
        
        .checkout-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            margin-top: 50px;
        }
        
        .checkout-layout {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .unified-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: start;
        }
        
        .checkout-bottom {
            display: grid !important;
            grid-template-columns: 2fr 1fr !important;
            gap: 40px !important;
            align-items: start !important;
        }
        
        .form-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .checkout-header {
            text-align: center;
            margin-bottom: 40px;
            grid-column: 1 / -1;
        }
        
        .checkout-header h1 {
            color: #d4af37;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        /* Flag dropdown styles removed - currency detection is now automatic */
        
        .offer-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 40px;
        }
        
        .product-summary {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .product-image {
            width: 300px;
            height: 400px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            margin: 0 auto 20px;
            display: block;
            object-fit: cover;
        }
        
        .product-details h3 {
            color: #333;
            font-size: 1.8rem;
            margin-bottom: 15px;
        }
        
        .product-details p {
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .offer-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .offer-option {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .offer-option:hover {
            border-color: #d4af37;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.15);
        }
        
        .offer-option.selected {
            border-color: #d4af37;
            background: linear-gradient(135deg, #fff9e6, #fff);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.2);
            transform: translateY(-2px);
        }
        
        .offer-checkbox {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 20px;
            height: 20px;
            accent-color: #d4af37;
            cursor: pointer;
        }
        
        .offer-option.has-checkbox {
            padding-left: 50px;
        }
        
        .offer-option.has-checkbox .option-header {
            margin-left: 10px;
        }
        
        .offer-image-container {
            text-align: left;
            margin: 15px 0;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .offer-image {
            max-width: 120px;
            max-height: 120px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            object-fit: contain;
            flex-shrink: 0;
        }
        
        .offer-description-container {
            flex: 1;
        }
        
        .gallery-main {
            position: relative;
            width: 100%;
            max-width: 1200px;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .gallery-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(212, 175, 55, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .gallery-nav-btn.prev-btn {
            left: 15px;
        }
        
        .gallery-nav-btn.next-btn {
            right: 15px;
        }
        
        .gallery-nav-btn:hover {
            background: rgba(184, 148, 31, 0.95);
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }
        
        .gallery-nav-btn:disabled {
            background: rgba(204, 204, 204, 0.7);
            cursor: not-allowed;
            transform: translateY(-50%);
            box-shadow: none;
        }
        
        .gallery-main-image {
            width: 100%;
            height: 500px;
            object-fit: cover;
            display: block;
            transition: transform 0.5s ease-in-out, opacity 0.3s ease;
        }
        
        
        .gallery-indicators {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        .gallery-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .gallery-indicator.active {
            background: #d4af37;
            transform: scale(1.2);
        }
        
        .gallery-indicator:hover {
            background: #d4af37;
            transform: scale(1.1);
        }
        
        /* Responsivo para galeria */
        @media (max-width: 768px) {
            .gallery-nav-btn {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
            
            .gallery-nav-btn.prev-btn {
                left: 10px;
            }
            
            .gallery-nav-btn.next-btn {
                right: 10px;
            }
            
            .gallery-main {
                max-width: 100%;
            }
            
            .gallery-main-image {
                height: 350px;
            }
            
            .product-image {
                height: 300px;
            }
        }
        
        /* Animações da galeria */
        .gallery-main-image {
            transition: all 0.5s ease-in-out;
        }
        
        .gallery-main-image.slide-left {
            transform: translateX(-100%);
            opacity: 0;
        }
        
        .gallery-main-image.slide-right {
            transform: translateX(100%);
            opacity: 0;
        }
        
        .gallery-main-image.slide-in-left {
            animation: slideInFromRight 0.5s ease-in-out forwards;
        }
        
        .gallery-main-image.slide-in-right {
            animation: slideInFromLeft 0.5s ease-in-out forwards;
        }
        
        @keyframes slideInFromRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideInFromLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .offer-option .option-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .offer-option h4 {
            color: #333;
            font-size: 1.3rem;
            margin: 0;
        }
        
        .offer-option .price {
            font-size: 1.5rem;
            font-weight: 700;
            color: #d4af37;
        }
        
        .offer-option .description {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 10px;
        }
        
        .offer-option .discount {
            background: #d4af37;
            color: white;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            position: absolute;
            top: -8px;
            right: -8px;
        }
        
        .summary-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 20px;
            position: sticky;
            top: 20px;
            margin-bottom: 20px;
        }
        
        .summary-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.4rem;
            text-align: center;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 10px;
        }
        
        .form-section .form-section {
            margin-bottom: 30px;
        }
        
        .form-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3rem;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-section h3 i {
            color: #d4af37;
            font-size: 1.2rem;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            flex: 1;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
            color: #333;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
            transform: translateY(-1px);
        }
        
        .form-group input:hover,
        .form-group select:hover,
        .form-group textarea:hover {
            border-color: #d4af37;
        }
        
        .checkout-summary {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .summary-row.total {
            border-top: 2px solid #d4af37;
            padding-top: 15px;
            margin-top: 15px;
            font-size: 1.2rem;
            font-weight: 700;
            color: #d4af37;
        }
        
        .checkout-btn {
            width: 100%;
            background: linear-gradient(135deg, #d4af37, #b8941f);
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
        }
        
        .checkout-btn:active {
            transform: translateY(0);
        }
        
        .back-link {
            text-align: center;
            margin-top: 20px;
        }
        
        .back-link a {
            color: #d4af37;
            text-decoration: none;
            font-weight: 500;
        }
        
        .back-link a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            .checkout-layout {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .form-row {
                flex-direction: column;
            }
            
            .product-summary {
                flex-direction: column;
                text-align: center;
            }
            
            .offer-options {
                gap: 15px;
            }
            
            .offer-option {
                padding: 15px;
            }
            
            .summary-section {
                position: static;
            }
            
            .checkout-container {
                padding: 20px 10px;
            }
            
            .offer-section, .summary-section {
                padding: 20px;
            }
            
            .offer-image-container {
                flex-direction: column;
                text-align: center;
            }
            
            .offer-image {
                max-width: 150px;
                max-height: 150px;
                margin: 0 auto 10px;
            }
            
            .product-gallery {
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .gallery-thumbnail {
                width: 50px;
                height: 50px;
            }
            
            .unified-section {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .checkout-bottom {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        /* Reviews Section Styles */
        .reviews-section {
            background: white url('background da reviews.webp') center center / cover no-repeat;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 40px;
            margin-bottom: 40px;
            position: relative;
        }
        
        .reviews-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.85);
            border-radius: 15px;
            z-index: 1;
        }
        
        .reviews-section > * {
            position: relative;
            z-index: 2;
        }

        .reviews-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .reviews-header h3 {
            color: #d4af37;
            font-size: 2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .reviews-header h3 i {
            color: #d4af37;
            font-size: 1.8rem;
        }

        .reviews-header p {
            color: #666;
            font-size: 1.1rem;
        }

        .reviews-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .review-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .review-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(212, 175, 55, 0.15);
            border-color: #d4af37;
        }

        .clickable-review {
            cursor: pointer;
        }

        .clickable-review:hover {
            background: #f0f0f0;
        }

        .review-image {
            text-align: center;
            margin-bottom: 20px;
        }

        .review-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #d4af37, #b8941f);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid #fff;
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
            margin: 0 auto;
        }

        .review-avatar i {
            font-size: 2.2rem;
            color: white;
        }

        .review-stars {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin-bottom: 15px;
        }

        .review-stars i {
            color: #ffd700;
            font-size: 1.1rem;
        }

        .review-stars i.far {
            color: #ddd;
        }

        .review-text-container {
            margin-bottom: 20px;
        }

        .review-text {
            color: #333;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 10px;
            font-style: italic;
            text-align: center;
        }

        .review-text::before {
            content: '"';
            font-size: 2rem;
            color: #d4af37;
            opacity: 0.5;
        }

        .review-text::after {
            content: '"';
            font-size: 2rem;
            color: #d4af37;
            opacity: 0.5;
        }

        .read-more-btn {
            background: none;
            border: none;
            color: #d4af37;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            text-decoration: underline;
            padding: 0;
            margin: 0;
            display: block;
            margin: 0 auto;
            transition: all 0.3s ease;
        }

        .read-more-btn:hover {
            color: #b8941f;
            transform: scale(1.05);
        }

        /* Review Modal Styles */
        .review-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            position: relative;
            background: white;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            display: flex;
            align-items: center;
            padding: 30px;
            border-bottom: 1px solid #e0e0e0;
            gap: 20px;
        }

        .modal-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #d4af37, #b8941f);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .modal-avatar i {
            font-size: 1.8rem;
            color: white;
        }

        .modal-author-info {
            flex: 1;
        }

        .modal-author-info h3 {
            color: #333;
            font-size: 1.4rem;
            margin: 0 0 8px 0;
        }

        .modal-stars {
            display: flex;
            gap: 3px;
            margin-bottom: 5px;
        }

        .modal-stars i {
            color: #ffd700;
            font-size: 1rem;
        }

        .modal-stars i.far {
            color: #ddd;
        }

        .modal-date {
            color: #666;
            font-size: 0.9rem;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #999;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: #f0f0f0;
            color: #333;
        }

        .modal-body {
            padding: 30px;
        }

        .modal-body p {
            color: #333;
            font-size: 1.1rem;
            line-height: 1.7;
            margin: 0;
            white-space: pre-line;
        }

        .modal-footer {
            padding: 20px 30px;
            border-top: 1px solid #e0e0e0;
            background: #f8f9fa;
            border-radius: 0 0 20px 20px;
        }

        .verified-purchase {
            color: #28a745;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .review-author {
            text-align: center;
            border-top: 1px solid #e0e0e0;
            padding-top: 15px;
        }

        .review-author strong {
            color: #333;
            font-size: 1.1rem;
            display: block;
            margin-bottom: 5px;
        }

        .review-date {
            color: #666;
            font-size: 0.9rem;
        }



        .reviews-stats {
            display: flex;
            justify-content: center;
            gap: 60px;
            padding: 30px;
            background: linear-gradient(135deg, #f8f9fa, #fff);
            border-radius: 12px;
            border: 2px solid #d4af37;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #d4af37;
            margin-bottom: 5px;
        }

        .stat-stars {
            display: flex;
            justify-content: center;
            gap: 2px;
            margin-bottom: 8px;
        }

        .stat-stars i {
            color: #ffd700;
            font-size: 1rem;
        }

        .stat-label {
            color: #666;
            font-size: 0.95rem;
            font-weight: 500;
        }

        /* Reviews Mobile Responsiveness */
        @media (max-width: 768px) {
            .reviews-section {
                padding: 25px 20px;
                margin-bottom: 20px;
            }

            .reviews-header h3 {
                font-size: 1.6rem;
            }

            .reviews-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .review-item {
                padding: 20px;
            }

            .review-avatar {
                width: 60px;
                height: 60px;
            }

            .review-avatar i {
                font-size: 1.8rem;
            }

            .reviews-stats {
                flex-direction: column;
                gap: 30px;
            }

            .stat-number {
                font-size: 2rem;
            }
        }

        @media (max-width: 480px) {
            .reviews-stats {
                gap: 20px;
                padding: 20px;
            }

            .reviews-header h3 {
                flex-direction: column;
                gap: 5px;
            }
        }

        /* Final Presentation Section */
        .final-presentation {
            margin-top: 40px;
            position: relative;
            overflow: hidden;
            border-radius: 0;
        }

        .presentation-content {
            position: relative;
            width: 100%;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .presentation-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .presentation-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                135deg, 
                rgba(212, 175, 55, 0.8) 0%, 
                rgba(184, 148, 31, 0.7) 50%, 
                rgba(0, 0, 0, 0.6) 100%
            );
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .presentation-text h2 {
            color: white;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .presentation-text p {
            color: white;
            font-size: 1.2rem;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .presentation-features {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .feature-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.2);
            padding: 12px 20px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .feature-badge:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .feature-badge i {
            color: #d4af37;
            font-size: 1.2rem;
        }

        .feature-badge span {
            color: white;
            font-weight: 600;
            font-size: 0.95rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        /* Mobile Responsiveness for Final Presentation */
        @media (max-width: 768px) {
            .final-presentation {
                margin-top: 20px;
            }

            .presentation-content {
                height: 300px;
            }

            .presentation-overlay {
                padding: 20px 15px;
            }

            .presentation-text h2 {
                font-size: 1.8rem;
                margin-bottom: 12px;
            }

            .presentation-text p {
                font-size: 1rem;
                margin-bottom: 25px;
            }

            .presentation-features {
                flex-direction: column;
                gap: 15px;
                align-items: center;
            }

            .feature-badge {
                padding: 10px 16px;
                gap: 8px;
            }

            .feature-badge span {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .presentation-content {
                height: 250px;
            }

            .presentation-text h2 {
                font-size: 1.5rem;
            }

            .presentation-features {
                gap: 12px;
            }
            
            .product-image {
                height: 250px;
            }
        }

        /* User Review Form Styles */
        .user-review-form {
            background: linear-gradient(135deg, #f8f9fa, #fff);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid #d4af37;
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.1);
        }

        .review-form-container h4 {
            color: #333;
            margin-bottom: 25px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .review-form-container h4 i {
            color: #d4af37;
        }

        .review-form-group {
            margin-bottom: 20px;
        }

        .review-form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 1rem;
        }

        .star-rating {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
        }

        .star-rating i {
            font-size: 1.8rem;
            color: #ddd;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .star-rating i:hover,
        .star-rating i.active {
            color: #ffd700;
            transform: scale(1.1);
        }

        .star-rating i.fas {
            color: #ffd700;
        }

        .review-form-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            min-height: 100px;
            transition: all 0.3s ease;
        }

        .review-form-group textarea:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }

        .char-count {
            display: block;
            text-align: right;
            color: #666;
            font-size: 0.85rem;
            margin-top: 5px;
        }

        .submit-review-btn {
            background: linear-gradient(135deg, #d4af37, #b8941f);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }

        .submit-review-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
        }

        .submit-review-btn:active {
            transform: translateY(0);
        }

        .submit-review-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Dynamic User Review Styles */
        .user-review-item {
            background: linear-gradient(135deg, #fff9e6, #fff);
            border: 2px solid #d4af37;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.15);
            transition: all 0.3s ease;
            position: relative;
        }

        .user-review-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(212, 175, 55, 0.2);
        }

        .user-review-badge {
            position: absolute;
            top: -8px;
            right: 15px;
            background: linear-gradient(135deg, #d4af37, #b8941f);
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(212, 175, 55, 0.3);
        }

        .user-review-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #d4af37, #b8941f);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid #fff;
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
            margin: 0 auto 15px;
        }

        .user-review-avatar i {
            font-size: 1.8rem;
            color: white;
        }

        .user-review-stars {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin-bottom: 15px;
        }

        .user-review-stars i {
            color: #ffd700;
            font-size: 1.1rem;
        }

        .user-review-text {
            color: #333;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 15px;
            font-style: italic;
            text-align: center;
        }

        .user-review-author {
            text-align: center;
            border-top: 1px solid #e0e0e0;
            padding-top: 15px;
        }

        .user-review-author strong {
            color: #333;
            font-size: 1.1rem;
            display: block;
            margin-bottom: 5px;
        }

        .user-review-date {
            color: #666;
            font-size: 0.9rem;
        }

        /* Mobile Responsiveness for Review Form */
        @media (max-width: 768px) {
            .user-review-form {
                padding: 20px;
                margin: 20px 0;
            }

            .review-form-container h4 {
                font-size: 1.2rem;
            }

            .star-rating i {
                font-size: 1.5rem;
            }

            .user-review-item {
                padding: 20px;
            }

            .user-review-avatar {
                width: 50px;
                height: 50px;
            }

            .user-review-avatar i {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <div class="logo-container">
                    <img src="../../Logo.png" alt="67 Beauty Hub" class="logo-image">
                    <div class="logo-text">
                        <span class="logo-brand">67 BEAUTY HUB</span>
                    </div>
                </div>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="../../index.html" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="../../index.html#products" class="nav-link">Products</a>
                </li>
                <li class="nav-item">
                    <a href="../../index.html#about" class="nav-link">About</a>
                </li>
                <li class="nav-item">
                    <a href="../../index.html#contact" class="nav-link">Contact</a>
                </li>
            </ul>
            
            <!-- Currency automatically detected based on browser language -->
            </div>
        </div>
    </nav>

    <div class="checkout-container">
        <div class="checkout-header">
            <h1><i class="fas fa-shopping-cart"></i> Checkout</h1>
            <p>Choose your offer and complete your order securely</p>
        </div>


        <div class="checkout-layout">
            <!-- Unified Section: Product + Offers -->
            <div class="unified-section">
                <div class="product-info">
                    <div class="product-summary">
                        <img src="Escolhas/Nude Pink (6 Pieces).png" alt="Alligator Hair Clips - Nude Pink" class="product-image" id="mainProductImage">
                        <div class="product-details">
                            <h3 data-translate-key="product_hair_clips">Alligator Hair Clips</h3>
                            <p>Resistant and practical clips, ideal for separating and securing strands during hairstyling, haircuts or makeup. Hold firmly without slipping.</p>
                        </div>
                        
                        <!-- Galeria de Imagens -->
                        <div class="product-gallery-section">
                            <div class="simple-gallery">
                                <div class="gallery-main">
                                    <button class="gallery-nav-btn prev-btn" id="prevBtn">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <img src="Galeria/Screenshot 2025-09-20 023036.png" alt="Alligator Hair Clips" class="gallery-main-image" id="galleryMainImage">
                                    <button class="gallery-nav-btn next-btn" id="nextBtn">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="gallery-indicators" id="galleryIndicators">
                                <!-- Indicators will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="offers-info">
                    <h3 style="color: #333; margin-bottom: 20px; text-align: center;" data-translate-key="choose_offer"><i class="fas fa-gift"></i> Choose Your Offer</h3>
                    
                    <div class="offer-options">
                        <div class="offer-option color-selection-box selected" data-option="basic">
                            <div class="option-header">
                                <h4 data-translate-key="offer_basic_title">Alligator Hair Clips</h4>
                                <div class="price">$3.54</div>
                            </div>
                            <div class="discount" data-translate-key="discount_badge">48% OFF</div>
                            <div class="description" data-translate-key="offer_basic_description">No more clips that slip and don't hold hair. The Alligator Hair Clips hold each strand firmly, making styling, cutting and makeup easier without discomfort.</div>
                            
                            <!-- Color selection with images -->
                            <div class="color-selection" style="margin: 15px 0;">
                                <h5 style="color: #333; margin-bottom: 10px; font-size: 1rem;" data-translate-key="choose_color">Choose color:</h5>
                                <div class="color-options" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;">
                                    <div class="color-option" style="display: flex; flex-direction: column; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.8rem; text-align: center;" data-color="black">
                                        <div class="color-image-container" style="width: 50px; height: 50px; border-radius: 6px; overflow: hidden; margin-bottom: 6px; border: 1px solid #ddd; cursor: pointer; transition: all 0.3s ease;">
                                            <img src="Escolhas/Black (6 Pieces).png" alt="Black" style="width: 100%; height: 100%; object-fit: cover;">
                                        </div>
                                        <span data-translate-key="color_black">Black</span>
                                    </div>
                                    <div class="color-option" style="display: flex; flex-direction: column; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.8rem; text-align: center;" data-color="green">
                                        <div class="color-image-container" style="width: 50px; height: 50px; border-radius: 6px; overflow: hidden; margin-bottom: 6px; border: 1px solid #ddd; cursor: pointer; transition: all 0.3s ease;">
                                            <img src="Escolhas/Green (6 pieces).png" alt="Green" style="width: 100%; height: 100%; object-fit: cover;">
                                        </div>
                                        <span data-translate-key="color_green">Green</span>
                                    </div>
                                    <div class="color-option" style="display: flex; flex-direction: column; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.8rem; text-align: center;" data-color="nude-pink">
                                        <div class="color-image-container" style="width: 50px; height: 50px; border-radius: 6px; overflow: hidden; margin-bottom: 6px; border: 1px solid #ddd; cursor: pointer; transition: all 0.3s ease;">
                                            <img src="Escolhas/Nude Pink (6 Pieces).png" alt="Nude Pink" style="width: 100%; height: 100%; object-fit: cover;">
                                        </div>
                                        <span data-translate-key="color_nude_pink">Nude Pink</span>
                                    </div>
                                    <div class="color-option" style="display: flex; flex-direction: column; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.8rem; text-align: center;" data-color="pink">
                                        <div class="color-image-container" style="width: 50px; height: 50px; border-radius: 6px; overflow: hidden; margin-bottom: 6px; border: 1px solid #ddd; cursor: pointer; transition: all 0.3s ease;">
                                            <img src="Escolhas/Pink (6 Pieces).png" alt="Pink" style="width: 100%; height: 100%; object-fit: cover;">
                                        </div>
                                        <span data-translate-key="color_pink">Pink</span>
                                    </div>
                                    <div class="color-option" style="display: flex; flex-direction: column; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.8rem; text-align: center;" data-color="purple">
                                        <div class="color-image-container" style="width: 50px; height: 50px; border-radius: 6px; overflow: hidden; margin-bottom: 6px; border: 1px solid #ddd; cursor: pointer; transition: all 0.3s ease;">
                                            <img src="Escolhas/Purple (6 pieces).png" alt="Purple" style="width: 100%; height: 100%; object-fit: cover;">
                                        </div>
                                        <span data-translate-key="color_purple">Purple</span>
                                    </div>
                                    <div class="color-option" style="display: flex; flex-direction: column; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.8rem; text-align: center;" data-color="red">
                                        <div class="color-image-container" style="width: 50px; height: 50px; border-radius: 6px; overflow: hidden; margin-bottom: 6px; border: 1px solid #ddd; cursor: pointer; transition: all 0.3s ease;">
                                            <img src="Escolhas/Red (6 pieces).png" alt="Red" style="width: 100%; height: 100%; object-fit: cover;">
                                        </div>
                                        <span data-translate-key="color_red">Red</span>
                                    </div>
                                    <div class="color-option" style="display: flex; flex-direction: column; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 0.8rem; text-align: center;" data-color="yellow">
                                        <div class="color-image-container" style="width: 50px; height: 50px; border-radius: 6px; overflow: hidden; margin-bottom: 6px; border: 1px solid #ddd; cursor: pointer; transition: all 0.3s ease;">
                                            <img src="Escolhas/Yellow (6 Pieces).png" alt="Yellow" style="width: 100%; height: 100%; object-fit: cover;">
                                        </div>
                                        <span data-translate-key="color_yellow">Yellow</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="offer-option has-checkbox" data-option="premium">
                            <input type="checkbox" class="offer-checkbox" id="offer-premium" data-option="premium">
                            <div class="option-header">
                                <h4 data-translate-key="offer_premium_title">Premium Offer</h4>
                                <div class="price">$2.89</div>
                            </div>
                            <!-- Layout lado a lado: imagem à esquerda, descrição à direita -->
                            <div style="display: flex; align-items: center; gap: 15px; margin: 15px 0;">
                                <div class="premium-product-image" style="flex-shrink: 0;">
                                    <div class="offer-image" style="width: 120px; height: 120px; border-radius: 8px; overflow: hidden; border: 2px solid #e0e0e0; transition: all 0.3s ease;">
                                        <img src="Towel cloth-pink.png" alt="Towel cloth pink" style="width: 100%; height: 100%; object-fit: cover; display: block;">
                                    </div>
                                </div>
                                <div style="flex: 1;">
                            <div class="description" data-translate-key="offer_premium_description">The Pink Towel is soft, super absorbent and durable, ensuring comfort and practicality in your daily life.</div>
                                </div>
                            </div>
                        </div>

                        <div class="offer-option has-checkbox" data-option="complete">
                            <input type="checkbox" class="offer-checkbox" id="offer-complete" data-option="complete">
                            <div class="option-header">
                                <h4 data-translate-key="offer_complete_title">Complete Offer</h4>
                                <div class="price">$11.36</div>
                            </div>
                            <!-- Layout lado a lado: imagem à esquerda, descrição à direita -->
                            <div style="display: flex; align-items: center; gap: 15px; margin: 15px 0;">
                                <div class="complete-product-image" style="flex-shrink: 0;">
                                    <div class="offer-image" style="width: 120px; height: 120px; border-radius: 8px; overflow: hidden; border: 2px solid #e0e0e0; transition: all 0.3s ease;">
                                        <img src="10pcsTouMing-blue.png" alt="Organizer case" style="width: 100%; height: 100%; object-fit: cover; display: block;">
                                    </div>
                                </div>
                                <div style="flex: 1;">
                            <div class="description" data-translate-key="offer_complete_description">Tired of losing or breaking fragile items in your daily life? The Blue 10-Piece Organizer Kit offers practicality and durability, with a transparent and resistant design that facilitates organization and prevents waste.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Seção de Formulário e Resumo -->
            <div class="checkout-bottom">
                <div class="form-section">
                    <form class="checkout-form" id="checkoutForm">
                        <h3><i class="fas fa-user"></i> <span data-translate-key="customer_info">Customer Information</span></h3>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="firstName" data-translate-key="first_name">First Name *</label>
                                    <input type="text" id="firstName" name="firstName" required>
                                </div>
                                <div class="form-group">
                                    <label for="lastName" data-translate-key="last_name">Last Name *</label>
                                    <input type="text" id="lastName" name="lastName" required>
                            </div>
                        </div>

                            <div class="form-group">
                                <label for="email" data-translate-key="email_label">Email *</label>
                                <input type="email" id="email" name="email" required placeholder="seu@email.com">
                            </div>
                    
                    <div class="form-group">
                                <label for="phone" data-translate-key="phone_label">Phone *</label>
                                <input type="tel" id="phone" name="phone" required placeholder="+1 (555) 123-4567">
                            </div>

                            <h3><i class="fas fa-truck"></i> <span data-translate-key="shipping_info">Shipping Information</span></h3>
                            
                            <div class="form-group">
                                <label for="address" data-translate-key="address_label">Address *</label>
                                <textarea id="address" name="address" rows="3" required placeholder="Street address, apartment, suite, etc."></textarea>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="city" data-translate-key="city_label">City *</label>
                                    <input type="text" id="city" name="city" required>
                                </div>
                                <div class="form-group">
                                    <label for="state" data-translate-key="state_label">State/Province *</label>
                                    <input type="text" id="state" name="state" required>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="zipCode" data-translate-key="zip_code_label">ZIP/Postal Code *</label>
                                    <input type="text" id="zipCode" name="zipCode" required>
                                </div>
                                <div class="form-group">
                                    <label for="country" data-translate-key="country_label">Country *</label>
                                    <select id="country" name="country" required>
                                        <option value="" data-translate-key="select_country">Select Country</option>
                                        <option value="US" data-translate-key="country_us">United States</option>
                                        <option value="BR" data-translate-key="country_br">Brazil</option>
                                        <option value="PT" data-translate-key="country_pt">Portugal</option>
                                        <option value="CA" data-translate-key="country_ca">Canada</option>
                                        <option value="GB" data-translate-key="country_gb">United Kingdom</option>
                                        <option value="DE" data-translate-key="country_de">Germany</option>
                                        <option value="FR" data-translate-key="country_fr">France</option>
                                        <option value="ES" data-translate-key="country_es">Spain</option>
                                        <option value="IT" data-translate-key="country_it">Italy</option>
                                        <option value="AU" data-translate-key="country_au">Australia</option>
                                    </select>
                                </div>
                            </div>

                    <div class="form-group">
                                <label for="observations" data-translate-key="observations_label">Order Notes (optional)</label>
                                <textarea id="observations" name="observations" rows="3" placeholder="Any special instructions for your order?"></textarea>
                    </div>

                            <h3><i class="fas fa-credit-card"></i> <span data-translate-key="payment_method">Payment Method</span></h3>
                            
                            <div class="form-group">
                                <label for="paymentMethod" data-translate-key="payment_method_label">Payment Method *</label>
                        <select id="paymentMethod" name="paymentMethod" required>
                                    <option value="" data-translate-key="select_option">Select</option>
                                    <option value="paypal" data-translate-key="paypal_option">PayPal</option>
                                    <option value="pix" id="pix-option" style="display: none;" data-translate-key="pix_option">PIX (Brazil only)</option>
                                    <option value="stripe" id="stripe-option" style="display: none;" data-translate-key="stripe_option">Credit Card (Stripe)</option>
                        </select>
                    </div>

                    <div id="paypal-payment-button" style="display: none;"></div>
                    <div id="pix-payment-info" style="display: none;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border: 2px solid #d4af37; text-align: center;">
                                    <h4 style="color: #d4af37; margin-bottom: 15px;"><i class="fas fa-qrcode"></i> <span data-translate-key="pix_payment">PIX Payment</span></h4>
                                    <p style="color: #666; margin-bottom: 15px;" data-translate-key="pix_payment_info">After confirming your order, you will receive PIX payment instructions by email.</p>
                            <div style="background: white; padding: 15px; border-radius: 8px; border: 1px solid #ddd;">
                                        <strong data-translate-key="pix_key">PIX Key:</strong> contato@67beautyhub.com
                            </div>
                        </div>
                    </div>
                            
                            <div id="stripe-payment-info" style="display: none;">
                                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border: 2px solid #d4af37; text-align: center;">
                                    <h4 style="color: #d4af37; margin-bottom: 15px;"><i class="fas fa-credit-card"></i> <span data-translate-key="stripe_payment">Credit Card Payment</span></h4>
                                    <p style="color: #666; margin-bottom: 15px;" data-translate-key="stripe_payment_info">Secure payment processing with Stripe. Your card information is encrypted and secure.</p>
                                </div>
                            </div>

                        <button type="submit" class="checkout-btn">
                            <i class="fas fa-check"></i> Confirm Order
                        </button>
                    </form>
                </div>

                <div class="summary-section">
                    <h3><i class="fas fa-receipt"></i> <span data-translate-key="order_summary">Order Summary</span></h3>
                    <div class="checkout-summary">
                        <div id="selectedOffers"></div>
                        <div class="summary-row total">
                            <span data-translate-key="total">Total</span>
                            <span id="totalAmount">$3.54</span>
                        </div>
                        
                        <!-- Currency automatically detected based on browser language -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Review antigo removido - usando o novo sistema -->

    <!-- Seção de Reviews -->
    <div class="reviews-section" style="margin: 40px auto; max-width: 1200px; padding: 0 20px;">
        <div class="reviews-header">
            <h3><i class="fas fa-star"></i> What Our Customers Are Saying</h3>
            <p>More than 850 satisfied customers with our products</p>
            
            <!-- Botão para adicionar review -->
            <div style="margin-top: 20px;">
                    <button id="addReviewBtn" style="background: #d4af37; color: white; border: none; padding: 12px 24px; border-radius: 25px; font-size: 16px; cursor: pointer; transition: all 0.3s ease;">
                        <i class="fas fa-plus"></i> Add Your Review
                    </button>
            </div>
        </div>
        
        <div class="reviews-container">
            <div class="review-item clickable-review" 
                 data-review-id="sarah"
                 data-author="Sarah M."
                 data-date="1 week ago"
                 data-stars="5">
                <div class="review-image">
                    <img src="Reviews/Upload 1.avif" alt="Review Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"They are great. for styling my daughter's hair. ♥️"</p>
                    <div class="review-author">
                        <strong>Sarah M.</strong>
                        <span class="review-date">Verified Purchase - 1 week ago</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-review-id="jessica"
                 data-author="Jessica R."
                 data-date="3 days ago"
                 data-stars="4">
                <div class="review-image">
                    <img src="Reviews/Upload 2.avif" alt="Review Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                    </div>
                    <p class="review-text">"Great quality clips! I use them daily for my hair routine. They're strong and durable. Only wish they came in more colors..."</p>
                    <div class="review-author">
                        <strong>Jessica R.</strong>
                        <span class="review-date">Verified Purchase - 3 days ago</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-review-id="amanda"
                 data-author="Amanda L."
                 data-date="2 weeks ago"
                 data-stars="5">
                <div class="review-image">
                    <div class="review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"Perfect for my salon! Professional quality clips that don't break easily. My clients love how comfortable they are..."</p>
                    <div class="review-author">
                        <strong>Amanda L.</strong>
                        <span class="review-date">Verified Purchase - 2 weeks ago</span>
                    </div>
                </div>
            </div>

            <div class="review-item clickable-review" 
                 data-review-id="maria"
                 data-author="Maria Santos"
                 data-date="5 days ago"
                 data-stars="4.5">
                <div class="review-image">
                    <div class="review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <p class="review-text">"Excellent quality! I use them to hold my hair while doing makeup. They are durable and don't hurt the hair..."</p>
                    <div class="review-author">
                        <strong>Maria Santos</strong>
                        <span class="review-date">Verified Purchase - 5 days ago</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Formulário de Review para Usuários Logados -->
        <div id="userReviewForm" class="user-review-form" style="display: none;">
            <div class="review-form-container">
                <h4><i class="fas fa-edit"></i> Deixe sua avaliação</h4>
                <form id="submitReviewForm">
                    <div class="review-form-group">
                        <label>Avaliação:</label>
                        <div class="star-rating" id="starRating">
                            <i class="far fa-star" data-rating="1"></i>
                            <i class="far fa-star" data-rating="2"></i>
                            <i class="far fa-star" data-rating="3"></i>
                            <i class="far fa-star" data-rating="4"></i>
                            <i class="far fa-star" data-rating="5"></i>
                        </div>
                        <input type="hidden" id="selectedRating" value="0">
                    </div>
                    <div class="review-form-group">
                        <label for="reviewText">Your review:</label>
                        <textarea id="reviewText" rows="4" placeholder="Tell us about your experience with the product..." maxlength="500"></textarea>
                        <small class="char-count">0/500 characters</small>
                    </div>
                    <button type="submit" class="submit-review-btn">
                        <i class="fas fa-paper-plane"></i> Enviar Avaliação
                    </button>
                </form>
            </div>
        </div>

        <div class="reviews-stats">
            <div class="stat-item">
                <div class="stat-number" id="averageRating">4.6</div>
                <div class="stat-stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star-half-alt"></i>
                </div>
                <div class="stat-label">Average Rating</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="totalReviews">856</div>
                <div class="stat-label">Satisfied Customers</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">96%</div>
                <div class="stat-label">Would Recommend</div>
            </div>
        </div>
    </div>

    <!-- Modal de Login -->
    <div id="loginModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: white; padding: 30px; border-radius: 15px; max-width: 400px; width: 90%; text-align: center;">
            <h3 style="color: #d4af37; margin-bottom: 20px;"><i class="fas fa-user"></i> Login</h3>
            <form id="loginForm">
                <div style="margin-bottom: 15px;">
                    <input type="email" id="loginEmail" placeholder="Your email" required style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                </div>
                <div style="margin-bottom: 20px;">
                    <input type="password" id="loginPassword" placeholder="Your password" required style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                </div>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button type="submit" style="background: #d4af37; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Login</button>
                    <button type="button" id="closeLoginModal" style="background: #666; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Review -->
    <div id="reviewModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; width: 90%; max-height: 90vh; overflow-y: auto;">
            <h3 style="color: #d4af37; margin-bottom: 20px;"><i class="fas fa-star"></i> Add Review</h3>
            <form id="reviewForm">
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Your Name:</label>
                    <input type="text" id="reviewerName" required style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Rating:</label>
                    <div id="starRating" style="display: flex; gap: 5px; justify-content: center; margin: 10px 0;">
                        <i class="fas fa-star" data-rating="1" style="font-size: 24px; color: #ddd; cursor: pointer; transition: color 0.3s;"></i>
                        <i class="fas fa-star" data-rating="2" style="font-size: 24px; color: #ddd; cursor: pointer; transition: color 0.3s;"></i>
                        <i class="fas fa-star" data-rating="3" style="font-size: 24px; color: #ddd; cursor: pointer; transition: color 0.3s;"></i>
                        <i class="fas fa-star" data-rating="4" style="font-size: 24px; color: #ddd; cursor: pointer; transition: color 0.3s;"></i>
                        <i class="fas fa-star" data-rating="5" style="font-size: 24px; color: #ddd; cursor: pointer; transition: color 0.3s;"></i>
                    </div>
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Your Review:</label>
                    <textarea id="reviewText" required placeholder="Tell us about your experience with the product..." style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; min-height: 100px; resize: vertical;"></textarea>
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Photo (optional):</label>
                    <input type="file" id="reviewImage" accept="image/*" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                    <div id="imagePreview" style="margin-top: 10px; text-align: center;"></div>
                </div>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button type="submit" style="background: #d4af37; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Submit Review</button>
                    <button type="button" id="closeReviewModal" style="background: #666; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Seção Final de Apresentação -->
    <div class="final-presentation" style="background-image: url('Cabelos sempre perfeitos.webp'); background-size: cover; background-position: center; background-repeat: no-repeat; min-height: 400px;">
        <div class="presentation-content">
            <div class="presentation-overlay" style="background: rgba(0, 0, 0, 0.4); padding: 60px 20px; text-align: center; min-height: 400px; display: flex; align-items: center; justify-content: center;">
                <div class="presentation-text" style="color: white;">
                    <h2 style="color: #d4af37; font-size: 2.5rem; margin-bottom: 20px;">✨ Always Perfect Hair</h2>
                    <p style="font-size: 1.2rem; margin-bottom: 30px; color: white;">Discover the practicality and quality of our professional hair clips</p>
                    <div class="presentation-features" style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
                        <div class="feature-badge" style="background: rgba(212, 175, 55, 0.9); color: white; padding: 10px 20px; border-radius: 25px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-award"></i>
                            <span>Professional Quality</span>
                        </div>
                        <div class="feature-badge" style="background: rgba(212, 175, 55, 0.9); color: white; padding: 10px 20px; border-radius: 25px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-shipping-fast"></i>
                            <span>Fast Delivery</span>
                        </div>
                        <div class="feature-badge" style="background: rgba(212, 175, 55, 0.9); color: white; padding: 10px 20px; border-radius: 25px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-heart"></i>
                            <span>Satisfaction Guaranteed</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Offer data for Alligator Hair Clips
        const offers = {
            basic: {
                name: 'Basic Offer', // Will be replaced by selected color
                prices: {
                    USD: 3.54, // Optimized price with real margin (Nude Pink)
                    BRL: 18.64,
                    EUR: 3.26,
                    AOA: 3257
                },
                discount: 0,
                shipping: {
                    USD: 8.90,
                    BRL: 46.90,
                    EUR: 8.18,
                    AOA: 8180
                }
            },
            premium: {
                name: 'Towel cloth-pink',
                prices: {
                    USD: 2.89,
                    BRL: 15.24,
                    EUR: 2.66,
                    AOA: 2659
                },
                discount: 0,
                shipping: {
                    USD: 8.90,
                    BRL: 46.90,
                    EUR: 8.18,
                    AOA: 8180
                }
            },
            complete: {
                name: '10pcsTouMing-blue',
                prices: {
                    USD: 11.36,
                    BRL: 59.84,
                    EUR: 10.45,
                    AOA: 10451
                },
                discount: 0,
                shipping: {
                    USD: 2.04,
                    BRL: 10.75,
                    EUR: 1.88,
                    AOA: 1877
                }
            }
        };

        let selectedOffers = ['basic']; // Array para múltiplas seleções
        let selectedColor = null; // Cor selecionada para a oferta básica

        // Currency System
        let currentCurrency = 'USD';
        let summaryCurrency = 'USD'; // Moeda do resumo do pedido
        let exchangeRates = {
            'USD': { symbol: '$', rate: 1, locale: 'en-US', currency: 'USD' },
            'BRL': { symbol: 'R$', rate: 5.27, locale: 'pt-BR', currency: 'BRL' },
            'EUR': { symbol: '€', rate: 0.92, locale: 'de-DE', currency: 'EUR' },
            'AOA': { symbol: 'Kz', rate: 920, locale: 'pt-AO', currency: 'AOA' }
        };

        // Event listeners movidos para DOMContentLoaded

        // Update currency display in checkout
        function updateCurrencyDisplay() {
            // Atualizar apenas preços das ofertas nas checkboxes usando preços pré-calculados
            document.querySelectorAll('.offer-option').forEach(offerElement => {
                const offerKey = offerElement.dataset.option;
                const offer = offers[offerKey];
                const priceElement = offerElement.querySelector('.price');
                
                if (offer && priceElement) {
                    const price = offer.prices[currentCurrency];
                    if (price) {
                        if (currentCurrency === 'USD') {
                            priceElement.textContent = `$${price.toFixed(2)}`;
                        } else if (currentCurrency === 'BRL') {
                            priceElement.textContent = `R$ ${price.toFixed(2).replace('.', ',')}`;
                        } else if (currentCurrency === 'EUR') {
                            priceElement.textContent = `€${price.toFixed(2)}`;
                        } else if (currentCurrency === 'AOA') {
                            priceElement.textContent = `Kz ${price.toLocaleString()}`;
                        }
                    }
                }
            });
            // NÃO atualizar resumo do pedido - apenas as checkboxes
        }

        // Função para atualizar resumo do pedido
        function updateOrderSummary() {
            const selectedOffersContainer = document.getElementById('selectedOffers');
            let total = 0;

            console.log('Updating order summary. Selected offers:', selectedOffers);
            console.log('Summary currency:', summaryCurrency);

            if (!selectedOffersContainer) {
                console.error('selectedOffersContainer not found!');
                return;
            }

            // Limpar ofertas anteriores
            selectedOffersContainer.innerHTML = '';

            // Calcular total para cada oferta selecionada
            selectedOffers.forEach(offerKey => {
                const offer = offers[offerKey];
                console.log('Processing offer:', offerKey, offer);
                
                if (offer) {
                    // Usar preços pré-calculados diretamente
                    const basePrice = offer.prices[summaryCurrency];
                    console.log('Base price for', offerKey, ':', basePrice, 'in summary currency:', summaryCurrency);
                    
                    // Aplicar desconto se houver
                    const discountAmount = (basePrice * offer.discount / 100);
                    const offerTotal = basePrice - discountAmount;
                
                total += offerTotal;

                // Adicionar linha da oferta no resumo
                const offerRow = document.createElement('div');
                offerRow.className = 'summary-row';
                
                // Get translated offer name
                let translatedOfferName = offer.name;
                if (offerKey === 'basic') {
                    translatedOfferName = 'Hair Clips';
                    // Add selected color ONLY for basic offer
                    if (selectedColor && selectedColor.name) {
                        // Keep color name in English for international users
                        let translatedColorName = selectedColor.name;
                        translatedOfferName += ` (${translatedColorName})`;
                    }
                } else if (offerKey === 'premium') {
                    translatedOfferName = offer.name;
                } else if (offerKey === 'complete') {
                    translatedOfferName = offer.name;
                }
                
                offerRow.innerHTML = `
                    <span>${translatedOfferName}</span>
                    <span>${formatSummaryPrice(offerTotal)}</span>
                `;
                selectedOffersContainer.appendChild(offerRow);
                    
                    console.log('Added offer to summary:', offer.name, 'Price:', offerTotal, 'Formatted:', formatSummaryPrice(offerTotal));
                } else {
                    console.error('Offer not found for key:', offerKey);
                }
            });

            // Atualizar total
            const totalElement = document.getElementById('totalAmount');
            if (totalElement) {
                totalElement.textContent = formatSummaryPrice(total);
                console.log('Updated total:', formatSummaryPrice(total));
            } else {
                console.error('totalAmount element not found!');
            }
        }

        // Format price for display
        function formatPrice(price) {
            console.log('Formatting price:', price, 'for currency:', currentCurrency);
            if (currentCurrency === 'BRL') {
                return `R$ ${price.toFixed(2).replace('.', ',')}`;
            } else if (currentCurrency === 'USD') {
                return `$${price.toFixed(2)}`;
            } else if (currentCurrency === 'EUR') {
                return `€${price.toFixed(2)}`;
            } else if (currentCurrency === 'AOA') {
                return `Kz ${price.toLocaleString()}`;
            }
            return price.toString();
        }

        // Format price for summary (uses summaryCurrency)
        function formatSummaryPrice(price) {
            console.log('Formatting summary price:', price, 'for currency:', summaryCurrency);
            if (summaryCurrency === 'BRL') {
                return `R$ ${price.toFixed(2).replace('.', ',')}`;
            } else if (summaryCurrency === 'USD') {
                return `$${price.toFixed(2)}`;
            } else if (summaryCurrency === 'EUR') {
                return `€${price.toFixed(2)}`;
            } else if (summaryCurrency === 'AOA') {
                return `Kz ${price.toLocaleString()}`;
            }
            return price.toString();
        }


        // Formulário de checkout
        document.getElementById('checkoutForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Coletar dados do formulário
            const formData = new FormData(this);
            const orderData = {};
            formData.forEach((value, key) => {
                orderData[key] = value;
            });
            
            // Adicionar dados das ofertas selecionadas
            orderData.selectedOffers = selectedOffers;
            orderData.offerNames = selectedOffers.map(key => offers[key].name);
            
            // Calcular total
            let total = 0;
            selectedOffers.forEach(offerKey => {
                const offer = offers[offerKey];
                const discountAmount = (offer.price * offer.discount / 100);
                const offerTotal = offer.price - discountAmount;
                total += offerTotal;
            });
            
            orderData.total = total;
            
            // Processar pagamento
            const offerNames = selectedOffers.map(key => offers[key].name).join(', ');
            // Sistema de popup de celebração será usado via supplier-order-processor.js
        });




        // Currency System - Variables already declared above

        // Auto-detect user language and set currency accordingly
        function detectUserLanguageAndCurrency() {
            const userLanguage = navigator.language || navigator.userLanguage;
            const languageCode = userLanguage.toLowerCase();
            
            console.log('Detected browser language:', userLanguage);
            
            let detectedCurrency = 'USD';
            
            if (languageCode.startsWith('pt')) {
                detectedCurrency = 'BRL';
                console.log('Portuguese detected → BRL');
            } else if (languageCode.startsWith('es')) {
                detectedCurrency = 'EUR';
                console.log('Spanish detected → EUR');
            } else if (languageCode.startsWith('en')) {
                if (languageCode.includes('gb') || languageCode.includes('uk')) {
                    detectedCurrency = 'GBP';
                    console.log('British English detected → GBP');
                } else if (languageCode.includes('ca')) {
                    detectedCurrency = 'CAD';
                    console.log('Canadian English detected → CAD');
                } else if (languageCode.includes('au')) {
                    detectedCurrency = 'AUD';
                    console.log('Australian English detected → AUD');
                } else {
                    detectedCurrency = 'USD';
                    console.log('English detected → USD');
                }
            } else if (languageCode.startsWith('fr') || languageCode.startsWith('de') || languageCode.startsWith('it')) {
                detectedCurrency = 'EUR';
                console.log('European language detected → EUR');
            }
            
            return detectedCurrency;
        }
        
        // Currency detection is now automatic - no manual selection needed
        
        // Select flag option - CHANGES ONLY CURRENCY, NOT LANGUAGE
        function selectFlagOption(currency, flag) {
            const selectedFlag = document.getElementById('selectedFlag');
            selectedFlag.textContent = flag;

            // Close dropdown
            // Flag dropdown removed - currency detection is now automatic

            // Change ONLY currency (not language)
            currentCurrency = currency;
            updateCurrencyDisplay();

            // Save currency preference
            localStorage.setItem('selectedCurrency', currency);

            console.log(`✅ Currency changed to: ${currency}, Flag: ${flag} - Language unchanged (checkout behavior)`);
        }
        

        // Initialize currency system
        function initializeCurrency() {
            // Check if user has a saved currency preference
            const savedCurrency = localStorage.getItem('selectedCurrency');
            let detectedCurrency;
            
            if (savedCurrency && exchangeRates[savedCurrency]) {
                detectedCurrency = savedCurrency;
                console.log('Using saved currency preference:', savedCurrency);
            } else {
                detectedCurrency = detectUserLanguageAndCurrency();
                console.log('Auto-detected currency:', detectedCurrency);
            }
            
            currentCurrency = detectedCurrency;
            
            // Update selected flag
            const selectedFlag = document.getElementById('selectedFlag');
            const flagOption = document.querySelector(`[data-currency="${detectedCurrency}"]`);
            if (flagOption && selectedFlag) {
                selectedFlag.textContent = flagOption.dataset.flag;
            }
            
            console.log('🌍 Auto-set currency:', currentCurrency, 'from browser:', navigator.language);
            
            updateCurrencyDisplay();
        }


        // Format price for display (main page) - REMOVED DUPLICATE FUNCTION
        



        
        // Add event listeners for flag selection
        document.querySelectorAll('.flag-option').forEach(flag => {
            flag.addEventListener('click', function() {
                const currency = this.dataset.currency;
                const flagEmoji = this.dataset.flag;
                selectFlagOption(currency, flagEmoji);
            });
        });
        
        // Close dropdown when clicking outside
        // Flag dropdown removed - no click listener needed
        

        // Review Modal Functions
        function openReviewModal(author, date, stars, fullText) {
            // Criar modal dinâmico para mostrar review completa
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.5); z-index: 1000; 
                display: flex; justify-content: center; align-items: center;
            `;
            
            const starCount = parseFloat(stars);
            let starsHTML = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= starCount) {
                    starsHTML += '<i class="fas fa-star" style="color: #d4af37;"></i>';
                } else {
                    starsHTML += '<i class="far fa-star" style="color: #ddd;"></i>';
                }
            }
            
            modal.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; width: 90%; text-align: center;">
                    <h3 style="color: #d4af37; margin-bottom: 20px;">Review Completa</h3>
                    <div style="margin-bottom: 15px;">
                        <strong>${author}</strong>
                        <div style="margin: 10px 0;">${starsHTML}</div>
                        <span style="color: #666; font-size: 14px;">Verified Purchase - ${date}</span>
                    </div>
                    <p style="text-align: left; line-height: 1.6; margin-bottom: 20px;">"${fullText}"</p>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: #d4af37; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Close</button>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function closeReviewModal() {
            const modal = document.getElementById('reviewModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Add click listeners to reviews
        document.addEventListener('DOMContentLoaded', function() {
            const clickableReviews = document.querySelectorAll('.clickable-review');
            clickableReviews.forEach(review => {
                review.addEventListener('click', function() {
                    const author = this.dataset.author;
                    const date = this.dataset.date;
                    const stars = this.dataset.stars;
                    
                    // Get review text based on ID
                    const reviewTexts = {
                        'sarah': "They are great. for styling my daughter's hair. ♥️",
                        'jessica': "Great quality clips! I use them daily for my hair routine. They're strong and durable. Only wish they came in more colors, but the functionality is perfect. They grip well without being too tight and are comfortable to wear for extended periods.",
                        'amanda': "Perfect for my salon! Professional quality clips that don't break easily. My clients love how comfortable they are and they hold all hair types securely. These have become a staple in my toolkit. Highly recommend for both personal and professional use!",
                        'maria': "Excelente qualidade! Uso para prender o cabelo enquanto faço maquiagem. São resistentes e não machucam o cabelo. Muito práticas e funcionais. Recomendo para quem precisa de presilhas confiáveis no dia a dia."
                    };
                    
                    const reviewId = this.dataset.reviewId;
                    const fullText = reviewTexts[reviewId] || "Review completo não disponível.";
                    
                    openReviewModal(author, date, stars, fullText);
                });
            });
            
            // Close modal when clicking overlay
            document.getElementById('reviewModal').addEventListener('click', function(e) {
                if (e.target === this || e.target.classList.contains('modal-overlay')) {
                    closeReviewModal();
                }
            });
        });

        // Sistema de Reviews Dinâmicas para Usuários Logados - Variáveis já declaradas no script principal

        // Verificar se usuário está logado
        function checkUserLogin() {
            const userData = localStorage.getItem('userLogin');
            if (userData) {
                currentUser = JSON.parse(userData);
                showReviewForm();
                loadUserReviews();
                return true;
            }
            return false;
        }

        // Mostrar formulário de review para usuários logados
        function showReviewForm() {
            const reviewForm = document.getElementById('userReviewForm');
            if (reviewForm) {
                reviewForm.style.display = 'block';
            }
        }

        // Carregar reviews de usuários logados
        function loadUserReviews() {
            const reviewsContainer = document.querySelector('.reviews-container');
            if (!reviewsContainer || userReviews.length === 0) return;

            // Adicionar reviews de usuários no início do container
            userReviews.forEach((review, index) => {
                const reviewElement = createUserReviewElement(review, index);
                reviewsContainer.insertBefore(reviewElement, reviewsContainer.firstChild);
            });

            updateReviewStats();
        }

        // Criar elemento de review do usuário
        function createUserReviewElement(review, index) {
            const reviewDiv = document.createElement('div');
            reviewDiv.className = 'review-item user-review-item clickable-review';
            reviewDiv.setAttribute('data-review-id', `user-${index}`);
            reviewDiv.setAttribute('data-author', review.author);
            reviewDiv.setAttribute('data-date', review.date);
            reviewDiv.setAttribute('data-stars', review.rating);

            const starsHTML = generateStarsHTML(review.rating);
            
            reviewDiv.innerHTML = `
                <div class="user-review-badge">Verified Customer</div>
                <div class="review-image">
                    <div class="user-review-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="review-content">
                    <div class="user-review-stars">
                        ${starsHTML}
                    </div>
                    <p class="user-review-text">"${review.text}"</p>
                    <div class="user-review-author">
                        <strong>${review.author}</strong>
                        <span class="user-review-date">Verified Purchase - ${review.date}</span>
                    </div>
                </div>
            `;

            // Adicionar event listener para modal
            reviewDiv.addEventListener('click', function() {
                openReviewModal(review.author, review.date, review.rating, review.text);
            });

            return reviewDiv;
        }

        // Gerar HTML das estrelas
        function generateStarsHTML(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 !== 0;
            const emptyStars = 5 - Math.ceil(rating);
            
            let starsHTML = '';
            for (let i = 0; i < fullStars; i++) {
                starsHTML += '<i class="fas fa-star"></i>';
            }
            if (hasHalfStar) {
                starsHTML += '<i class="fas fa-star-half-alt"></i>';
            }
            for (let i = 0; i < emptyStars; i++) {
                starsHTML += '<i class="far fa-star"></i>';
            }
            return starsHTML;
        }

        // Atualizar estatísticas das reviews
        function updateReviewStats() {
            const totalReviews = 4 + userReviews.length; // 4 reviews fixas + reviews de usuários
            const totalRating = (4.6 * 4 + userReviews.reduce((sum, review) => sum + review.rating, 0)) / totalReviews;
            
            document.getElementById('totalReviews').textContent = totalReviews;
            document.getElementById('averageRating').textContent = totalRating.toFixed(1);
        }

        // Sistema de avaliação por estrelas
        function initializeStarRating() {
            const stars = document.querySelectorAll('.star-rating i');
            const selectedRatingInput = document.getElementById('selectedRating');
            
            stars.forEach((star, index) => {
                star.addEventListener('click', function() {
                    const rating = parseInt(this.dataset.rating);
                    selectedRatingInput.value = rating;
                    
                    // Atualizar visual das estrelas
                    stars.forEach((s, i) => {
                        if (i < rating) {
                            s.className = 'fas fa-star';
                        } else {
                            s.className = 'far fa-star';
                        }
                    });
                });

                star.addEventListener('mouseenter', function() {
                    const rating = parseInt(this.dataset.rating);
                    stars.forEach((s, i) => {
                        if (i < rating) {
                            s.style.color = '#ffd700';
                        } else {
                            s.style.color = '#ddd';
                        }
                    });
                });
            });

            // Reset ao sair do hover
            document.querySelector('.star-rating').addEventListener('mouseleave', function() {
                const currentRating = parseInt(selectedRatingInput.value);
                stars.forEach((s, i) => {
                    if (i < currentRating) {
                        s.style.color = '#ffd700';
                    } else {
                        s.style.color = '#ddd';
                    }
                });
            });
        }

        // Contador de caracteres
        function initializeCharacterCounter() {
            const textarea = document.getElementById('reviewText');
            const charCount = document.querySelector('.char-count');
            
            if (textarea && charCount) {
                textarea.addEventListener('input', function() {
                    const length = this.value.length;
                    charCount.textContent = `${length}/500 caracteres`;
                    
                    if (length > 450) {
                        charCount.style.color = '#e74c3c';
                    } else {
                        charCount.style.color = '#666';
                    }
                });
            }
        }

        // Submeter review
        function initializeReviewSubmission() {
            const form = document.getElementById('submitReviewForm');
            if (!form) return;

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const rating = parseInt(document.getElementById('selectedRating').value);
                const text = document.getElementById('reviewText').value.trim();
                
                if (rating === 0) {
                    alert('Por favor, selecione uma avaliação com estrelas.');
                    return;
                }
                
                if (text.length < 10) {
                    alert('Por favor, escreva pelo menos 10 caracteres na sua avaliação.');
                    return;
                }
                
                // Criar nova review
                const newReview = {
                    author: currentUser.name,
                    rating: rating,
                    text: text,
                    date: 'Agora mesmo',
                    timestamp: Date.now()
                };
                
                // Adicionar à lista de reviews
                userReviews.unshift(newReview);
                localStorage.setItem('userReviews', JSON.stringify(userReviews));
                
                // Recarregar reviews
                location.reload();
            });
        }

        // Inicializar sistema de reviews
        function initializeReviewSystem() {
            if (checkUserLogin()) {
                initializeStarRating();
                initializeCharacterCounter();
                initializeReviewSubmission();
            }
        }

        // Inicializar resumo após DOM carregado
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing...');
            console.log('Selected offers on load:', selectedOffers);
            console.log('Current currency on load:', currentCurrency);
            console.log('Offers data:', offers);
            updateOrderSummary();
            initializeReviewSystem();
            
            // Event listeners para checkboxes (exceto oferta básica)
            document.querySelectorAll('.offer-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const option = this.dataset.option;
                    const offerElement = this.closest('.offer-option');
                    
                    if (this.checked) {
                        if (!selectedOffers.includes(option)) {
                            selectedOffers.push(option);
                        }
                        offerElement.classList.add('selected');
        } else {
                        selectedOffers = selectedOffers.filter(offer => offer !== option);
                        offerElement.classList.remove('selected');
                    }
                    
                    // Garantir que pelo menos uma oferta esteja selecionada
                    if (selectedOffers.length === 0) {
                        this.checked = true;
                        selectedOffers.push(option);
                        offerElement.classList.add('selected');
                    }
                    
                    updateOrderSummary();
                });
            });
            
            // Garantir que a oferta básica esteja sempre selecionada
            if (!selectedOffers.includes('basic')) {
                selectedOffers.push('basic');
            }

            // Event listeners para cliques nas ofertas (exceto oferta básica)
            document.querySelectorAll('.offer-option:not(.color-selection-box)').forEach(option => {
                option.addEventListener('click', function(e) {
                    // Não processar clique se for no checkbox
                    if (e.target.type === 'checkbox') return;
                    
                    const checkbox = this.querySelector('.offer-checkbox');
                    if (checkbox) {
                        checkbox.checked = !checkbox.checked;
                        checkbox.dispatchEvent(new Event('change'));
                    }
                });
            });
            
            // Event listener para o dropdown de países
            const flagDropdown = document.getElementById('flagDropdown');
            if (flagDropdown) {
                flagDropdown.addEventListener('click', function(e) {
                    e.stopPropagation();
                    toggleFlagDropdown();
                });
            }
            
            // Event listeners para opções de país
            document.querySelectorAll('.flag-option').forEach(option => {
                option.addEventListener('click', function() {
                    const currency = this.dataset.currency;
                    const flag = this.dataset.flag;
                    const country = this.dataset.country;
                    
                    // Update selected flag
                    document.getElementById('selectedFlag').textContent = flag;
                    
                    // Close dropdown
                    const dropdown = document.querySelector('.flag-dropdown');
                    const menu = document.getElementById('flagDropdownMenu');
                    dropdown.classList.remove('open');
                    menu.classList.remove('open');
                    
                    // Change currency
                    currentCurrency = currency;
                    updateCurrencyDisplay();
                    
                    console.log('Currency changed to:', currency);
                });
            });
            
            // Event listener para o seletor de moeda do resumo
            const summaryCurrencySelector = document.getElementById('summaryCurrencySelector');
            if (summaryCurrencySelector) {
                // Set initial currency based on detected currency
                summaryCurrency = currentCurrency;
                summaryCurrencySelector.value = currentCurrency;
                console.log('Summary currency initialized to:', summaryCurrency);
                
                summaryCurrencySelector.addEventListener('change', function() {
                    summaryCurrency = this.value;
                    console.log('Summary currency changed to:', summaryCurrency);
                    // Atualizar apenas o resumo do pedido
                    updateOrderSummary();
                });
            }
        });
        

        // Funcionalidade para imagens selecionáveis
            document.addEventListener('DOMContentLoaded', function() {
            // Mapeamento das cores para suas imagens
            const colorImageMap = {
                'black': 'Escolhas/Black (6 Pieces).png',
                'green': 'Escolhas/Green (6 pieces).png',
                'nude-pink': 'Escolhas/Nude Pink (6 Pieces).png',
                'pink': 'Escolhas/Pink (6 Pieces).png',
                'purple': 'Escolhas/Purple (6 pieces).png',
                'red': 'Escolhas/Red (6 pieces).png',
                'yellow': 'Escolhas/Yellow (6 Pieces).png'
            };
            
            // Função para atualizar imagem principal
            function updateMainProductImage(colorValue) {
                const mainImage = document.getElementById('mainProductImage');
                if (mainImage && colorImageMap[colorValue]) {
                    mainImage.src = colorImageMap[colorValue];
                    mainImage.alt = `Alligator Hair Clips - ${colorValue}`;
                }
            }
            
            // Adicionar event listeners para as opções de cor
            const colorOptions = document.querySelectorAll('.color-option');
            
            colorOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const colorValue = this.getAttribute('data-color');
                    const colorName = this.querySelector('span').textContent;
                    
                    // Remover seleção de outras cores
                    colorOptions.forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selected class to selected color
                    this.classList.add('selected');
                    
                    // Capture selected color
                    selectedColor = {
                        name: colorName,
                        image: colorImageMap[colorValue]
                    };
                    
                    console.log('Cor selecionada:', selectedColor);
                    
                    // Atualizar imagem principal
                    updateMainProductImage(colorValue);
                    
                    // Atualizar resumo do pedido
                    updateOrderSummary();
                });
            });
            
            // Selecionar Nude Pink como padrão
            const nudePinkOption = document.querySelector('.color-option[data-color="nude-pink"]');
            if (nudePinkOption) {
                nudePinkOption.classList.add('selected');
                // Definir cor padrão selecionada
                selectedColor = {
                    name: 'Nude Pink',
                    image: 'Escolhas/Nude Pink (6 Pieces).png'
                };
            }
            
            // Sistema de galeria de produtos
            function initializeProductGallery() {
            const galleryImages = [
                { src: 'Galeria/Screenshot 2025-09-20 023036.png' },
                { src: 'Galeria/Screenshot 2025-09-20 023101.png' },
                { src: 'Galeria/Screenshot 2025-09-20 023256.png' },
                { src: 'Galeria/ssdfs.png' },
                { src: 'Galeria/Whisk_9dc8cad069040e18750461ad2431c6abdr.jpeg' },
                { src: 'Galeria/Whisk_aff77479497b37e8d5a42b64951f0f26dr.jpeg' }
            ];
            
            let currentImageIndex = 0;
            const mainImage = document.getElementById('galleryMainImage');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const indicatorsContainer = document.getElementById('galleryIndicators');
            
            // Criar indicadores
            galleryImages.forEach((_, index) => {
                const indicator = document.createElement('div');
                indicator.className = 'gallery-indicator';
                if (index === 0) indicator.classList.add('active');
                indicator.addEventListener('click', () => goToImage(index));
                indicatorsContainer.appendChild(indicator);
            });
            
            function updateImage(direction = null) {
                const currentImage = galleryImages[currentImageIndex];
                
                // Aplicar transição de saída
                if (direction === 'next') {
                    mainImage.classList.add('slide-right');
                } else if (direction === 'prev') {
                    mainImage.classList.add('slide-left');
                }
                
                setTimeout(() => {
                    mainImage.src = currentImage.src;
                    mainImage.alt = `Alligator Hair Clips - Imagem ${currentImageIndex + 1}`;
                    
                    // Remover classes de saída e aplicar entrada
                    mainImage.classList.remove('slide-left', 'slide-right');
                    
                    if (direction === 'next') {
                        mainImage.classList.add('slide-in-left');
                    } else if (direction === 'prev') {
                        mainImage.classList.add('slide-in-right');
                    }
                    
                    // Remover classes de entrada após animação
                    setTimeout(() => {
                        mainImage.classList.remove('slide-in-left', 'slide-in-right');
                    }, 500);
                }, 250);
                
                // Atualizar indicadores
                const indicators = document.querySelectorAll('.gallery-indicator');
                indicators.forEach((indicator, index) => {
                    indicator.classList.toggle('active', index === currentImageIndex);
                });
                
                // Atualizar botões
                prevBtn.disabled = currentImageIndex === 0;
                nextBtn.disabled = currentImageIndex === galleryImages.length - 1;
            }
            
            function goToImage(index) {
                currentImageIndex = index;
                updateImage();
            }
            
            function nextImage() {
                if (currentImageIndex < galleryImages.length - 1) {
                    currentImageIndex++;
                    updateImage('next');
                }
            }
            
            function prevImage() {
                if (currentImageIndex > 0) {
                    currentImageIndex--;
                    updateImage('prev');
                }
            }
            
            // Event listeners
            prevBtn.addEventListener('click', prevImage);
            nextBtn.addEventListener('click', nextImage);
            
            // Manual navigation only - no automatic slideshow
            // Users can navigate using buttons and indicators at their own pace
            
            // Inicializar
            updateImage();
            
            console.log('🖼️ Galeria de produtos inicializada com', galleryImages.length, 'imagens');
            }
            
            // Inicializar galeria de produtos
            initializeProductGallery();
            
            // Adicionar estilos para seleção
            const style = document.createElement('style');
            style.textContent = `
                .color-option.selected {
                    border-color: #d4af37 !important;
                    box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2) !important;
                }
                .color-option.selected .color-image-container {
                    border-color: #d4af37 !important;
                }
                .color-image-container:hover {
                    transform: scale(1.05);
                    border-color: #d4af37 !important;
                }
            `;
            document.head.appendChild(style);
        });
    </script>

    <!-- Sistema de Reviews JavaScript -->
    <script>
        // Sistema de Reviews
        let currentUser = null;
        let userReviews = JSON.parse(localStorage.getItem('userReviews')) || [];
        let selectedRating = 0;

        // Verificar se usuário está logado
        function checkLogin() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                return true;
            }
            return false;
        }

        // Mostrar modal de login
        function showLoginModal() {
            document.getElementById('loginModal').style.display = 'flex';
        }

        // Fechar modal de login
        function closeLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
        }

        // Mostrar modal de review
        function showReviewModal() {
            if (!checkLogin()) {
                showLoginModal();
                return;
            }
            document.getElementById('reviewModal').style.display = 'flex';
        }

        // Fechar modal de review
        function closeReviewModal() {
            document.getElementById('reviewModal').style.display = 'none';
            document.getElementById('reviewForm').reset();
            selectedRating = 0;
            updateStarDisplay();
            document.getElementById('imagePreview').innerHTML = '';
        }


        // Atualizar display das estrelas
        function updateStarDisplay() {
            const stars = document.querySelectorAll('#starRating i');
            stars.forEach((star, index) => {
                if (index < selectedRating) {
                    star.style.color = '#d4af37';
                } else {
                    star.style.color = '#ddd';
                }
            });
        }

        // Event listeners para sistema de reviews
        document.addEventListener('DOMContentLoaded', function() {
            // Botão adicionar review
            const addReviewBtn = document.getElementById('addReviewBtn');
            if (addReviewBtn) {
                addReviewBtn.addEventListener('click', showReviewModal);
            }

            // Fechar modais
            document.getElementById('closeLoginModal').addEventListener('click', closeLoginModal);
            document.getElementById('closeReviewModal').addEventListener('click', closeReviewModal);

            // Login form
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                // Simular login (em produção, validar com backend)
                if (email && password) {
                    currentUser = { email: email, name: email.split('@')[0] };
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    closeLoginModal();
                    showReviewModal();
                } else {
                    alert('Por favor, preencha todos os campos');
                }
            });

            // Sistema de estrelas
            const stars = document.querySelectorAll('#starRating i');
            stars.forEach((star, index) => {
                star.addEventListener('click', function() {
                    selectedRating = index + 1;
                    updateStarDisplay();
                });
                star.addEventListener('mouseenter', function() {
                    for (let i = 0; i <= index; i++) {
                        stars[i].style.color = '#d4af37';
                    }
                });
                star.addEventListener('mouseleave', function() {
                    updateStarDisplay();
                });
            });

            // Preview de imagem
            document.getElementById('reviewImage').addEventListener('change', function(e) {
                const file = e.target.files[0];
                const preview = document.getElementById('imagePreview');
                
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        preview.innerHTML = `
                            <img src="${e.target.result}" style="max-width: 200px; max-height: 200px; border-radius: 8px; border: 2px solid #ddd;">
                        `;
                    };
                    reader.readAsDataURL(file);
                } else {
                    preview.innerHTML = '';
                }
            });

            // Formulário de review
            document.getElementById('reviewForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (selectedRating === 0) {
                    alert('Por favor, selecione uma avaliação');
                    return;
                }

                const reviewData = {
                    id: Date.now().toString(),
                    name: document.getElementById('reviewerName').value,
                    rating: selectedRating,
                    text: document.getElementById('reviewText').value,
                    image: null,
                    date: new Date().toLocaleDateString('pt-BR'),
                    verified: true
                };

                // Processar imagem se houver
                const imageFile = document.getElementById('reviewImage').files[0];
                if (imageFile) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        reviewData.image = e.target.result;
                        saveReview(reviewData);
                    };
                    reader.readAsDataURL(imageFile);
                } else {
                    saveReview(reviewData);
                }
            });

            // Carregar reviews existentes
            loadUserReviews();
        });

        // Salvar review
        function saveReview(reviewData) {
            userReviews.push(reviewData);
            localStorage.setItem('userReviews', JSON.stringify(userReviews));
            
            // Adicionar review ao DOM
            addReviewToDOM(reviewData);
            
            closeReviewModal();
            alert('Review adicionada com sucesso!');
        }

        // Adicionar review ao DOM
        function addReviewToDOM(reviewData) {
            const reviewsContainer = document.querySelector('.reviews-container');
            const reviewElement = document.createElement('div');
            reviewElement.className = 'review-item clickable-review';
            reviewElement.setAttribute('data-review-id', reviewData.id);
            reviewElement.setAttribute('data-author', reviewData.name);
            reviewElement.setAttribute('data-date', reviewData.date);
            reviewElement.setAttribute('data-stars', reviewData.rating);
            
            let imageHtml = '';
            if (reviewData.image) {
                imageHtml = `<img src="${reviewData.image}" alt="Review Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">`;
            } else {
                imageHtml = `<div class="review-avatar"><i class="fas fa-user"></i></div>`;
            }

            let starsHtml = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= reviewData.rating) {
                    starsHtml += '<i class="fas fa-star"></i>';
                } else {
                    starsHtml += '<i class="far fa-star"></i>';
                }
            }

            reviewElement.innerHTML = `
                <div class="review-image">
                    ${imageHtml}
                </div>
                <div class="review-content">
                    <div class="review-stars">
                        ${starsHtml}
                    </div>
                    <p class="review-text">"${reviewData.text}"</p>
                    <div class="review-author">
                        <strong>${reviewData.name}</strong>
                        <span class="review-date">Verified Purchase - ${reviewData.date}</span>
                    </div>
                </div>
            `;

            // Adicionar event listener para o modal
            reviewElement.addEventListener('click', function() {
                openReviewModal(reviewData.name, reviewData.date, reviewData.rating, reviewData.text);
            });

            reviewsContainer.insertBefore(reviewElement, reviewsContainer.firstChild);
        }

        // Carregar reviews do usuário
        function loadUserReviews() {
            userReviews.forEach(review => {
                addReviewToDOM(review);
            });
        }

        // Event listeners para imagens das reviews
    </script>

    <script>
        // Payment method control
        function setupPaymentMethodControl() {
            const paymentMethodSelect = document.getElementById('paymentMethod');
            const paypalButton = document.getElementById('paypal-payment-button');
            const pixInfo = document.getElementById('pix-payment-info');
            
            if (paymentMethodSelect) {
                paymentMethodSelect.addEventListener('change', function() {
                    const selectedMethod = this.value;
                    
                    // Hide all payment options first
                    if (paypalButton) paypalButton.style.display = 'none';
                    if (pixInfo) pixInfo.style.display = 'none';
                    
                    // Show selected payment method
                    switch(selectedMethod) {
                        case 'paypal':
                            if (paypalButton) paypalButton.style.display = 'block';
                            break;
                        case 'pix':
                            if (pixInfo) pixInfo.style.display = 'block';
                            break;
                    }
                });
            }
        }
        
        // Initialize payment method control and PayPal
        document.addEventListener('DOMContentLoaded', function() {
            setupPaymentMethodControl();
            loadPayPalWithCorrectLocale();
            setupPIXForBrazilOnly();
        });

        // Global variables for PayPal currency and locale
        let currentPayPalCurrency = 'USD';
        let currentPayPalLocale = 'en_US';
        
        // Setup PIX only for Brazilian customers
        function setupPIXForBrazilOnly() {
            const userLanguage = navigator.language || navigator.userLanguage;
            const pixOption = document.getElementById('pix-option');
            
            // Show PIX only for Brazilian Portuguese (pt-BR)
            if (userLanguage.startsWith('pt-BR') || userLanguage.startsWith('pt_BR')) {
                if (pixOption) {
                    pixOption.style.display = 'block';
                    console.log('🇧🇷 Brazilian customer detected - PIX enabled');
                }
            } else {
                if (pixOption) {
                    pixOption.style.display = 'none';
                    console.log('🌍 Non-Brazilian customer - PIX disabled');
                }
            }
        }

        // Load PayPal SDK with correct locale and currency based on user's language
        function loadPayPalWithCorrectLocale() {
            // Detect user's language and currency
            const userLanguage = navigator.language || navigator.userLanguage;
            let paypalLocale = 'en_US'; // Default to English
            let paypalCurrency = 'USD'; // Default to USD
            
            // Map browser language to PayPal locale and currency
            if (userLanguage.startsWith('pt')) {
                if (userLanguage.includes('BR') || userLanguage.includes('br')) {
                    paypalLocale = 'pt_BR'; // Portuguese Brazil
                    paypalCurrency = 'BRL'; // Brazilian Real
                } else if (userLanguage.includes('PT') || userLanguage.includes('pt')) {
                    paypalLocale = 'pt_PT'; // Portuguese Portugal
                    paypalCurrency = 'EUR'; // Euro
                } else {
                    // Generic Portuguese (Angola, etc.) - use USD
                    paypalLocale = 'pt_PT'; // Portuguese interface
                    paypalCurrency = 'USD'; // US Dollar for international Portuguese speakers
                }
            } else if (userLanguage.startsWith('en')) {
                paypalLocale = 'en_US'; // English US
                paypalCurrency = 'USD'; // US Dollar
            } else if (userLanguage.startsWith('es')) {
                paypalLocale = 'es_ES'; // Spanish
                paypalCurrency = 'EUR'; // Euro for Spain
            } else if (userLanguage.startsWith('fr')) {
                paypalLocale = 'fr_FR'; // French
                paypalCurrency = 'EUR'; // Euro for France
            } else if (userLanguage.startsWith('de')) {
                paypalLocale = 'de_DE'; // German
                paypalCurrency = 'EUR'; // Euro for Germany
            }
            
            // Store globally for use in order creation
            currentPayPalCurrency = paypalCurrency;
            currentPayPalLocale = paypalLocale;
            
            console.log('Detected language:', userLanguage, 'Using PayPal locale:', paypalLocale, 'Currency:', paypalCurrency);
            
            // Load PayPal SDK with correct locale and currency
            const script = document.createElement('script');
            script.src = `https://www.paypal.com/sdk/js?client-id=Ab2ftZVJCplquKwOY1cWgvWMivADwMhbUs-OhehwO4hVh_VW9lS87qLkRUVD39yEeoh7YGXzBeuq1Dlh&currency=${paypalCurrency}&intent=capture&locale=${paypalLocale}`;
            script.onload = function() {
                console.log('PayPal SDK loaded with locale:', paypalLocale, 'and currency:', paypalCurrency);
                initializePayPal();
            };
            script.onerror = function() {
                console.error('Failed to load PayPal SDK');
                // Try with a simpler URL
                console.log('Retrying with simpler PayPal SDK URL...');
                const retryScript = document.createElement('script');
                retryScript.src = 'https://www.paypal.com/sdk/js?client-id=Ab2ftZVJCplquKwOY1cWgvWMivADwMhbUs-OhehwO4hVh_VW9lS87qLkRUVD39yEeoh7YGXzBeuq1Dlh&currency=USD&intent=capture';
                retryScript.async = true;
                retryScript.defer = true;
                retryScript.onload = function() {
                    console.log('PayPal SDK loaded with fallback URL');
                    setTimeout(initializePayPal, 500);
                };
                retryScript.onerror = function() {
                    console.error('PayPal SDK failed to load even with fallback URL');
                };
                document.head.appendChild(retryScript);
            };
            document.head.appendChild(script);
        }

        // Function to get current currency for order creation
        function getCurrentCurrency() {
            return currentPayPalCurrency;
        }

        // PayPal integration
        let paypalRetryCount = 0;
        const maxPaypalRetries = 50; // Maximum 5 seconds (50 * 100ms)
        
        function initializePayPal() {
            // Wait for PayPal SDK to be loaded
            if (typeof paypal === 'undefined') {
                paypalRetryCount++;
                if (paypalRetryCount < maxPaypalRetries) {
                console.log('PayPal SDK not loaded yet, retrying...');
                setTimeout(initializePayPal, 100);
                return;
                } else {
                    console.error('PayPal SDK failed to load after maximum retries');
                    return;
                }
            }

            console.log('PayPal SDK loaded, initializing buttons...');

        paypal.Buttons({
            locale: currentPayPalLocale,
            createOrder: function(data, actions) {
                    return new Promise((resolve, reject) => {
                        try {
                            // Validate required variables
                            if (!selectedOffers || !Array.isArray(selectedOffers) || selectedOffers.length === 0) {
                                throw new Error('No offers selected');
                            }
                            
                            if (!currentCurrency) {
                                currentCurrency = 'USD'; // Fallback
                            }
                            
                            // Get total from order summary (use same currency as summary)
                            const totalElement = document.getElementById('totalAmount');
                            let totalAmount = 0;
                            
                            console.log('🔍 PayPal Debug - totalElement found:', !!totalElement);
                            if (totalElement) {
                                const totalText = totalElement.textContent;
                                console.log('🔍 PayPal Debug - totalText:', totalText);
                                const totalValue = parseFloat(totalText.replace(/[^\d.,]/g, '').replace(',', '.'));
                                console.log('🔍 PayPal Debug - totalValue:', totalValue);
                                
                                // Use the same currency as the summary (no conversion)
                                totalAmount = totalValue;
                                console.log('🔍 PayPal Debug - Using HTML totalAmount:', totalAmount);
                                } else {
                                console.log('🔍 PayPal Debug - totalElement NOT found, using fallback');
                                // Fallback to calculation
                                console.log('🔍 PayPal Debug - Using fallback calculation');
                                totalAmount = selectedOffers.reduce((total, offerType) => {
                                    if (!offers[offerType]) {
                                        console.warn('Offer not found:', offerType);
                                        return total;
                                    }
                                    
                                    const price = offers[offerType].prices && offers[offerType].prices[currentCurrency] 
                                        ? offers[offerType].prices[currentCurrency] 
                                        : offers[offerType].price || 0;
                                    
                                    return total + price;
                                }, 0);
                                console.log('🔍 PayPal Debug - Fallback calculated totalAmount:', totalAmount);
                            }
                            
                            const productNames = selectedOffers.map(offerType => {
                                let productName = offers[offerType] ? offers[offerType].name : 'Product';
                                
                                // If it's the basic offer and there's a selected color, use only the color name
                                if (offerType === 'basic' && selectedColor) {
                                    productName = selectedColor.name;
                                }
                                
                                return productName;
                            }).join(' + ');
                            
                            console.log('PayPal order creation:', {
                                selectedOffers: selectedOffers,
                                totalAmount: totalAmount,
                                currency: currentCurrency,
                                productNames: productNames
                            });
                            
                            console.log('🔍 PayPal Debug - Final totalAmount being sent to PayPal:', totalAmount);
                            if (totalAmount <= 0) {
                                throw new Error('Invalid total amount: ' + totalAmount);
                            }
                            
                            // Create order with timeout
                            const orderPromise = actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: totalAmount.toFixed(2),
                                        currency_code: getCurrentCurrency()
                                    },
                                    description: productNames || 'Alligator Hair Clips Products'
                                }]
                            });
                            
                            // Add timeout to prevent hanging
                            const timeoutPromise = new Promise((_, timeoutReject) => {
                                setTimeout(() => {
                                    timeoutReject(new Error('PayPal order creation timeout'));
                                }, 8000);
                            });
                            
                            Promise.race([orderPromise, timeoutPromise])
                                .then(resolve)
                                .catch(reject);
                                
                        } catch (error) {
                            console.error('Error creating PayPal order:', error);
                            reject(error);
                        }
                });
            },
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                        console.log('PayPal payment approved:', details);
                    alert((translateContent('payment_approved') || 'Payment approved!') + ' Transaction ID: ' + details.id);
                    processCheckout();
                    }).catch(function(error) {
                        console.error('PayPal payment error:', error);
                        alert(translateContent('payment_error') || 'Payment processing error. Please try again.');
                    });
                },
                onError: function(err) {
                    console.error('PayPal error:', err);
                    alert(translateContent('paypal_error') || 'PayPal error. Please try again or choose another payment method.');
                },
                onCancel: function(data) {
                    console.log('PayPal payment cancelled:', data);
                }
            }).render('#paypal-payment-button').then(function() {
                console.log('PayPal buttons rendered successfully');
            }).catch(function(error) {
                console.error('Error rendering PayPal buttons:', error);
                // Retry after a delay
                setTimeout(() => {
                    console.log('Retrying PayPal button initialization...');
                    initializePayPal();
                }, 2000);
            });
        }
    </script>

    <script>
        // Função de processamento de checkout
        function processCheckout() {
            const email = document.getElementById('email').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            const observations = document.getElementById('observations').value;

            if (!email || !paymentMethod) {
                alert(translateContent('fill_email_payment') || 'Please fill in your email and select a payment method.');
                return;
            }
            
            // Validar se a oferta básica está selecionada e se uma cor foi escolhida
            if (selectedOffers.includes('basic') && !selectedColor) {
                alert('Por favor, selecione uma cor para os Alligator Hair Clips.');
                return;
            }
            
            const orderData = {
                id: 'ORDER_' + Date.now(),
                products: selectedOffers.map(offerType => {
                    const product = {
                        ...offers[offerType],
                        totalPrice: offers[offerType].prices[currentCurrency]
                    };
                    
                    // If it's the basic offer and there's a selected color, use only the color name
                    if (offerType === 'basic' && selectedColor) {
                        product.selectedColor = selectedColor;
                        product.name = selectedColor.name;
                    }
                    
                    return product;
                }),
                customer: {
                    email
                },
                paymentMethod,
                observations,
                total: selectedOffers.reduce((total, offerType) => total + offers[offerType].prices[currentCurrency], 0),
                date: new Date().toISOString()
            };
            
            // Map order for supplier (AliExpress)
            let mappedOrder = null;
            if (typeof mapProductOrder === 'function') {
                try {
                    // Prepare order data for mapping
                    const mappingOrderData = {
                        id: orderData.id,
                        customer: orderData.customer,
                        items: orderData.products.map(product => ({
                            productId: 'alligator_hair_clips',
                            name: product.name,
                            variation: product.selectedColor ? {
                                type: 'color',
                                value: product.selectedColor.name,
                                displayName: product.selectedColor.name
                            } : null,
                            quantity: 1,
                            unitPrice: product.totalPrice,
                            totalPrice: product.totalPrice
                        })),
                        total: orderData.total,
                        date: orderData.date
                    };
                    
                    // Map the order
                    mappedOrder = mapProductOrder(mappingOrderData);
                    console.log('Pedido mapeado para fornecedor:', mappedOrder);
                } catch (error) {
                    console.error('Erro ao mapear pedido:', error);
                }
            }
            
            // Save original order
            let orders = JSON.parse(localStorage.getItem('orders') || '[]');
            orders.push(orderData);
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // Save mapped order to dashboardData for dashboard synchronization
            let dashboardData = JSON.parse(localStorage.getItem('dashboardData') || '{}');
            if (!dashboardData.orders) dashboardData.orders = [];
            
            // Use mapped order if available, otherwise use original
            const orderToSave = mappedOrder || orderData;
            dashboardData.orders.push(orderToSave);
            localStorage.setItem('dashboardData', JSON.stringify(dashboardData));
            
            // Show specific message based on payment method
            let successMessage = `Order placed successfully!\n\nProducts: ${orderData.products.map(p => p.name).join(' + ')}\nTotal: ${formatPrice(orderData.total)}\n\n`;
            
            switch(paymentMethod) {
                case 'paypal':
                    successMessage += 'PayPal payment has been processed. You will receive a confirmation email shortly.';
                    break;
                case 'pix':
                    successMessage += 'You will receive PIX payment instructions by email. After payment, your order will be processed.';
                    break;
                default:
                    successMessage += 'You will receive a confirmation email shortly.';
            }
            
            alert(successMessage);
            
            // Redirect to home page
            window.location.href = '../../index.html';
        }

        // Checkout Translation System (without currency converter)
        class CheckoutTranslator {
            constructor() {
                this.userCountry = null;
                this.userCurrency = 'USD';
                this.isInitialized = false;
                this.init();
            }
            
            async init() {
                try {
                    await this.detectUserLocation();
                    this.updatePageContent();
                    this.isInitialized = true;
                    console.log(`Checkout translator initialized. Currency: ${this.userCurrency}`);
                } catch (error) {
                    console.error('Error initializing checkout translator:', error);
                    this.userCurrency = 'USD';
                    this.updatePageContent();
                }
            }
            
            async detectUserLocation() {
                try {
                    let countryCode = null;
                    
                    // Check if running from file:// protocol
                    if (window.location.protocol === 'file:') {
                        console.log('Running from file:// protocol, using fallback detection');
                        // Try to detect from browser language with better detection
                        const browserLang = navigator.language || navigator.userLanguage;
                        console.log('🌍 Browser Language Detected:', browserLang);

                        if (browserLang.startsWith('pt-BR') || browserLang.startsWith('pt_BR')) {
                            countryCode = 'BR';
                            console.log('🇧🇷 Brazilian Portuguese detected → Brazil');
                        } else if (browserLang.startsWith('pt-PT') || browserLang.startsWith('pt_PT')) {
                            countryCode = 'PT';
                            console.log('🇵🇹 European Portuguese detected → Portugal');
                        } else if (browserLang.startsWith('pt')) {
                            countryCode = 'PT'; // Default to Portugal for Portuguese
                            console.log('🇵🇹 Generic Portuguese detected → Portugal (default)');
                        } else if (browserLang.startsWith('es')) {
                            countryCode = 'ES';
                            console.log('🇪🇸 Spanish detected → Spain');
                        } else {
                            countryCode = 'US';
                            console.log('🇺🇸 English detected → USA');
                        }
                    } else {
                        // Use ONLY browser language - NO IP detection
                        const browserLang = navigator.language || navigator.userLanguage;
                        console.log('🌍 Browser language detected:', browserLang);
                        
                        // Set language and currency based ONLY on browser language
                        if (browserLang.startsWith('pt-PT') || browserLang.startsWith('pt_PT')) {
                            this.userLanguage = 'pt';
                            this.userCountry = 'PT';
                            this.userCurrency = 'EUR';
                            console.log('🇵🇹 Portuguese (Portugal) detected → EUR');
                        } else if (browserLang.startsWith('pt-BR') || browserLang.startsWith('pt_BR')) {
                            this.userLanguage = 'pt';
                            this.userCountry = 'BR';
                            this.userCurrency = 'BRL';
                            console.log('🇧🇷 Portuguese (Brazil) detected → BRL');
                        } else if (browserLang.startsWith('pt')) {
                            // Generic Portuguese - default to USD (for Angola and other Portuguese-speaking countries)
                            this.userLanguage = 'pt';
                            this.userCountry = 'AO'; // Angola
                            this.userCurrency = 'USD';
                            console.log('🇦🇴 Generic Portuguese detected → USD (Angola/International)');
                        } else {
                            this.userLanguage = 'en';
                            this.userCountry = 'US';
                            this.userCurrency = 'USD';
                            console.log('🇺🇸 English detected → USD');
                        }
                    }
                    
                    this.userCountry = countryCode;
                    
                    const countryToCurrency = {
                        'BR': 'BRL',
                        'US': 'USD', 'CA': 'USD', 'MX': 'USD', 'AR': 'USD', 'CL': 'USD', 'CO': 'USD', 'PE': 'USD', 'UY': 'USD', 'BO': 'USD', 'PY': 'USD', 'VE': 'USD', 'EC': 'USD', 'GY': 'USD', 'SR': 'USD', 'GF': 'USD', 'FK': 'USD', 'BZ': 'USD', 'GT': 'USD', 'HN': 'USD', 'SV': 'USD', 'NI': 'USD', 'CR': 'USD', 'PA': 'USD', 'CU': 'USD', 'JM': 'USD', 'HT': 'USD', 'DO': 'USD', 'PR': 'USD', 'VI': 'USD', 'AG': 'USD', 'BB': 'USD', 'DM': 'USD', 'GD': 'USD', 'KN': 'USD', 'LC': 'USD', 'VC': 'USD', 'TT': 'USD', 'BS': 'USD', 'AU': 'USD', 'NZ': 'USD', 'JP': 'USD', 'KR': 'USD', 'SG': 'USD', 'HK': 'USD', 'TW': 'USD', 'TH': 'USD', 'MY': 'USD', 'ID': 'USD', 'PH': 'USD', 'VN': 'USD', 'IN': 'USD', 'PK': 'USD', 'BD': 'USD', 'LK': 'USD', 'MM': 'USD', 'KH': 'USD', 'LA': 'USD', 'BN': 'USD', 'FJ': 'USD', 'PG': 'USD', 'SB': 'USD', 'VU': 'USD', 'NC': 'USD', 'PF': 'USD', 'WS': 'USD', 'TO': 'USD', 'KI': 'USD', 'TV': 'USD', 'NR': 'USD', 'MH': 'USD', 'FM': 'USD', 'PW': 'USD', 'AS': 'USD', 'GU': 'USD', 'MP': 'USD', 'CK': 'USD', 'NU': 'USD', 'TK': 'USD', 'WF': 'USD', 'NF': 'USD', 'PN': 'USD', 'GS': 'USD', 'SH': 'USD', 'AC': 'USD', 'TA': 'USD', 'IO': 'USD', 'CX': 'USD', 'CC': 'USD', 'HM': 'USD', 'AQ': 'USD', 'BV': 'USD', 'TF': 'USD', 'UM': 'USD',
                        'DE': 'USD', 'FR': 'USD', 'IT': 'USD', 'ES': 'USD', 'NL': 'USD', 'BE': 'USD', 'AT': 'USD', 'PT': 'BRL', 'IE': 'USD', 'FI': 'USD', 'GR': 'USD', 'LU': 'USD', 'MT': 'USD', 'CY': 'USD', 'SK': 'USD', 'SI': 'USD', 'EE': 'USD', 'LV': 'USD', 'LT': 'USD', 'AD': 'USD', 'MC': 'USD', 'SM': 'USD', 'VA': 'USD', 'ME': 'USD', 'XK': 'USD'
                    };
                    
                    this.userCurrency = countryToCurrency[this.userCountry] || 'USD';
                    console.log(`Final detection - Country: ${this.userCountry}, Currency: ${this.userCurrency}`);
                    
                } catch (error) {
                    console.error('Error in location detection:', error);
                    this.userCurrency = 'USD';
                    this.userCountry = 'Unknown';
                }
            }
            
            translateContent(contentKey) {
                // Use detected language for content translation - distinguish between Brazilian and European Portuguese
                let languageKey = 'USD'; // Default to English

                if (this.userLanguage === 'pt-PT' || this.userLanguage === 'pt_PT') {
                    languageKey = 'EUR'; // European Portuguese for Portugal
                    console.log(`🇵🇹 European Portuguese detected for ${contentKey}`);
                } else if (this.userLanguage === 'pt-BR' || this.userLanguage === 'pt_BR') {
                    languageKey = 'BRL'; // Brazilian Portuguese
                    console.log(`🇧🇷 Brazilian Portuguese detected for ${contentKey}`);
                } else if (this.userLanguage === 'pt') {
                    languageKey = 'EUR'; // Generic Portuguese defaults to European (Portugal focus)
                    console.log(`🇵🇹 Generic Portuguese detected for ${contentKey} - defaulting to European Portuguese`);
                } else {
                    languageKey = 'USD'; // English for other languages
                    console.log(`🇺🇸 English detected for ${contentKey}`);
                }

                console.log(`🌍 Translating ${contentKey}: userLanguage=${this.userLanguage}, languageKey=${languageKey}`);
                
                const translations = {
                    'checkout_title': {
                        'USD': 'Checkout',
                        'BRL': 'Finalizar Compra',
                        'EUR': 'Checkout'
                    },
                    'product_info': {
                        'USD': 'Product Information',
                        'BRL': 'Informações do Produto',
                        'EUR': 'Product Information'
                    },
                    'customer_info': {
                        'USD': 'Customer Information',
                        'BRL': 'Informações do Cliente',
                        'EUR': 'Customer Information'
                    },
                    'payment_info': {
                        'USD': 'Payment Information',
                        'BRL': 'Informações de Pagamento',
                        'EUR': 'Payment Information'
                    },
                    'order_summary': {
                        'USD': 'Order Summary',
                        'BRL': 'Resumo do Pedido',
                        'EUR': 'Order Summary'
                    },
                    'first_name': {
                        'USD': 'First Name',
                        'BRL': 'Nome',
                        'EUR': 'First Name'
                    },
                    'last_name': {
                        'USD': 'Last Name',
                        'BRL': 'Sobrenome',
                        'EUR': 'Last Name'
                    },
                    'email': {
                        'USD': 'Email',
                        'BRL': 'E-mail',
                        'EUR': 'Email'
                    },
                    'phone': {
                        'USD': 'Phone',
                        'BRL': 'Telefone',
                        'EUR': 'Phone'
                    },
                    'address': {
                        'USD': 'Address',
                        'BRL': 'Endereço',
                        'EUR': 'Address'
                    },
                    'city': {
                        'USD': 'City',
                        'BRL': 'Cidade',
                        'EUR': 'City'
                    },
                    'state': {
                        'USD': 'State',
                        'BRL': 'Estado',
                        'EUR': 'State'
                    },
                    'zip_code': {
                        'USD': 'Zip Code',
                        'BRL': 'CEP',
                        'EUR': 'Zip Code'
                    },
                    'country': {
                        'USD': 'Country',
                        'BRL': 'País',
                        'EUR': 'Country'
                    },
                    'payment_method': {
                        'USD': 'Payment Method',
                        'BRL': 'Método de Pagamento',
                        'EUR': 'Payment Method'
                    },
                    'observations': {
                        'USD': 'Observations',
                        'BRL': 'Observações',
                        'EUR': 'Observations'
                    },
                    'total': {
                        'USD': 'Total',
                        'BRL': 'Total',
                        'EUR': 'Total'
                    },
                    'checkout_button': {
                        'USD': 'Complete Purchase',
                        'BRL': 'Finalizar Compra',
                        'EUR': 'Complete Purchase'
                    },
                    'required_fields': {
                        'USD': 'Please fill in all required fields.',
                        'BRL': 'Por favor, preencha todos os campos obrigatórios.',
                        'EUR': 'Please fill in all required fields.'
                    },
                    'order_success': {
                        'USD': 'Order completed successfully!',
                        'BRL': 'Pedido realizado com sucesso!',
                        'EUR': 'Order completed successfully!'
                    },
                    'confirmation_email': {
                        'USD': 'You will receive a confirmation email shortly.',
                        'BRL': 'Você receberá um e-mail de confirmação em breve.',
                        'EUR': 'You will receive a confirmation email shortly.'
                    },
                    // Product name translations
                    'product_hair_clips': {
                        'USD': 'Unbreakable Hair Clips',
                        'BRL': 'Grampos Anti-Quebra',
                        'EUR': 'Unbreakable Hair Clips'
                    },
                    // Offer interface translations
                    'choose_offer': {
                        'USD': 'Choose Your Offer',
                        'BRL': 'Choose Your Offer',
                        'EUR': 'Choose Your Offer'
                    },
                    'offer_basic_title': {
                        'USD': 'Unbreakable Hair Clips',
                        'BRL': 'Grampos Anti-Quebra',
                        'EUR': 'Unbreakable Hair Clips'
                    },
                    'offer_basic_description': {
                        'USD': 'No more clips that slip and don\'t hold hair. Unbreakable Hair Clips hold each strand firmly, making styling, cutting and makeup easier without discomfort.',
                        'BRL': 'Chega de grampos que escorregam e não seguram o cabelo. Os Grampos Anti-Quebra fixam firmemente cada mecha, facilitando penteados, cortes e maquiagens sem incômodos.',
                        'EUR': 'No more clips that slip and don\'t hold hair. Unbreakable Hair Clips hold each strand firmly, making styling, cutting and makeup easier without discomfort.'
                    },
                    'offer_premium_title': {
                        'USD': 'Premium Offer',
                        'BRL': 'Oferta Premium',
                        'EUR': 'Premium Offer'
                    },
                    'offer_premium_description': {
                        'USD': 'Towel Cloth – Pink is soft, super absorbent and durable, ensuring comfort and practicality in your daily routine.',
                        'BRL': 'A Toalha Rosa é macia, superabsorvente e durável, garantindo conforto e praticidade no seu dia a dia.',
                        'EUR': 'Towel Cloth – Pink is soft, super absorbent and durable, ensuring comfort and practicality in your daily routine.'
                    },
                    'offer_complete_title': {
                        'USD': 'Complete Offer',
                        'BRL': 'Complete Offer',
                        'EUR': 'Complete Offer'
                    },
                    'offer_complete_description': {
                        'USD': 'Tired of losing or breaking fragile pieces in daily life? The 10pcs TouMing - Blue kit offers practicality and durability, with transparent and resistant design that facilitates organization and prevents waste.',
                        'BRL': 'Cansada de perder ou quebrar peças frágeis no dia a dia? O Kit 10 Organizadores Azuis oferece praticidade e durabilidade, com design transparente e resistente que facilita a organização e evita desperdícios.',
                        'EUR': 'Tired of losing or breaking fragile pieces in daily life? The 10pcs TouMing - Blue kit offers practicality and durability, with transparent and resistant design that facilitates organization and prevents waste.'
                    },
                    'choose_color': {
                        'USD': 'Choose color:',
                        'BRL': 'Choose color:',
                        'EUR': 'Choose color:'
                    },
                    'color_black': {
                        'USD': 'Black',
                        'BRL': 'Preto',
                        'EUR': 'Preto'
                    },
                    'color_green': {
                        'USD': 'Green',
                        'BRL': 'Verde',
                        'EUR': 'Verde'
                    },
                    'color_nude_pink': {
                        'USD': 'Nude Pink',
                        'BRL': 'Rosa Nude',
                        'EUR': 'Rosa Nude'
                    },
                    'color_pink': {
                        'USD': 'Pink',
                        'BRL': 'Rosa',
                        'EUR': 'Rosa'
                    },
                    'color_purple': {
                        'USD': 'Purple',
                        'BRL': 'Roxo',
                        'EUR': 'Roxo'
                    },
                    'color_red': {
                        'USD': 'Red',
                        'BRL': 'Vermelho',
                        'EUR': 'Vermelho'
                    },
                    'color_yellow': {
                        'USD': 'Yellow',
                        'BRL': 'Amarelo',
                        'EUR': 'Amarelo'
                    },
                    'discount_badge': {
                        'USD': '48% OFF',
                        'BRL': '48% OFF',
                        'EUR': '48% OFF'
                    }
                };
                
                return translations[contentKey] ? 
                    translations[contentKey][languageKey] || 
                    translations[contentKey]['USD'] : 
                    contentKey;
            }
            
            updatePageContent() {
                try {
                    // Update page title
                    const pageTitle = document.querySelector('title');
                    if (pageTitle) {
                        pageTitle.textContent = `${this.translateContent('checkout_title')} - Alligator Hair Clips | 67 Beauty Hub`;
                    }
                    
                    // Update form labels
                    const firstNameLabel = document.querySelector('label[for="firstName"]');
                    if (firstNameLabel) firstNameLabel.textContent = this.translateContent('first_name');
                    
                    const lastNameLabel = document.querySelector('label[for="lastName"]');
                    if (lastNameLabel) lastNameLabel.textContent = this.translateContent('last_name');
                    
                    const emailLabel = document.querySelector('label[for="email"]');
                    if (emailLabel) emailLabel.textContent = this.translateContent('email');
                    
                    const phoneLabel = document.querySelector('label[for="phone"]');
                    if (phoneLabel) phoneLabel.textContent = this.translateContent('phone');
                    
                    const addressLabel = document.querySelector('label[for="address"]');
                    if (addressLabel) addressLabel.textContent = this.translateContent('address');
                    
                    const cityLabel = document.querySelector('label[for="city"]');
                    if (cityLabel) cityLabel.textContent = this.translateContent('city');
                    
                    const stateLabel = document.querySelector('label[for="state"]');
                    if (stateLabel) stateLabel.textContent = this.translateContent('state');
                    
                    const zipCodeLabel = document.querySelector('label[for="zipCode"]');
                    if (zipCodeLabel) zipCodeLabel.textContent = this.translateContent('zip_code');
                    
                    const countryLabel = document.querySelector('label[for="country"]');
                    if (countryLabel) countryLabel.textContent = this.translateContent('country');
                    
                    const paymentLabel = document.querySelector('label[for="paymentMethod"]');
                    if (paymentLabel) paymentLabel.textContent = this.translateContent('payment_method');
                    
                    const observationsLabel = document.querySelector('label[for="observations"]');
                    if (observationsLabel) observationsLabel.textContent = this.translateContent('observations');
                    
                    // Update placeholders
                    const firstNameInput = document.getElementById('firstName');
                    if (firstNameInput) firstNameInput.placeholder = this.translateContent('first_name');
                    
                    const lastNameInput = document.getElementById('lastName');
                    if (lastNameInput) lastNameInput.placeholder = this.translateContent('last_name');
                    
                    const emailInput = document.getElementById('email');
                    if (emailInput) emailInput.placeholder = this.translateContent('email');
                    
                    
                    const observationsInput = document.getElementById('observations');
                    if (observationsInput) observationsInput.placeholder = this.translateContent('observations');
                    
                    // Update checkout button
                    const checkoutButton = document.querySelector('button[onclick="processCheckout()"]');
                    if (checkoutButton) checkoutButton.textContent = this.translateContent('checkout_button');
                    
                    // Update product title
                    const productTitle = document.querySelector('h3[data-translate-key="product_hair_clips"]');
                    if (productTitle) productTitle.textContent = this.translateContent('product_hair_clips');
                    
                    // Update offer elements
                    const chooseOfferTitle = document.querySelector('h3[data-translate-key="choose_offer"]');
                    if (chooseOfferTitle) {
                        chooseOfferTitle.innerHTML = `<i class="fas fa-gift"></i> ${this.translateContent('choose_offer')}`;
                    }
                    
                    const offerBasicTitle = document.querySelector('h4[data-translate-key="offer_basic_title"]');
                    if (offerBasicTitle) offerBasicTitle.textContent = this.translateContent('offer_basic_title');
                    
                    const offerBasicDescription = document.querySelector('.description[data-translate-key="offer_basic_description"]');
                    if (offerBasicDescription) offerBasicDescription.textContent = this.translateContent('offer_basic_description');
                    
                    const discountBadge = document.querySelector('.discount[data-translate-key="discount_badge"]');
                    if (discountBadge) discountBadge.textContent = this.translateContent('discount_badge');
                    
                    const chooseColorLabel = document.querySelector('h5[data-translate-key="choose_color"]');
                    if (chooseColorLabel) chooseColorLabel.textContent = this.translateContent('choose_color');
                    
                    // Translate color options
                    const colorSpans = document.querySelectorAll('span[data-translate-key^="color_"]');
                    colorSpans.forEach(span => {
                        const translateKey = span.getAttribute('data-translate-key');
                        span.textContent = this.translateContent(translateKey);
                    });
                    
                    const offerPremiumTitle = document.querySelector('h4[data-translate-key="offer_premium_title"]');
                    if (offerPremiumTitle) offerPremiumTitle.textContent = this.translateContent('offer_premium_title');
                    
                    const offerPremiumDescription = document.querySelector('.description[data-translate-key="offer_premium_description"]');
                    if (offerPremiumDescription) offerPremiumDescription.textContent = this.translateContent('offer_premium_description');
                    
                    const offerCompleteDescription = document.querySelector('.description[data-translate-key="offer_complete_description"]');
                    if (offerCompleteDescription) offerCompleteDescription.textContent = this.translateContent('offer_complete_description');
                    
                    const offerCompleteTitle = document.querySelector('h4[data-translate-key="offer_complete_title"]');
                    if (offerCompleteTitle) offerCompleteTitle.textContent = this.translateContent('offer_complete_title');
                    
                    // Update order summary title
                    const orderSummaryTitle = document.querySelector('span[data-translate-key="order_summary"]');
                    if (orderSummaryTitle) orderSummaryTitle.textContent = this.translateContent('order_summary');
                    
                    console.log('Checkout page content updated successfully');
                    
                } catch (error) {
                    console.error('Error updating checkout page content:', error);
                }
            }
        }
        
        // PIX Payment System
        let pixCheckout = null;
        
        // Initialize PIX system
        function initializePIXSystem() {
            if (typeof PIXCheckout !== 'undefined') {
                pixCheckout = new PIXCheckout();
                console.log('✅ PIX system initialized');
            } else {
                console.error('❌ PIX system not available');
            }
        }
        
        // Setup PIX only for Brazilian customers
        function setupPIXForBrazilOnly() {
            const pixOption = document.getElementById('pix-option');
            const selectedCountry = localStorage.getItem('selectedCountry');
            const isTestMode = localStorage.getItem('pixTestMode') === 'true';
            
            // Debug logs
            console.log('🔍 PIX Debug Info:');
            console.log('Selected Country:', selectedCountry);
            console.log('Is Test Mode:', isTestMode);
            console.log('PIX Option Element:', pixOption);
            
            // Show PIX for Brazil (BR) OR for test mode (any country)
            if (selectedCountry === 'BR' || isTestMode) {
                if (pixOption) {
                    pixOption.style.display = 'block';
                    if (isTestMode) {
                        console.log('🧪 PIX Test Mode enabled');
                        pixOption.textContent = 'PIX (Test Mode)';
                    } else {
                        console.log('🇧🇷 Brazilian customer detected - PIX enabled');
                        pixOption.textContent = 'PIX';
                    }
                } else {
                    console.error('❌ PIX Option element not found!');
                }
            } else {
                if (pixOption) {
                    pixOption.style.display = 'none';
                    console.log('🌍 Non-Brazilian customer - PIX disabled');
                } else {
                    console.error('❌ PIX Option element not found!');
                }
            }
        }
        
        // Enable PIX test mode
        function enablePIXTestMode() {
            localStorage.setItem('pixTestMode', 'true');
            console.log('🧪 PIX Test Mode enabled');
            setupPIXForBrazilOnly();
        }
        
        // Disable PIX test mode
        function disablePIXTestMode() {
            localStorage.removeItem('pixTestMode');
            console.log('🚫 PIX Test Mode disabled');
            setupPIXForBrazilOnly();
        }
        
        // Check current PIX status
        function checkPIXStatus() {
            console.log('🔍 PIX Status Check:');
            console.log('localStorage pixTestMode:', localStorage.getItem('pixTestMode'));
            console.log('User Language:', navigator.language);
            console.log('PIX Option Element:', document.getElementById('pix-option'));
            console.log('PIX Option Display:', document.getElementById('pix-option')?.style.display);
            console.log('PIX Option Text:', document.getElementById('pix-option')?.textContent);
        }
        
        // Initialize PIX for order
        function initializePIXForOrder() {
            if (!pixCheckout) {
                console.error('PIX system not initialized');
                return;
            }
            
            const orderData = getCurrentOrderData();
            if (!orderData) {
                console.error('Failed to get order data for PIX');
                return;
            }
            
            // Initialize PIX with order data
            pixCheckout.initializePIX(orderData);
        }
        
        // Get current order data for PIX (using summary total like PayPal)
        function getCurrentOrderData() {
            // Validate required variables
            if (!selectedOffers || !Array.isArray(selectedOffers) || selectedOffers.length === 0) {
                console.error('No offers selected');
                return null;
            }
            
            // Get total from order summary (same as PayPal logic)
            const totalElement = document.getElementById('totalAmount');
            let totalAmount = 0;
            
            if (totalElement) {
                const totalText = totalElement.textContent;
                totalAmount = parseFloat(totalText.replace(/[^\d.,]/g, '').replace(',', '.'));
                console.log('💰 PIX using summary total:', totalAmount, currentCurrency);
                console.log('📊 Summary element text:', totalText);
            } else {
                console.warn('⚠️ Total element not found, using fallback calculation');
                // Fallback to calculation
                selectedOffers.forEach(offerType => {
                    if (offers[offerType]) {
                        const offer = offers[offerType];
                        const price = offer.prices && offer.prices[currentCurrency] 
                            ? offer.prices[currentCurrency] 
                            : offer.price || 0;
                        totalAmount += price;
                    }
                });
            }
            
            if (totalAmount <= 0) {
                console.error('❌ Invalid total amount:', totalAmount);
                return null;
            }
            
            // Get product names
            const products = selectedOffers.map(offerType => {
                if (offers[offerType]) {
                    let productName = offers[offerType].name;
                    
                    // Se for a oferta básica e há cor selecionada, usar apenas o nome da cor
                    if (offerType === 'basic' && selectedColor && selectedColor.name) {
                        productName = selectedColor.name;
                    }
                    
                    return productName;
                }
                return 'Produto';
            });
            
            console.log('✅ PIX Order Data:', {
                total: totalAmount,
                currency: currentCurrency,
                products: products
            });
            
            return {
                id: 'ORDER_' + Date.now(),
                products: products,
                total: totalAmount,
                currency: currentCurrency,
                description: products.join(' + ')
            };
        }
        
        // Handle PIX payment
        function handlePIXPayment(email, observations) {
            if (!pixCheckout) {
                alert('PIX system not available. Please try again.');
                return;
            }
            
            const orderData = getCurrentOrderData();
            if (!orderData) {
                alert('Failed to get order data. Please try again.');
                return;
            }
            
            // Initialize PIX with order data
            pixCheckout.initializePIX(orderData);
        }
        
        // Payment method control
        function setupPaymentMethodControl() {
            const paymentMethodSelect = document.getElementById('paymentMethod');
            const paypalButton = document.getElementById('paypal-payment-button');
            const pixInfo = document.getElementById('pix-payment-info');
            
            if (paymentMethodSelect) {
                paymentMethodSelect.addEventListener('change', function() {
                    const selectedMethod = this.value;
                    
                    // Hide all payment options first
                    if (paypalButton) paypalButton.style.display = 'none';
                    if (pixInfo) pixInfo.style.display = 'none';
                    
                    // Show selected payment method
                    switch(selectedMethod) {
                        case 'paypal':
                            if (paypalButton) paypalButton.style.display = 'block';
                            break;
                        case 'pix':
                            if (pixInfo) pixInfo.style.display = 'block';
                            initializePIXForOrder();
                            break;
                    }
                });
            }
        }
        
        // Process checkout function
        function processCheckout() {
            const email = document.getElementById('email').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            const observations = document.getElementById('observations').value;

            if (!email || !paymentMethod) {
                alert('Please fill in email and select a payment method.');
                return;
            }
            
            // Handle PIX payment
            if (paymentMethod === 'pix') {
                handlePIXPayment(email, observations);
                return;
            }
            
            // Handle other payment methods
            alert('Payment method not implemented yet.');
        }
        
        
        // Initialize with global translation system
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize currency system with automatic language detection
            initializeCurrency();
            
            // Initialize payment system
            setupPaymentMethodControl();
            
            // Initialize PIX system
            initializePIXSystem();
            setupPIXForBrazilOnly();

            // Global translation system will handle everything
            console.log(`🌍 Page initialized with global translation system`);
        });
    </script>
    
    <!-- Footer Copyright -->
    <footer style="text-align: center; padding: 20px; background: #f8f9fa; border-top: 1px solid #e9ecef; margin-top: 40px;">
        <p style="color: #666; font-size: 14px; margin: 0;">
            © 2025 67 Beauty Hub - All rights reserved
        </p>
    </footer>


</body>
</html>


